<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Python Basics</title>

<!-- @@ start change in v1 -->
<link href="../css/programming_notes_v1.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../scripts/programming_notes_v1.js"></script>
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" /></head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header-footer"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>TABLE OF CONTENTS <a id="show-toc" href="#show-toc">(HIDE)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<div id="content-header">
<h1>Python</h1>
<h2>Getting Started and Basics</h2>
</div>

<div id="content-main">

<!-- @@ end change in v1 -->

<p>I shall assume that you are familiar with some programming languages such as C/C++/Java. This article is not meant to be an introduction to programming.</p>

<h3>Python By Examples</h3>
<p>This section is for experience programmers to look at Python's syntaxes and those who need to refresh their memory.</p>

<h4>Example 1: <span class="font-code">wc.py</span> (Word Count)</h4>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python</span>
<span class="color-comment"># -*- coding: UTF-8 -*-</span>
&quot;&quot;&quot;
wc - word count
Read a file given in the command-line argument and print the number of
lines, words and characters - similar to UNIX's wc utility.
Usage: ./wc.py &lt;filename&gt;
Note: wc.py shall be executable
&quot;&quot;&quot;
    <span class="color-comment"># The module's doc-string for documentation
    # Multi-line strings are delimited by triple single/double quotes</span>

<span class="color-comment"># Check if input filename is given in command-line arguments</span>
import sys              <span class="color-comment"># Uses sys.argv and sys.exit()</span>
if len(sys.argv) != 2:  <span class="color-comment"># command-line args is kept in sys.argv</span>
    print('Usage: ./wc.py &lt;filename&gt;')
    sys.exit(1)         <span class="color-comment"># Return a non-zero value for abnormal termination</span>
    <span class="color-comment"># Python uses indentation instead of {} for body block</span>
 
<span class="color-comment"># Variables are created via assignments. No declaration needed.</span>
num_words = num_lines = num_chars = 0  <span class="color-comment"># chain assignment</span>
 
<span class="color-comment"># Get input file name from the command-line arguments</span>
with open(sys.argv[1]) as infile: <span class="color-comment"> # "with" closes the file automatically</span>
    for line in infile:            <span class="color-comment"># Process each line (including newline)</span>
        num_lines += 1             <span class="color-comment"># No ++ operator in Python?!</span>
        num_chars += len(line)
        line = line.strip()        <span class="color-comment"># Remove leading and trailing whitespaces</span>
        words = line.split()       <span class="color-comment"># Split into a list using whitespace as delimiter</span>
        num_words += len(words)
 
<span class="color-comment"># Print results</span>
print('Line count is %d' % num_lines)  <span class="color-comment"># C-like printf via the % operator</span>
print('Word count is %d' % num_words)
print('Character count is %d' % num_chars)</pre>

<p>To run the script:</p>
<pre class="color-command">
$ <strong>chmod u+x wc.py</strong>      <span class="color-comment"># Set the script executable</span>
$ <strong>./wc.py &lt;filename&gt;</strong>   <span class="color-comment"># Execute the script</span>

<span class="color-comment"># OR</span>
$ <strong>python wc.py &lt;filename&gt;</strong>  <span class="color-comment"># Invoke Python Interpreter to run the script</span></pre>

<h5>Dissecting the Program</h5>
<ol>
<li>Line 1 is applicable to the Unix environment only. It is known as the Hash-Bang (or She-Bang) for specifying the Python Interpreter, so that the script can be executed directly as a standalone program.</li>

<li>The optional Line 2 specifies the source encoding scheme. We choose and recommend UTF-8 for internationalization. This special format is also recognized by popular editors for saving the source code.</li>

<li>The script begins by the so-called doc-string to provide the documentation.  Python supports multi-line string, delimited by triple single/double quotes.</li>

<li>[TODO] more</li>
</ol>



<p>[TODO] More examples</p>

<h3>Introduction</h3>

<p>Python is created by Dutch Guido van Rossum around 1991. Python is an open-source project. The mother site is <a href="http://www.python.org">www.python.org</a>.</p>

<p>The main features of Python are:</p>

<ul>
<li>Python is an easy and intuitive language. Python scripts are easy to read and understand.</li>

<li>Python (like Perl) is <em>expressive</em>. A single line of Python code can do many lines of code in other general-purpose languages (such as C/C++/Java).</li>

<li>Python is free and open-source. It is cross-platform and runs on Windows, Linux/UNIX, and Mac OS.</li>

<li>Python is well suited for <em>rapid application development</em> (RAD). You can code an application in Python in much shorter time than other general-purpose  languages (such as C/C++/Java). Python can be used to write small applications and rapid prototypes, but it also scales well for developing large-scale project.</li>

<li>Python is a scripting language. Like most of the scripting languages (e.g., Perl, JavaScript), Python associates types with objects, instead of variables. That is, a variable can be assigned a value of any type, a list (array) can contain objects of different types.</li>

<li>Python provides high-level data types such as dynamic array and dictionary (or associative array).</li>

<li>Python is object-oriented.</li>

<li>Python is not a fully compiled language. It is compiled into internal byte-codes, which is then interpreted. Hence, Python is not as fast as fully-compiled languages such as C/C++.</li>

<li>Python comes with a huge set of libraries including graphical user interface (GUI) toolkit, web programming library, networking, and etc.</li>

</ul>

<p>Python has 3 versions:</p>

<ul>
<li>Python 1: the initial version.</li>
<li>Python 2: released in 2000, with many new features such as garbage collector and support for Unicode.</li>
<li>Python 3 (Python 3000 or py3k): A major upgrade released in 2008. Python 3 is NOT backward compatible with Python 2.</li>
</ul>

<h5>Python 2 or Python 3?</h5>

<p>Currently, two versions of Python are supported in parallel, version 2.7 and version 3.4 (or 3.5). There are unfortunately incompatible. This situation arises because when Guido Van Rossum (the creator of Python) decided to bring significant changes to Python 2, he found that the new changes would be incompatible with the existing codes. He decided to start a new version called Python 3, but continue maintaining Python 2 without introducing new features.  Python 3.0 was released in 2008, while Python 2.7 in 2010.</p>

<p>AGAIN, TAKE NOTE THAT PYTHON 2 AND PYTHON 3 ARE NOT COMPATIBLE!!! You need to decide whether to use Python 2 or Python 3.</p>

<p>All the codes in this article are tested under Python 3.4.</p>


<h3>Installation and Getting Started</h3>

<h4>Installation</h4>

<ul>
<li>For Ubuntu: Both Python 2.7 and Python 3.4 should have already installed by default. If not, you can install via:
<pre class="color-command">
<span class="color-comment"># Installing Python 2</span>
$ <strong>sudo apt-get install python</strong>
<span class="color-comment"># Installing Python 3</span>
$ <strong>sudo apt-get install python3</strong>
</pre>

To verify the Python installation (under Ubuntu 14.04 LTS):
<pre class="color-command">
<span class="color-comment"># List packages beginning with python</span>
$ <strong>dpkg --list python*</strong>
||/ Name                Version        Architecture  
+++-===================-==============-==============
ii  python              2.7.5-5ubuntu3 amd64
ii  python2.7           2.7.6-8ubuntu0 amd64
ii  python3             3.4.0-0ubuntu2 amd64
rc  python3.3           3.3.2-7ubuntu3 amd64
ii  python3.4           3.4.3-1ubuntu1 amd64
<span class="color-comment"># Locate the Python Interpreters from the PATH</span>
$ <strong>which python*</strong>
/usr/bin/python
/usr/bin/python2.7
/usr/bin/python3
/usr/bin/python3.4
$ <strong>ll /usr/bin/python*</strong>
lrwxrwxrwx 1 root root       9 Dec 21  2013 python -> python2.7*
lrwxrwxrwx 1 root root       9 Dec 21  2013 python2 -> python2.7*
-rwxr-xr-x 1 root root 3345416 Jun 23 02:51 python2.7*
lrwxrwxrwx 1 root root       9 Mar 23  2014 python3 -> python3.4*
-rwxr-xr-x 2 root root 3709944 Oct 15 05:42 python3.4*
-rwxr-xr-x 2 root root 3709944 Oct 15 05:42 python3.4m*
lrwxrwxrwx 1 root root      10 Mar 23  2014 python3m -> python3.4m*
      <span class="color-comment"># Clearly,
      # &quot;python&quot; and &quot;python2&quot; are symlinks to python2.7.
      # &quot;python3&quot; is a simlink to python3.4.</span>
<span class="color-comment"># Show status of a specific package</span>
$ <strong>dpkg --status python2.7</strong>
Version: 2.7.6-8ubuntu0.2
......
$ <strong>dpkg --status python3.4</strong>
Version: 3.4.3-1ubuntu1~14.04.3
......</pre>
</li>

<li>For Windows: From <a href="http://www.python.org/download/">http://www.python.org/download/</a>, download the 32-bit or 64-bit MSI installer, and run the downloaded installer.</li>

<li>For Mac OS X: [TODO]</li>
</ul>

<p>To check the version for a Python Interpreter, use <code>-V</code> (or <code>--version</code>) flag, e.g.,</p>
<pre class="color-command">
$ <strong>python --version</strong>
Python 2.7.6
$ <strong>python2 -V</strong>
Python 2.7.6
$ <strong>python3 --version</strong>
Python 3.4.3</pre>


<h4>Documentation</h4>

<p>Python documentation and language reference are provided online @ <a href="http://docs.python.org">http://docs.python.org</a>.</p>

<h4>Getting Started</h4>

<h5>Interactive Python Command-Line Shell</h5>

<p>You can run the Python Interpreter in interactive mode, i.e., as a command-line shell. To launch the Python Command-Line shell:</p>

<ul>
<li>In Ubuntu:
<pre class="color-command">
$ <strong>python</strong>
Python 2.7.6 (default, Jun 22 2015, 17:58:13) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt;</pre></li>

<li>In Windows: Click the START button &rArr; Python &rArr; Python (Command-line); or run &quot;<code>python.exe</code>&quot; from the Python installed directory.</li>
<li>In Mac: [TODO]</li>
</ul>

<p>The command-prompt is denoted as <code>&gt;&gt;&gt;</code>.</p>

<p>You can enter Python statements, e.g.,</p>
<pre class="color-command">
&gt;&gt;&gt; <strong>print('hello, world')</strong>
hello, world
&gt;&gt;&gt; <strong>x = 123</strong>
&gt;&gt;&gt; <strong>x</strong>
123
&gt;&gt;&gt;</pre>

<p>To exit the command-line session, type <code>exit()</code>, or press Ctrl-D (Ubuntu) (End-of-File (EOF)), Ctrl-Z + Enter (Windows).</p>

<h5>First Python Script - <span class="font-code">hello.py</span></h5>
<p>Use a programming text editor to write the following Python script and save as &quot;<code>hello.py</code>&quot; in a directory of your choice:</p>

<table class="table-program">
<col class="col-line-number" />
<col class="col-program" />
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5</pre>
</td>
<td>
<pre>
print('Hello, world')         <span class="color-comment"># Print a string</span>
print(2 ** 88)                <span class="color-comment"># Print 2 raises to the power of 88</span>
                              <span class="color-comment"># Python's integer is unlimited in size!</span>
print(8.01234567890123456789) <span class="color-comment"># Print a float</span>
print((1+2j) * (3*4j))        <span class="color-comment"># Python supports complex numbers!</span></pre>
</td>
</tr>
</tbody>
</table>

<p>Program Notes:</p>
<ul>
<li>Statements beginning with a <code>#</code> until the end-of-line are comments.</li>
<li>The <code>print()</code> function can be used to print a value to the console.</li>
<li>Python's strings can be enclosed with single quotes <code>'...'</code> or double quotes <code>&quot;...&quot;</code> (Line 1).</li>
<li>Python's integer is unlimited in size (Line 2).</li>
<li>Python support floats (Line 4).</li>
<li>Python supports complex numbers (Line 5) and other high-level data types.</li>
<li>By convention, Python script (module) filenames are in all-lowercase.</li>
</ul>

<p>The expected outputs are:</p>
<pre class="output">
Hello, world
309485009821345068724781056
8.012345678901234
(-24+12j)</pre>

<h5>Running Python Scripts</h5>

<p>You can develop/run a Python script in many ways - explained in the following sections.</p>

<h5>Running Python Scripts via System Command Shell</h5>

<p>You can run a python script via the Python <em>Interpreter</em> under the System's Command Shell (e.g., Windows Command Shell, Linux/UNIX/Mac Terminal/Bash Shell). The Python Interpreter shall be included in the <code>PATH</code>.</p>

<ul>
<li>In Linux/Mac Terminal/Bash Shell:

<pre class="color-example">
$ <strong>cd &lt;dirname&gt;</strong>     <span class="color-comment"># Change directory to where you stored the script</span>
$ <strong>python hello.py</strong>  <span class="color-comment"># Run the script via the Python interpreter</span></pre>
See below for writing executable Python script in Unix.</li>

<li>In Windows Command Prompt: Start a CMD by entering &quot;<code>cmd</code>&quot; in the start menu.
<pre class="color-example">
&gt; <strong>cd &lt;dirname&gt;</strong>     <span class="color-comment"># Change directory to where you stored the script</span>
 
&gt; <strong>python hello.py</strong>  <span class="color-comment"># Run the script via the Python Interpreter</span>
&gt; <strong>hello.py</strong>         <span class="color-comment"># if &quot;.py&quot; file is associated with Python Interpreter</span></pre>
</li>
</ul>

<h5>Unix Executable Shell Script</h5>

<p>In Linux/UNIX, you can turn a Python script into an executable program (called Shell Script or Executable Script) by:</p>

<ol>
<li>Start with a line beginning with <code>#!</code> (called &quot;hash-bang&quot; or &quot;she-bang&quot;), followed by the full-path name to the Python Interpreter, e.g.,
  <pre class="color-syntax">
<strong>#!/usr/bin/python</strong>
print('Hello, world')
print(2 ** 88)
print(8.01234567890123456789)
print((1+2j) * (3*4j))</pre>

To locate the Python Interpreter, use command &quot;<code>which python</code>&quot; or &quot;<code>which python3</code>&quot;.
</li>

<li>Make the file executable via <code>chmod</code> (change file mode) command:
<pre class="color-syntax">
$ <strong>cd /path/to/project-directory</strong>
$ <strong>chmod u+x hello.py</strong>  <span class="color-comment"># enable executable for user-owner</span>
$ <strong>ls -l hello.py</strong>      <span class="color-comment"># list to check the executable flag</span>
-rwxrw-r-- 1 uuuu gggg 314 Nov  4 13:21 hello.py</pre></li>

<li>You can then run the Python script just like any executable program. The system will look for the Python Interpreter from the she-bang line.
<pre class="color-syntax">
$ <strong>cd /path/to/project-directory</strong>
$ <strong>./hello.py</strong></pre></li>
</ol>

<p>The drawback is that you have to hard code the path to the Python Interpreter, which may prevent the program from being portable across different machines.</p>

<p>Alternatively, you can use</p>

<pre class="color-syntax">
#!/usr/bin/env python
......</pre>

<p>The <code>env</code> utility will locate the Python Interpreter (from the <code>PATH</code> entries).</p>

<h5>Running Python Scripts inside Python Command-Line Shell</h5>

<p>To run a script inside Python's command-line shell:</p>

<pre class="color-example">
$ <strong>python</strong>
......
&gt;&gt;&gt; <strong>exec(open('/path/to/hello.py').read())</strong></pre>

<ul>
<li>You can use either absolute or relative path for the filename. But, <code>'~'</code> (for home directory) does not work?!</li>
<li>The <code>open()</code> function open the file, in default read-only mode.</li>
<li>The <code>read()</code> function reads the entire file.</li>
</ul>

<h5>Environment Variables <span class="font-code">PATH</span> and <span class="font-code">PYTHONPATH</span>, and <span class="font-code">sys.path</span></h5>

<p>The environment variable <code>PATH</code> shall include the path to Python Interpreter &quot;<code>python</code>&quot;.</p>

<p>Python system variable <code>sys.path</code> is a list of directories for searching Python modules. It is initialized from the environment variable <code>PYTHONPATH</code>, plus an installation-dependent default. The <code>PYTHONPATH</code>, by default, is empty.</p>

<p>To show the <code>sys.path</code> for the Python Interpreter:</p>

<pre class="color-command">
$ <strong>python</strong>
Python 2.7.6 (default, Jun 22 2015, 17:58:13) 
......
&gt;&gt;&gt; <strong>import sys</strong>
&gt;&gt;&gt; <strong>sys.path</strong>
['', '/usr/lib/python2.7', '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages', ......]</pre>

<pre class="color-command">
$ <strong>python3</strong>
Python 3.4.3 (default, Oct 14 2015, 20:28:29) 
......
&gt;&gt;&gt; <strong>import sys</strong>
&gt;&gt;&gt; <strong>sys.path</strong>
['', '/usr/lib/python3.4', '/usr/local/lib/python3.4/dist-packages',
 '/usr/lib/python3/dist-packages', ......]</pre>

<h3 id="PythonIDE">Python IDEs and Debuggers</h3>
<p>Picking a IDE with a powerful debugger is CRITICAL in program development!!!</p>

<h4 id="PythonIDLE">IDLE</h4>

<p>Python IDLE (Interactive DeveLopment Environment) is a simple IDE with features such as syntax highlighting, automatic code indentation and debugger. I strongly recommend it for <em>learning</em> Python.</p>

<h5>Installing/Launching IDLE</h5>
<ul>
<li>For Ubuntu: To install Python IDLE for Python 2 and Python 3, respectively:
<pre class="color-command">
$ <strong>sudo apt-get install idle</strong>
$ <strong>sudo apt-get install idle3</strong>

<span class="color-comment"># Check/Verify the installation</span>
$ <strong>which idle</strong>
/usr/bin/idle
$ <strong>which idle3</strong>
/usr/bin/idle3
$ <strong>ll /usr/bin/idle*</strong>
-rwxr-xr-x 1 root root 91 Dec 21  2013 /usr/bin/idle*
-rwxr-xr-x 1 root root 92 Mar 23  2014 /usr/bin/idle3*
-rwxr-xr-x 1 root root 94 Jun 23 02:56 /usr/bin/idle-python2.7*
-rwxr-xr-x 1 root root 94 Oct 15 05:50 /usr/bin/idle-python3.4*
$ <strong>dpkg --status idle</strong>
Version: 2.7.5-5ubuntu3
......
$ <strong>dpkg --status idle3</strong>
Version: 3.4.0-0ubuntu2
......</pre>

To launch Python IDLE:
<pre class="color-command">
$ <strong>idle</strong>
$ <strong>idle3</strong></pre>
</li>

<li>For Windows: IDLE is bundled in the installation. Click the START button &rArr; Python &rArr; IDLE (Python GUI). To exit, choose &quot;File&quot; menu &rArr; Exit. IDLE is written in Python and is kept under &quot;<code>Lib\idlelib</code>&quot;. You can also use &quot;<code>idle.bat</code>&quot;, &quot;<code>idle.py</code>&quot;, &quot;<code>idle.pyw</code>&quot; to start the IDLE.</li>

<li>For Mac OS X: [TODO]</li>
</ul>

<h5>Using IDLE</h5>

<p>In Python IDLE, you can enter Python statements interactively, similar to interactive Python command-line shell. E.g.,</p>

<pre class="color-syntax">
Python 3.3.2 (v3.3.2:d047928ae3f6, May 16 2013, 00:03:43) [MSC v.1600 32 bit (Intel)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; <strong>print('Hello, world')</strong>
Hello, world
&gt;&gt;&gt; <strong>print(2 ** 88)</strong>
309485009821345068724781056
&gt;&gt;&gt; <strong>print(8.01234567890123456789)</strong>
8.012345678901234
&gt;&gt;&gt; <strong>print((1+2j) * (3*4j))</strong>
(-24+12j)
&gt;&gt;&gt;</pre>

<h5>Writing Python Script in IDLE</h5>
<p>To write a Python script under IDLE, choose &quot;File&quot; menu &rArr; &quot;New File&quot;. Enter the above script and save as &quot;<code>hello.py</code>&quot; in a directory of your choice (the Python script must be saved with the &quot;<code>.py</code>&quot; extension). To run the script, choose &quot;Run&quot; Menu &rArr; &quot;Run Module&quot;. You shall see the outputs on the IDLE console.</p>

<ul>
<li>You can use Alt-P/Alt-N to retrieve the previous/next command in the command history.</li>
<li>You can read the Python Manual via the &quot;Help&quot; menu.</li>
</ul>

<h5>Debugging Python Script in IDLE</h5>

<p>In the main window of IDLE console, choose &quot;Debug&quot; &rArr; &quot;Debugger&quot; to pop out the &quot;Debug Control&quot;. In the text edit window, choose &quot;Run&quot; &rArr; &quot;Run Module&quot; to start debugging the script. You can then step over (Over), step into (Step), step out (Out) through the script from the &quot;Debug Control&quot;. You can also set breakpoint by right clicking on the editor window.</p>

<h4 id="EclipsePyDev">Eclipse PyDev</h4>

<p>There are several Eclipse plug-ins for Python - notably PyDev @ <a href="http://www.pydev.org/">http://www.pydev.org/</a>.</p>

<h5>Installing PyDev</h5>
<p>To install PyDev plug-in for Eclipse: Launch Eclipse &rArr; Help &rArr; Install New Software &rArr; In &quot;Work With&quot;, enter &quot;http://pydev.org/updates&quot; &rArr; Add &rArr; Select &quot;PyDev&quot;.</p> 

<p>Caution: When you are prompted for PyDev certificate, you MUST manually select (check) the certificate, before pressing OK. Otherwise, the installation aborts without any warning.</p>

<h5>Configuring PyDev</h5>
<p>After the installation, you need to configure Python Interpreter: Launch Eclipse &rArr; Window &rArr; Preference &rArr; PyDev &rArr; Expand &quot;Interpreters&quot; node &rArr; Python Interpreter &rArr; New to configure your Python Interpreter. For examples, in Ubuntu, <code>/usr/bin/python</code> for Python 2.7 or <code>/usr/bin/python3</code> for Python 3.4; in Windows, <code>python.exe</code>.</p>

<h5>Writing Python Script using PyDev</h5>
<p>To start a new Python project: Launch Eclipse &rArr; File &rArr; New &rArr; Project &rArr; PyDev &rArr; PyDev Project &rArr; Enter &quot;Project name&quot;, e.g., &quot;HelloPython&quot; &rArr; Choose the &quot;Interpreter&quot; and &quot;Grammar Version&quot; &rArr; &quot;Finish&quot;.</p>

<p>To write a Python script: right-click on the project &rArr; new &rArr; PyDev module &rArr; In &quot;Name&quot;, enter &quot;hello.py&quot; &rArr; Enter the following script:</p>

<pre class="color-example">
<span class="color-comment">&quot;&quot;&quot;First Python module to say Hello&quot;&quot;&quot;</span>
def sayHello(name):
    return "Hello, " + name

print(sayHello('Peter'))</pre>

<h5>Running Python Script</h5>

<p>To run the script, right-click on the script &rArr; Run As &rArr; Python Run.</p>

<h5>Debugging Using PyDev</h5>
<p>To debug a script, set a breakpoint by double-clicking on the left-margin of the the desired line &rArr; right-click on the script &rArr; Debug as &rArr; Python run.</p>

<p>You can then trace the execution via &quot;Step Over (current statement) (F5)&quot;, &quot;Step Into (function) (F6)&quot;, &quot;Step Out (function) (F7)&quot;, &quot;Resume (to next breakpoint) (F8)&quot;, &quot;Terminate&quot;, and etc.</p>

<h4>NetBeans</h4>
<p>[TODO]</p>

<h4 id="LightTable">LightTable</h4>
<p>Reference: Light Table - the next generation code editor @ <a href="http://lighttable.com/">http://lighttable.com/</a>.</p>
<br />
<p>LightTable is called the <em>next generation source code editor</em>, with many interesting features not available this this-generation editor.</p>

<h5>Installing LightTable</h5>
<p>For Ubuntu:</p>
<ol>
<li>Download the tarball, e.g., <code>lighttable-0.8.0-alpha-linux.tar.gz</code>.</li>
<li>Un-tar into a directory of your choice, e.g., <code>/usr/local</code>:
<pre class="color-command">
$ <strong>cd &lt;target-directory&gt;</strong>
$ <strong>tar xzvf /path/to/lighttable-0.8.0-alpha-linux.tar.gz</strong></pre>
</li>
</ol>

<h5>Using LightTable for Python Program Development</h5>

<p>To write a simple Python script:</p>
<ol>
<li>File &rArr; New &rArr; Enter the script &rArr; Save as <code>module_name.py</code>.</li>
<li>Show the console-pane by selecting View &rArr; Console</li>
<li>To run the script, place the cursor anywhere in the script, and press Ctrl-Shift-Enter.</li>
<li>To evaluate a line, place the cursor on the line and press Ctrl-Enter.</li>
<li>To evaluate selected lines, select the lines and press Ctrl-Enter.</li>
</ol>

<p>To use a workspace, which is a collection of files and folders:</p>
<ol>
<li>View &rArr; Workspace &rArr; Right-click to add file and add folder into the workspace.</li>
</ol>

<p>You can activate the command-pane by pressing Ctrl-Space (or View &rArr; Commands).</p>

<p>Debugging????</p>

<h3>Python Basics</h3>

<h4>Basic Syntax Rules</h4>

<h5>End-of-Line Comments</h5>
<p>A comment begins with a hash sign (<code>#</code>) and last till the end of the current line. Comments are ignored by the Python Interpreter, but are critical in provide explanation and documentation for others (and yourself) to read your program. Use comments liberally.</p>

<p>There is NO multi-line comment in Python?!</p>

<h5>Statements</h5>

<p>A Python statement is delimited by a newline. A statement cannot cross line boundaries, except:</p>

<ol>
<li>Expression in parentheses <code>()</code>, square bracket <code>[]</code>, and curly braces <code>{}</code> can span multiple lines.</li>

<li>A backslash (<code>\</code>) at the end of the line denotes continuation to the next line. This is an old rule and is NOT recommended as it is error-prone.</li>
</ol>

<p>Unlike C/C++/Java, you don't place a semicolon (<code>;</code>) at the end of a statement. But you can place multiple statements on a single line, separated by semicolon (<code>;</code>). For example,</p>

<pre class="color-example">
<span class="color-comment"># Each statement usually in one line, terminated with newline</span>
&gt;&gt;&gt; <strong>x = 1</strong>      <span class="color-comment"># Set variable x to 1. No semicolon at the end of statement</span>
&gt;&gt;&gt; <strong>print(x)</strong>
1
&gt;&gt;&gt; <strong>print(x); print(x+1); print(x+2)</strong>  <span class="color-comment"># Multiple statements in one line separated by semicolon</span>
1
2
3
&gt;&gt;&gt; <strong>x = [1,</strong>     <span class="color-comment"># expression in brackets can span multiple lines too</span>
         <strong>22,
         333]</strong></pre>

<h5>Block and Indentation</h5>

<p>A block is a group of statements executing as a unit. Unlike C/C++/Java, which use braces <code>{}</code> to group statements in a body block, Python uses indentation for body block. In other words, indentation is syntactically significant in Python - the body block must be properly indented. This is a good syntax to force you to indent the blocks correctly for ease of understanding!!!</p>

<h5>Compound Statements</h5>

<p>A compound statement, such as <code>def</code> (function definition) and <code>while</code> loop, begins with a header line terminated with a colon (<code>:</code>); followed by the indented body block. Python does not specify how much indentation to use, but all statements of the SAME body block must start at the SAME distance from the right margin. You can use either space or tab for indentation but you cannot mix them in the same body block. It is recommended to use 4 spaces for each indentation level. For example,</p>

<pre class="color-example">
def main():
    <span class="color-comment">&quot;&quot;&quot;Main function&quot;&quot;&quot;</span>
    print(sum_1_to_n(100))
   
def sum_1_to_n(n):
    <span class="color-comment">&quot;&quot;&quot;Sum from 1 to the given n&quot;&quot;&quot;</span>
    sum = 0;
    i = 0;
    while (i &lt;= n):
        sum += i
        i += 1
    return sum      
      
main()</pre>

<p>Program Notes:</p>

<ul>
<li>Use IDLE to create the above script called &quot;<code>SumNumber.py</code>&quot; (File &rArr; New File). Run the script (Run &rArr; Run Module).</li>
<li>We defines two functions: <code>main()</code> and <code>sum_1_to_n()</code>.</li>
<li>The first line of the function definition provides a documentation string (or <em>doc-string</em>), which is usually delimited by triple double quotes to allow multi-line description.</li>
<li>The trailing colon (<code>:</code>) signals the start of a body block. All statements belonging to the block shall be indented at the same distance from the right margin.</li>
</ul>

<p>The trailing colon (<code>:</code>) and body indentation is probably the most strange feature in Python, if you come from C/C++/Java. Python imposes strict indentation rules to force programmers to write readable codes!</p>

<h5>Naming Conventions</h5>

<p>These are the recommended naming conventions in Python:</p>

<ul>
<li>Variable names: use a noun in lowercase words (optionally joined with underscore <em>if it improves readability</em>), e.g., <code>num_students</code>.</li>
<li>Function names: use a verb in lowercase words (optionally joined with underscore <em>if it improves readability</em>), e.g., <code>getarea()</code> or <code>get_area()</code>.</li>

<li>Class names: use a noun in camel-case (initial-cap all words), e.g., <code>MyClass</code>, <code>IndexError</code>.</li>

<li>Constant names: use a noun in uppercase words joined with underscore, e.g., <code>PI</code>, <code>MAX_STUDENTS</code>.</li>
</ul>

<p>Read &quot;<a href="http://www.python.org/dev/peps/pep-0008/">PEP 8: Style Guide for Python Code</a>&quot; for a Python Enhancement Proposal on coding style.</p>

<h4>Console Input/Output: Functions <span class="font-code">input()</span> and <span class="font-code">print()</span></h4>

<p>You can use function <code>input()</code> to read input from the console (as a string) and <code>print()</code> to print output to the console. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = input('Enter a number: ')</strong>
Enter a number: 5
&gt;&gt;&gt; <strong>x</strong>
'5'
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'str'&gt;
&gt;&gt;&gt; <strong>print(x)</strong>
5
 
<span class="color-comment"># Test print()</span>
&gt;&gt;&gt; <strong>print('apple')</strong>
apple
&gt;&gt;&gt; <strong>print('apple', 'orange')</strong>  <span class="color-comment"># More items separated by commas</span>
apple orange
&gt;&gt;&gt; <strong>print('apple', 'orange', 'banana')</strong>
apple orange banana</pre>

<h5><span class="font-code">print()</span> without newline</h5>

<p>The <code>print()</code> function prints a newline at the end of the output by default. You can use the keyword argument <code>end</code> to specify another delimiter. For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>for i in range(5): 
       print(i)</strong>  <span class="color-comment"># default a newline at the end</span>
0
1
2
3
4
&gt;&gt;&gt; <strong>for i in range(5): 
       print(i, end=',')</strong>  <span class="color-comment"># print a comma at the end</span>
0,1,2,3,4,
&gt;&gt;&gt; <strong>for i in range(5): 
       print(i, end='--')</strong>
0--1--2--3--4-- 
&gt;&gt;&gt; <strong>for i in range(5): 
       print(i, end='')</strong>   <span class="color-comment"># nothing at the end</span>
01234</pre>


<h5><span class="font-code">print</span> in Python 2 vs Python 3</h5>

<p>Recall that Python 2 and Python 3 are not compatible in syntax. In Python 2, you can use &quot;<code>print item</code>&quot;, without the parentheses (because <code>print</code> is a keyword). In Python 3, parentheses are required as <code>print()</code> is a function. For example,</p>

<pre class="color-example">
<span class="color-comment"># Python 3</span>
&gt;&gt;&gt; <strong>print('hello')</strong>
hello
&gt;&gt;&gt; <strong>print 'hello'</strong>
  File &quot;&lt;stdin&gt;&quot;, line 1
    print 'hello'
                ^
SyntaxError: Missing parentheses in call to 'print'
&gt;&gt;&gt; <strong>print('aaa', 'bbb')</strong>
aaa bbb
   <span class="color-comment"># Treated as multiple arguments, printed without parentheses</span>

<span class="color-comment"># Python 2</span>
&gt;&gt;&gt; <strong>print('Hello')</strong>
Hello
&gt;&gt;&gt; <strong>print 'hello'</strong>
hello
&gt;&gt;&gt; <strong>print('aaa', 'bbb')</strong>
('aaa', 'bbb')
   <span class="color-comment"># Treated as tuple, print the tuple with parentheses</span>
&gt;&gt;&gt; <strong>print 'aaa', 'bbb'</strong>
aaa bbb
   <span class="color-comment"># multiple arguments</span></pre>
   
<p><strong>IMPORTANT</strong>: Always use <code>print()</code> function with parentheses, for portability!</p>

<h4>Source Code Encoding</h4>
<p>To specify the character encoding scheme of your source code, e.g., in UTF-8:</p>
<pre class="color-example">
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
......</pre>
<p>The default encoding is 7-bit ASCII.</p>

<p>I strongly encourage you to encode in UTF-8 for internationalization (i18n).</p>


<h3>Data Types and Dynamic Typing</h3>

<p>Python has a large number of built-in data  types, such as Numbers (Integer, Float, Boolean, Complex Number), String, List, Tuple, Set, Dictionary and File. More high-level data types, such as Decimal and Fraction, are supported by external modules.</p>

<h4>Number Types</h4>

<p>Python supports these built-in number types:</p>

<ol>
<li>Integers (<code>int</code> type): e.g., <code>123</code>, <code>-456</code>. Unlike C/C++/Java, integers are of unlimited size in Python. For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>123 + 456 - 789</strong>
-210
&gt;&gt;&gt; <strong>123456789012345678901234567890 + 1</strong>
123456789012345678901234567891
&gt;&gt;&gt; <strong>1234567890123456789012345678901234567890 + 1</strong>
1234567890123456789012345678901234567891
&gt;&gt;&gt; <strong>2 ** 888</strong>     <span class="color-comment"># Raise 2 to the power of 888</span>
......
&gt;&gt;&gt; <strong>len(str(2 ** 888))</strong>  <span class="color-comment"># convert integer to string and get its length</span>
268                     <span class="color-comment"># 2 to the power of 888 has 268 digits</span>
&gt;&gt;&gt; <strong>type(123)</strong>    <span class="color-comment"># Get the type</span>
&lt;class 'int'&gt;
&gt;&gt;&gt; <strong>help(int)</strong>    <span class="color-comment"># Show the help menu for integer</span></pre>

You can also express integers in hexadecimal with prefix <code>0x</code> (or <code>0X</code>); in octal with prefix <code>0o</code> (or <code>0O</code>); and in binary with prefix <code>0b</code> (or <code>0B</code>). For examples, <code>0x1abc</code>, <code>0X1ABC</code>, <code>0o1776</code>, <code>0b11000011</code>.</li>

<li>Floating-point numbers (<code>float</code> type): e.g., <code>1.0</code>, <code>-2.3</code>, <code>3e4</code>, <code>-3E-4</code>, with a decimal point and an optional exponent (in <code>e</code> or <code>E</code>). Floats are 64-bit double precision floating-point numbers. For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>1.23 * -4e5</strong>
-492000.0
&gt;&gt;&gt; <strong>type(1.2)</strong>        <span class="color-comment"># Get the type</span>
&lt;class 'float'&gt;
&gt;&gt;&gt; <strong>import math</strong>      <span class="color-comment"># Using the math module</span>
&gt;&gt;&gt; <strong>math.pi</strong>
3.141592653589793
&gt;&gt;&gt; <strong>import random</strong>    <span class="color-comment"># Using the random module</span>
&gt;&gt;&gt; <strong>random.random()</strong>  <span class="color-comment"># Generate a random number in [0, 1)</span>
0.890839384187198</pre>
</li>

<li>Booleans (<code>bool</code> type): <code>True</code> or <code>False</code> (take note of the spelling in initial-capitalized).
<pre class="color-example">
&gt;&gt;&gt; <strong>8 == 8</strong>      <span class="color-comment"># Compare</span>
True
&gt;&gt;&gt; <strong>8 == 9</strong>
False
&gt;&gt;&gt; <strong>type(True)</strong>  <span class="color-comment"># Get type</span>
&lt;class 'bool'&gt;</pre>
In Python, <code>0</code>, <code>None</code> and empty value (such as empty string <code>''</code>, <code>&quot;&quot;</code>, empty list <code>[]</code>, empty tuple <code>()</code>, empty dictionary <code>{}</code>) are treated as <code>False</code>; anything else are treated as <code>True</code>.<br />

Booleans can also act as integers in arithmetic operations with <code>1</code> for <code>True</code> and <code>0</code> for <code>False</code>. For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>True + 3</strong>
4
&gt;&gt;&gt; <strong>False + 1</strong>
1</pre>
</li>

<li>Complex Numbers (<code>complex</code> type): e.g., <code>1+2j</code>, <code>-3-4j</code>. Complex numbers have a real part and an imaginary part denoted with suffix of <code>j</code> (or <code>J</code>). For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>x = 1 + 2j</strong>  <span class="color-comment"># Set variable x to a complex number</span>
&gt;&gt;&gt; <strong>x</strong>           <span class="color-comment"># Display x</span>
(1+2j)
&gt;&gt;&gt; <strong>x.real</strong>      <span class="color-comment"># Get the real part</span>
1.0
&gt;&gt;&gt; <strong>x.imag</strong>      <span class="color-comment"># Get the imaginary part</span>
2.0
&gt;&gt;&gt; <strong>type(x)</strong>     <span class="color-comment"># Get type</span>
&lt;class 'complex'&gt;
&gt;&gt;&gt; <strong>x * (3 + 4j)</strong>  <span class="color-comment"># Multiply two complex numbers</span>
(-5+10j)</pre>
</li>

<li>Other number types are provided by  external modules, such as <code>decimal</code> module for decimal fixed-point numbers, <code>fraction</code> module for rational numbers.
<pre class="color-example">
<span class="color-comment"># floats are imprecise</span>
&gt;&gt;&gt; <strong>0.1 * 3</strong>
0.30000000000000004

<span class="color-comment"># Decimal are precise</span>
&gt;&gt;&gt; <strong>import decimal</strong>
&gt;&gt;&gt; <strong>x = decimal.Decimal('0.1')</strong>  <span class="color-comment"># Construct a Decimal object</span>
&gt;&gt;&gt; <strong>x * 3</strong>    <span class="color-comment"># Multiply  with overloaded * operator</span>
Decimal('0.3')
&gt;&gt;&gt; <strong>type(x)</strong>  <span class="color-comment"># Get type</span>
&lt;class 'decimal.Decimal'&gt;</pre>
</li>
</ol>

<h4>The <span class="font-code">None</span> Value</h4>

<p>Python provides a special value called <code>None</code> (take note of the spelling in initial-capitalized), which can be used to initialize object (to be discussed in OOP later). For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = None</strong>
&gt;&gt;&gt; <strong>type(x)</strong>   <span class="color-comment"># Get type</span>
&lt;class 'NoneType'&gt;
</pre>

<h4>Dynamic Typing and Assignment Operator</h4>

<p>Like most of the scripting languages (such as Perl and JavaScript) and unlike C/C++/Java, Python is <em>dynamic typed</em>. It associates types with objects, instead of variables. That is, a variable does not have a fixed type and can be assigned an object of any type. A variable simply provides a <em>reference</em> to an object.</p>
<p>You do not need to declare a variable. A variable is created automatically when a value is first assigned, which link the variable to the object. You can use built-in function <code>type(<em>var_name</em>)</code> to get the object type referenced by a variable.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = 1</strong>         <span class="color-comment"># Assign an int value to variable x</span>
&gt;&gt;&gt; <strong>x</strong>             <span class="color-comment"># Display x</span>
1
&gt;&gt;&gt; <strong>type(x)</strong>       <span class="color-comment"># Get the type of x</span>
&lt;class 'int'&gt;
&gt;&gt;&gt; <strong>x = 1.0</strong>       <span class="color-comment"># Re-assign x to a float</span>
&gt;&gt;&gt; <strong>x</strong>
1.0
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'float'&gt;
&gt;&gt;&gt; <strong>x = 'hello'</strong>   <span class="color-comment"># Re-assign x to a string</span>
&gt;&gt;&gt; <strong>x</strong>
'hello'
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'str'&gt;
&gt;&gt;&gt; <strong>x = '123'</strong>     <span class="color-comment"># Re-assign x to a string (of digits)</span>
&gt;&gt;&gt; <strong>x</strong>
'123'
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'str'&gt;</pre>

<p>You can perform type conversion via built-in functions <code>int()</code>, <code>float</code>, <code>str()</code>, <code>bool()</code>. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = '123'</strong>

&gt;&gt;&gt; <strong>x = int(x)</strong>    <span class="color-comment"># Parse str to int, and assign to x</span>
&gt;&gt;&gt; <strong>x</strong>
123
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'int'&gt;
&gt;&gt;&gt; <strong>x = float(x)</strong>  <span class="color-comment"># Convert x from int to float</span>
&gt;&gt;&gt; <strong>x</strong>
123.0
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'float'&gt;
&gt;&gt;&gt; <strong>len(str(x))</strong>   <span class="color-comment"># Convert x to str and get its length</span>
5
&gt;&gt;&gt; <strong>x = bool(x)</strong>   <span class="color-comment"># Convert x from float to boolean</span>
&gt;&gt;&gt; <strong>x</strong>             <span class="color-comment"># Non-zero is converted to True; 0 to False</span>
True
&gt;&gt;&gt; <strong>type(x)</strong>
&lt;class 'bool'&gt;</pre>

<p>In summary, a variable does not associate with a type. Instead, a type is associated with an object. A variable provides a reference to an object (of a certain type).</p>

<h5>The Assignment Operator (<span class="font-code">=</span>)</h5>

<p>In Python, you do not need to declare variables before they are used. The initial assignment  creates a variable and assign the value. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = 8</strong>        <span class="color-comment"># Create a variable x by assigning a value to it</span>
&gt;&gt;&gt; <strong>x = 'Hello'</strong>  <span class="color-comment"># Re-assign a value (of different type) to x</span>

&gt;&gt;&gt; <strong>y</strong>            <span class="color-comment"># Cannot access undefined variable</span>
......
<span class="color-error">NameError: name 'y' is not defined</span></pre>

<h5><span class="font-code">del</span></h5>
<p>You can use <code>del</code> statement to delete a variable. For example,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>x = 8</strong>
&gt;&gt;&gt; <strong>x</strong>
8
&gt;&gt;&gt; <strong>del x</strong>     <span class="color-comment"># Delete variable x</span>
&gt;&gt;&gt; <strong>x</strong>
......
<span class="color-error">NameError: name 'x' is not defined</span></pre>

<h5>Pair-wise Assignment of Variables and Values</h5>
<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>a = 1</strong>  <span class="color-comment"># Ordinary assignment</span>
&gt;&gt;&gt; <strong>a</strong>
1
&gt;&gt;&gt; <strong>b, c, d = 123, 4.5, 'Hello'</strong>  <span class="color-comment"># Pair-wise assignment of 3 variables and values</span>
&gt;&gt;&gt; <strong>b</strong>
123
&gt;&gt;&gt; <strong>c</strong>
4.5
&gt;&gt;&gt; <strong>d</strong>
'Hello'
&gt;&gt;&gt; <strong>e = f = g = 123</strong>  <span class="color-comment"># Chaining assignment</span>
&gt;&gt;&gt; <strong>e</strong>
123
&gt;&gt;&gt; <strong>f</strong>
123
&gt;&gt;&gt; <strong>g</strong>
123</pre>

<p>Assignment operator is right-associative, i.e., <code>a = b = 123</code> is interpreted as <code>(a = (b = 123))</code>.</p>

<h4>Number Operations</h4>

<h5>Arithmetic Operators</h5>

<p>Python supports these arithmetic operators:</p>

<table class="table-zebra" style="width:60%">
  <thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
    <th>Example</th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>+</td>
    <td class="font-normal">Addition</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>-</td>
    <td class="font-normal">Subtraction</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="tr-alt">
    <td>*</td>
    <td class="font-normal">Multiplication</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>/</td>
    <td class="font-normal">Float Division<br />
      (Produce a float)</td>
    <td>1 / 2 &rArr; 0.5</td>
  </tr>
  <tr class="tr-alt">
    <td>//</td>
    <td class="font-normal">Integer Division<br />
    (Produce a truncated integer)</td>
    <td>1 // 2 &rArr; 0</td>
  </tr>
  <tr>
    <td>**</td>
    <td class="font-normal">Exponentiation</td>
    <td>2 ** 5 &rArr; 32</td>
  </tr>
  <tr class="tr-alt">
    <td>%</td>
    <td class="font-normal">Modulus (Remainder)</td>
    <td>9 % 2 &rArr; 1<br />
      -9 % 2 &rArr; 1<br />
      9 % -2 &rArr; -1<br />
      -9 % -2 &rArr; -1<br />
      9.9 % 2.1 &rArr; 1.5<br />
      -9.9 % 2.1 &rArr; 0.6000000000000001</td>
  </tr>
  </tbody>
</table>

<p>Notes:</p>

<ul>
<li>Python does not support increment (<code>++</code>) and decrement (<code>--</code>) operators (as in C/C++/Java). You need to use <code>i = i + 1</code> or <code>i += 1</code> for increment.</li>

<li>Each of the operators has a corresponding <em>shorthand assignment</em> counterpart, i.e., <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>//=</code>, <code>**=</code> and  <code>%=</code>. For example <code>i += 1</code> is the same as <code>i = i + 1</code>.</li>

<li>For mixed-type operations, e.g., 1 + 2.3 (int + float), the value of the smaller type is first promoted to the bigger type. It then performs the operation in the bigger type and returns the result in the bigger type. In Python, <code>int</code> is smaller than <code>float</code>, which is smaller than <code>complex</code>.</li>
</ul>

<h5>Bitwise Operators</h5>

<p>Python supports these bitwise operators:</p>

<table class="table-zebra" style="width:60%">
  <thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
    <th>Example<br /><code>x=0b10000001</code><br /><code>y=0b10001111</code></th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>&amp;</td>
    <td class="font-normal">bitwise AND</td>
    <td>x &amp; y &rArr; 0b10000001</td>
  </tr>
  <tr>
    <td>|</td>
    <td class="font-normal">bitwise OR</td>
    <td>x | y &rArr; 0b10001111</td>
  </tr>
  <tr class="tr-alt">
    <td>~</td>
    <td class="font-normal">bitwise NOT (or negate)</td>
    <td>~x &rArr; -0b10000010</td>
  </tr>
  <tr>
    <td>^</td>
    <td class="font-normal">bitwise XOR</td>
    <td>x ^ y &rArr; 0b00001110</td>
  </tr>
  <tr class="tr-alt">
    <td>&lt;&lt;</td>
    <td class="font-normal">bitwise Left-Shift (padded with zeros)</td>
    <td>x &lt;&lt; 2 &rArr; 0b1000000100</td>
  </tr>
  <tr>
    <td>&gt;&gt;</td>
    <td class="font-normal">bitwise Right-Shift (padded with zeros)</td>
    <td>x &gt;&gt; 2 &rArr; 0b100000</td>
  </tr>
  </tbody>
</table>

<h5>Built-in  Functions</h5>

<p>Python provides many built-in functions for numbers, such as:</p>

<ul>
<li>Mathematical functions: <code>round()</code>, <code>pow()</code>, <code>abs()</code>.</li>

<li>Type conversion functions: <code>int()</code>, <code>float()</code>, <code>str()</code>, <code>bool()</code>; and <code>type()</code> to get the type.</li>

<li>Base radix conversion functions: <code>hex()</code>, <code>bin()</code>, <code>oct()</code>.</li>
</ul>

<pre class="color-example">
<span class="color-comment"># Test built-in function round()</span>
&gt;&gt;&gt; <strong>x = 1.23456</strong>
&gt;&gt;&gt; <strong>round(x)</strong>     <span class="color-comment"># Round to the nearest integer</span>
1
&gt;&gt;&gt; <strong>round(x, 1)</strong>  <span class="color-comment"># Round to 1 decimal place</span>
1.2
&gt;&gt;&gt; <strong>round(x, 2)</strong>  <span class="color-comment"># Round to 2 decimal places</span>
1.23
&gt;&gt;&gt; <strong>round(x, 8)</strong>  <span class="color-comment"># No change - not for formatting</span>
1.23456

<span class="color-comment"># Test other built-in functions</span>
&gt;&gt;&gt; <strong>pow(2, 5)</strong>
32
&gt;&gt;&gt; <strong>abs(-4.1)</strong>
4.1
  
<span class="color-comment"># Base radix conversion</span>
&gt;&gt;&gt; <strong>hex(1234)</strong>
'0x4d2'
&gt;&gt;&gt; <strong>bin(254)</strong>
'0b11111110'
&gt;&gt;&gt; <strong>oct(1234)</strong>
'0o2322'
&gt;&gt;&gt; <strong>0xABCD</strong>  <span class="color-comment"># Default in decimal</span>
43981

<span class="color-comment"># List built-in functions</span>
&gt;&gt;&gt; <strong>dir(__builtins__)</strong>
......</pre>

<h5>Relational Operators</h5>

<p>Python supports these relational (comparison) operators that return a boolean <code>True</code> or <code>False</code>.</p>

<table class="table-zebra" style="width:60%">
  <thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
    <th>Example</th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>&lt;, &lt;=, &gt;, &gt;=, ==, !=</td>
    <td class="font-normal">Comparison</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>in, not in</td>
    <td class="font-normal"><code>x in y</code> check if <code>x</code> is contained in the sequence <code>y</code></td>
    <td>&nbsp;</td>
  </tr>
  <tr class="tr-alt">
    <td>is, is not</td>
    <td class="font-normal"><code>x is y</code> compares the references (addresses) of <code>x</code> and <code>y</code></td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
</table>

<p>Example: [TODO]</p>

<h5>Logical Operators</h5>

<p>Python supports these logical (boolean) operators, that operate on boolean numbers.</p>

<table class="table-zebra" style="width:60%">
  <thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
    <th>Example</th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>and</td>
    <td class="font-normal">Logical AND</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>or</td>
    <td class="font-normal">Logical OR</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="tr-alt">
    <td>not</td>
    <td class="font-normal">Logical NOT</td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
</table>

<p>Notes:</p>

<ul>
<li>Python's logical operators are typed out in word, unlike C/C++/Java which uses symbols <code>&amp;&amp;</code>, <code>||</code> and <code>!</code>.</li>
<li>There is no exclusive-or (<code>xor</code>) (?)</li>
</ul>

<p>Example: [TODO]</p>


<h4>String</h4>

<p>Strings can be delimited by a pair of single quotes (<code>'...'</code>), double quotes (<code>&quot;...&quot;</code>), triple single quotes (<code>'''...'''</code>), or triple double quotes (<code>&quot;&quot;&quot;...&quot;&quot;&quot;</code>). In Python, single-quoted string is the same as double-quoted string.</p>
<p>To place a single quote (<code>'</code>) inside a single-quoted string, you need to use escape sequence <code>\'</code>. Similarly, to place a double quote (<code>&quot;</code>) inside a double-quoted string, use <code>\&quot;</code>. There is no need for escape sequence to place a single quote inside a double-quoted string; or double quote inside a single-quoted string.</p>

<p>A triple-single/double-quoted string can <em>span multiple lines</em>. There is no need for escape sequence to place a single/double quote in a triple single/double quoted string. Triple-quoted strings are useful for multi-line documentation, HTML and other codes.</p>
<p>Python 3 uses Unicode character set.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>s1 = 'apple'</strong>
&gt;&gt;&gt; <strong>s1</strong>
'apple'
&gt;&gt;&gt; <strong>s2 = "orange"</strong>
&gt;&gt;&gt; <strong>s2</strong>
'orange'
&gt;&gt;&gt; <strong>s3 = "'orange'"</strong>   <span class="color-comment"># Does not require escape sequence</span>
&gt;&gt;&gt; <strong>s3</strong>
"'orange'"
&gt;&gt;&gt; <strong>s3 ="\"orange\""</strong>  <span class="color-comment"># Need escape sequence</span>
&gt;&gt;&gt; <strong>s3</strong>
'"orange"'            <span class="color-comment"># Single quote and double quote are equivalent</span>
<span class="color-comment"> 
# A triple single/double quoted string can span multiple lines</span>
&gt;&gt;&gt; <strong>s4 = &quot;&quot;&quot;testing
testing&quot;&quot;&quot;</strong>
&gt;&gt;&gt; <strong>s4</strong>
'testing\ntesting'</pre>

<h5>Escape Sequences</h5>
<p>Like C/C++/Java, you need to use escape sequences (a back-slash + a code):</p>
<ul>
<li>for special non-printable characters, such as tab (<code>\t</code>), newline (<code>\n</code>), carriage return (<code>\r</code>); and</li>
<li>to resolve ambiguity, such as <code>\&quot;</code> (for <code>&quot;</code>), <code>\'</code> (for <code>'</code>), <code>\\</code> (for <code><code>\</code></code>).</li>
</ul>


<h5>Raw Strings</h5>
<p>You can prefix a string by <code>r</code> to disable the interpretation of escape sequences, i.e., the back-slashes. For example, <code>r'\w{6,10}'</code> is the same as <code>'\\w{6,10}'</code>. Raw string are used in Regex (to be discussed later) extensively.</p>

<h5>Strings are Immutable</h5>

<p>Strings are <em>immutable</em>, i.e., their contents cannot be modified. String functions such as <code>upper()</code>, <code>replace()</code> returns a new string object instead of modifying the existing object.</p>

<h5>Built-in Functions and Operators for Strings</h5>

<p>You can operate on strings using</p>
<ul>
<li>built-in functions such as <code>len()</code>;</li>
<li>operators such as <code>in</code> (contains), <code>+</code> (concatenation), <code>*</code> (repetition), indexing <code>[i]</code>, and slicing <code>[m:n:step]</code>.</li>
</ul>


<p>Note: These operations are applicable to all <code>sequence</code> data types including <code>string</code>, <code>list</code>, and <code>tuple</code>.</p>

<table class="table-zebra" style="width:80%">
  <thead>
  <tr>
    <th>Func/Oper</th>
    <th>Description</th>
    <th>Examples<br />
      <span class="font-code">s = 'Hello'</span></th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>len()</td>
    <td class="font-normal">Length</td>
    <td>len(s) &rArr; 5</td>
  </tr>
  <tr>
    <td>in</td>
    <td class="font-normal">Contain?</td>
    <td>'ell' in s &rArr; True<br />
    'he' in s &rArr; False</td>
  </tr>
  <tr class="tr-alt">
    <td>+</td>
    <td class="font-normal">Concatenation</td>
    <td>s + '!' &rArr; 'Hello!'</td>
  </tr>
  <tr>
    <td>*</td>
    <td class="font-normal">Repetition</td>
    <td>s * 2 &rArr; 'HelloHello'</td>
  </tr>
  <tr class="tr-alt">
    <td>[i], [-i]</td>
    <td class="font-normal">Indexing to get a character.<br />The front index begins at <code>0</code>; back index begins at <code>-1</code> (or <code>len()-1</code>).</td>
    <td>s[1] &rArr; 'e'<br />
    s[-4] &rArr; 'e'</td>
  </tr>
  <tr>
    <td>[m:n], [m:], [:n], [m:n:step]</td>
    <td class="font-normal">Slicing to get a substring.<br />From index <code>m</code> (included) to <code>n</code> (excluded) with an optional <code>step</code> size.<br />The default <code>m</code> is <code>0</code>, <code>n</code> is <code>len()-1</code>, <code>step</code> is <code>1</code>.</td>
    <td>s[1:3] &rArr; 'el'<br />s[1:-2] &rArr; 'el'<br />s[3:] &rArr; 'lo'<br />s[:-2] &rArr; 'Hel'<br />s[:] &rArr; 'Hello'<br />s[0:5:2] &rArr; 'Hlo'</td>
  </tr>
  </tbody>
</table>

<p>For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>s = &quot;Hello, world&quot;</strong>   <span class="color-comment"># Assign a string literal to the variable s</span>
&gt;&gt;&gt; <strong>type(s)</strong>              <span class="color-comment"># Get data type of s</span>
&lt;class 'str'&gt;
&gt;&gt;&gt; <strong>len(s)</strong>       <span class="color-comment"># Length</span>
12
&gt;&gt;&gt; <strong>'ello' in s</strong>  <span class="color-comment"># The in operator</span>
True

<span class="color-comment"># Indexing</span>
&gt;&gt;&gt; <strong>s[0]</strong>       <span class="color-comment"># Get character at index 0; index begins at 0</span>
'H'
&gt;&gt;&gt; <strong>s[1]</strong>
'e'
&gt;&gt;&gt; <strong>s[-1]</strong>      <span class="color-comment"># Get Last character, same as s[len(s) - 1]</span>
'd'
&gt;&gt;&gt; <strong>s[-2]</strong>      <span class="color-comment"># 2nd last character</span>
'l'

<span class="color-comment"># Slicing</span>
&gt;&gt;&gt; <strong>s[1:3]</strong>     <span class="color-comment"># Substring from index 1 (included) to 3 (excluded)</span>
'el'
&gt;&gt;&gt; <strong>s[1:-1]</strong>
'ello, worl'
&gt;&gt;&gt; <strong>s[:4]</strong>      <span class="color-comment"># Same as s[0:4], from the beginning</span>
'Hell'
&gt;&gt;&gt; <strong>s[4:]</strong>      <span class="color-comment"># Same as s[4:-1], till the end</span>
'o, world'
&gt;&gt;&gt; <strong>s[:]</strong>       <span class="color-comment"># Entire string; same as s[0:len(s)]</span>
'Hello, world'

<span class="color-comment"># Concatenation (+) and Repetition (*)</span>
&gt;&gt;&gt; <strong>s = s + " again"</strong>  <span class="color-comment"># Concatenate two strings</span>
&gt;&gt;&gt; <strong>s</strong>
'Hello, world again'
&gt;&gt;&gt; <strong>s * 3</strong>             <span class="color-comment"># Repeat 3 times</span>
'Hello, world againHello, world againHello, world again'

<span class="color-comment"># String is immutable</span>
&gt;&gt;&gt; <span class="color-error"><strong>s[0] = 'a'</strong></span>
<span class="color-error">TypeError: 'str' object does not support item assignment</span></pre>

<h5>Character Type?</h5>
<p>Python does not have a dedicated character data type. A character is simply a string of length 1. You can use the indexing operator to extract individual character from a string, as shown in the above example; or process individual character using <code>for-in</code> loop (to be discussed later).</p>

<p>The built-in functions <code>ord()</code> and <code>chr</code> operates on character (string of length 1). For example,</p>

<pre class="color-example">
<span class="color-comment"># ord(c) returns the integer ordinal (Unicode) of a one-character string</span>
&gt;&gt;&gt; <strong>ord('A')</strong>
65
&gt;&gt;&gt; <strong>ord('')</strong>
27700

<span class="color-comment"># chr(i) returns a Unicode string of one character with ordinal i; 0 &lt;= i &lt;= 0x10ffff.</span>
&gt;&gt;&gt; <strong>chr(65)</strong>
'A'
&gt;&gt;&gt; <strong>chr(27700)</strong>
''</pre>

<h5>Unicode vs ASCII</h5>

<p>In Python 3, strings are defaulted to be Unicode. ASCII strings are represented as byte strings, prefixed with <code>b</code>, e.g., <code>b'ABC'</code>.</p>

<p>In Python 2, strings are defaulted to be ASCII strings (byte strings). Unicode strings are prefixed with <code>u</code>.</p>


<h5>String-Specific Member Functions</h5>

<p>The <code>str</code> class provides many member functions.  Since string is immutable, most of these functions return a new string. The commonly-used are (suppose that <code>s</code> is a <code>str</code> object):</p>

<ul>
<li><code>s.strip()</code>, <code>s.rstrip()</code>, <code>s.lstrip()</code>: the <code>strip()</code> strips the leading and trailing whitespaces. The <code>rstrip()</code> strips the right (trailing) whitespaces; while <code>lstrip()</code> strips the left (leading) whitespaces.</li>
<li><code>s.upper()</code>, <code>s.lower()</code>:</li>
<li><code>s.isupper()</code>, <code>s.islower()</code>:</li>
<li><code>s.find(s)</code>:</li>
<li><code>s.index(s)</code>:</li>
<li><code>s.startswith(s)</code>:</li>
<li><code>s.endswith(s)</code>:</li>
<li><code>s.split(delimiter)</code>:</li>
<li><code>s.join(lst)</code>:</li>
</ul>

<pre class="color-example">
&gt;&gt;&gt; <strong>dir(str)</strong>      <span class="color-comment"># List all attributes of the str class</span>
......

&gt;&gt;&gt; <strong>s = 'Hello, world'</strong>
&gt;&gt;&gt; <strong>type(s)</strong>
&lt;class 'str'&gt;
&gt;&gt;&gt; <strong>dir(s)</strong>         <span class="color-comment"># List all attributes for object s</span>
.......

&gt;&gt;&gt; <strong>help(s.find)</strong>   <span class="color-comment"># Show the help menu for member function find</span>
.......
&gt;&gt;&gt; <strong>s.find('ll')</strong>   <span class="color-comment"># Find the beginning index of the substring</span>
2
&gt;&gt;&gt; <strong>s.find('app')</strong>  <span class="color-comment"># find() returns -1 if no found</span>
-1

&gt;&gt;&gt; <strong>s.index('ll')</strong>  <span class="color-comment"># index() is the same as find(), but raise ValueError if no found</span>
2
&gt;&gt;&gt; <strong>s.index('app')</strong>
......
ValueError: substring not found

&gt;&gt;&gt; <strong>s.startswith('Hell')</strong>
True
&gt;&gt;&gt; <strong>s.endswith('world')</strong>
True
&gt;&gt;&gt; <strong>s.replace('ll', 'xxx')</strong>
'Hexxxo, world'
&gt;&gt;&gt; <strong>s.isupper()</strong>
False
&gt;&gt;&gt; <strong>s.upper()</strong>
'HELLO, WORLD'
&gt;&gt;&gt; <strong>s.split(', ')</strong>    <span class="color-comment"># Split into list with the given delimiter</span>
['Hello', 'world']

&gt;&gt;&gt; <strong>s = '  testing testing   '</strong>
&gt;&gt;&gt; <strong>s.strip()</strong>        <span class="color-comment"># Strip leading and trailing whitespaces</span>
'testing testing'
&gt;&gt;&gt; <strong>s.rstrip()</strong>       <span class="color-comment"># Strip trailing (right) whitespaces</span>
'  testing testing'
&gt;&gt;&gt; <strong>s.lstrip()</strong>       <span class="color-comment"># Strip leading (left) whitespaces</span>
'testing testing   '

&gt;&gt;&gt; <strong>''.join(['hello', ', ', 'world'])</strong>  <span class="color-comment"># Join all strings in the list</span>
'hello, world'
 
<span class="color-comment"># List all the whitespace characters - in module string, attribute whitespace</span>
&gt;&gt;&gt; <strong>import string</strong>
&gt;&gt;&gt; <strong>string.whitespace</strong>   <span class="color-comment"># All whitespace characters</span>
' \t\n\r\x0b\x0c'
&gt;&gt;&gt; <strong>string.digits</strong>       <span class="color-comment"># All digit characters</span>
'0123456789'
&gt;&gt;&gt; <strong>string.hexdigits</strong>    <span class="color-comment"># All hexadecimal digit characters</span>
'0123456789abcdefABCDEF'</pre>

<h5>String Formatting</h5>

<p>There are two ways for formatting strings:</p>
<ol>
<li>using the <code>%</code> operator, with C-like <code>printf()</code> format specifiers (old style), or</li>
<li>using the string class's <code>format()</code> member method (new style in Python 3).</li>
</ol>

<p>For examples,</p>

<pre class="color-example">
<span class="color-comment"># Using % operator and C-like printf() format specifiers</span>
&gt;&gt;&gt; <strong>'|%s|%s|more|' % ('Hello', 'world')</strong>
'|Hello|world|more|'

<span class="color-comment"># Using str.format() method</span>
&gt;&gt;&gt; <strong>'|{0}|{1}|more|'.format('Hello', 'world')</strong>   <span class="color-comment"># Using positional parameters {0},{1},...</span>
'|Hello|world|more|'
&gt;&gt;&gt; <strong>'|{greeting}|{name}|'.format(greeting='Hello', name='Peter')</strong>  <span class="color-comment"># Using keyword parameters</span>
'|Hello|Peter|'
&gt;&gt;&gt; <strong>'|{1:8}|{0:7}|'.format('Hello', 'Peter')</strong>  <span class="color-comment"># Setting field width</span>
'|Peter   |Hello  |'      <span class="color-comment"># Strings are default left-aligned</span>
&gt;&gt;&gt; <strong>'|{1:8}|{0:&gt;7}|{2:-&lt;10}|'.format('Hello', 'Peter', 'again')</strong>
'|Peter   |  Hello|again-----|'    <span class="color-comment"># &gt; (left align), &lt; (right align), -&lt; (fill char)</span>
&gt;&gt;&gt; <strong>'|{0:.3f}|{1:6.2f}|{2:4d}|'.format(1.2, 3.456, 78)</strong>  <span class="color-comment"># Formatting int and float</span>
'|1.200|  3.46|  78|'</pre>

<h5>Conversion between String and Number: <span class="font-code">int()</span>, <span class="font-code">float()</span> and <span class="font-code">str()</span></h5>
<p>You can use built-in function <code>int()</code>, <code>float()</code> to convert and parse a &quot;numeric&quot; string to integer and float; and <code>str()</code> to convert a number to string. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>s = '12345'</strong>
&gt;&gt;&gt; <strong>s</strong>
'12345'
&gt;&gt;&gt; <strong>int(s)</strong>    <span class="color-comment"># Convert to int</span>
12345
&gt;&gt;&gt; <strong>s = '55.66'</strong>
&gt;&gt;&gt; <strong>s</strong>
'55.66'
&gt;&gt;&gt; <strong>float(s)</strong>  <span class="color-comment"># Convert to float</span>
55.66
&gt;&gt;&gt; <strong>int(s)</strong>
......
ValueError: invalid literal for int() with base 10: '55.66'
&gt;&gt;&gt; <strong>i = 8888</strong>
&gt;&gt;&gt; <strong>str(i)</strong>    <span class="color-comment"># Convert to string</span>
'8888'</pre>

<h5>Concatenate a String and a Number?</h5>
<p>You CANNOT concatenate a string and a number (results in <code>TypeError</code>). Instead, you need to use the <code>str()</code> function to convert the number to string. For example,</p>

<pre class="color-command">
&gt;&gt;&gt; <strong>'Hello' + 123</strong>
<span class="color-error">TypeError: cannot concatenate 'str' and 'int' objects</span>
&gt;&gt;&gt; <strong>'Hello' + str(123)</strong>
'Hello123'</pre>

<h5>The <span class="font-code">isinstance()</span> Built-in Function</h5>

<p>You can use the built-in function <code>isinstance(instance, type)</code> to check if the <code>instance</code> belong to the <code>type</code>. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>isinstance(123, int)</strong>
True
&gt;&gt;&gt; <strong>isinstance('a', int)</strong>
False
&gt;&gt;&gt; <strong>isinstance('a', str)</strong>
True</pre>

<h4>List <span class="font-code">[v1, v2,...]</span></h4>

<p>Python has a powerful built-in list for <em>dynamic array</em>.</p>
<ul>
<li>A list is enclosed by square brackets <code>[]</code>.</li>
<li>A list can contain items of different types.</li>
<li>A list grows and shrinks in size automatically (dynamically). You do not have to specify its size during initialization.</li></ul>

<h5>Built-in Functions and Operators for Lists</h5>

<p>A list, like string, is a sequence. Hence, you can operate on lists using:</p>
<ul>
<li>built-in sequence functions such as <code>len()</code>, <code>max()</code>, <code>min()</code>, and <code>sum()</code></li>
<li>operators such as <code>in</code> (contains), <code>+</code> (concatenation) and <code>*</code> (repetition), <code>del</code>, indexing <code>[i]</code>, and slicing <code>[m,n,step]</code>.</li>
</ul>

<p>Notes:</p>
<ul>
<li>You can index the items from the front with positive index, or from the back with negative index. E.g., if <code>x</code> is a list, <code>x[0]</code>, <code>x[1]</code> refer to its first item, second item; <code>x[-1]</code>, <code>x[-2]</code> refer to the last, second-to-last.</li>

<li>You can also refer to a sub-list (or slice) using slice notation <code>x[m:n]</code> (from index <code>m</code> (included) to index <code>n</code> (excluded)), <code>x[m:]</code> (to last item), <code>x[:n]</code> (from first item), <code>x[:]</code> (all items), and <code>x[m,n,step]</code> (in step size).</li>
</ul>

<table class="table-zebra" style="width:80%">
  <thead>
  <tr>
    <th>Operator</th>
    <th>Description</th>
    <th>Examples<br />
      <span class="font-code">lst = [8, 9, 6, 2]</span></th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>in</td>
    <td class="font-normal">Contain?</td>
    <td>9 in lst &rArr; True<br />
      5 in lst &rArr; False</td>
  </tr>
  <tr>
    <td>+</td>
    <td class="font-normal">Concatenation</td>
    <td>lst + [5, 2]<br />&rArr; [8, 9, 6, 2, 5, 2]</td>
  </tr>
  <tr class="tr-alt">
    <td>*</td>
    <td class="font-normal">Repetition</td>
    <td>lst * 2<br />&rArr; [8, 9, 6, 2, 8, 9, 6, 2]</td>
  </tr>
  <tr>
    <td>[i], [-i]</td>
    <td class="font-normal">Indexing to get an item.<br />Front index begins at <code>0</code>; back index begins at <code>-1</code> (or <code>len-1</code>).</td>
    <td>lst[1] &rArr; 9<br />lst[-2] &rArr; 6<br />lst[1] = 99 &rArr; modify an existing item</td>
  </tr>
  <tr class="tr-alt">
    <td>[m:n], [m:], [:n], [m:n:step]</td>
    <td class="font-normal">Slicing to get a sublist.<br />From index <code>m</code> (included) to <code>n</code> (excluded) with an optional <code>step</code> size.<br />The default <code>m</code> is <code>0</code>, n is <code>len-1</code>.</td>
    <td>lst[1:3] &rArr; [9, 6]<br />lst[1:-2] &rArr; [9]<br />lst[3:] &rArr; [2]<br />lst[:-2] &rArr; [8, 9]<br />lst[:] &rArr; [8, 9, 6, 2]<br />lst[0:4:2] &rArr; [8, 6]<br />newlst = lst[:] &rArr; copy the list<br />lst[4:] = [1, 2] &rArr; modify a sub-list</td>
  </tr>
  <tr>
    <td>del</td>
    <td class="font-normal">Delete one or more items<br />
      (for mutable sequences only)</td>
    <td>del lst[1] &rArr; lst is [8, 6, 2]<br />del lst[1:] &rArr; lst is [8]<br />del lst[:] &rArr; lst is [] (clear all items)</td>
  </tr>
  </tbody>
</table>

<table class="table-zebra" style="width:80%">
  <thead>
  <tr>
    <th>Function</th>
    <th>Description</th>
    <th>Examples<br />
      <span class="font-code">lst = [8, 9, 6, 2]</span></th>
  </tr>
  </thead>
  <tbody class="font-code">
  <tr>
    <td>len()</td>
    <td class="font-normal">Length</td>
    <td>len(lst) &rArr; 4</td>
  </tr>
  <tr class="tr-alt">
    <td>max(), min()</td>
    <td class="font-normal">Maximum and minimum value</td>
    <td>max(lst) &rArr; 9<br />min(lst) &rArr; 2</td>
  </tr>
  <tr>
    <td>sum()</td>
    <td class="font-normal">Sum</td>
    <td>sum(lst) &rArr; 16</td>
  </tr>
  </tbody>
</table>


<p>List, unlike string, is mutable. You can insert, remove and modify its items.</p>

<p>For examples,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [123, 4.5, 'hello']</strong>  <span class="color-comment"># A list can contains items of different types</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, 'hello']
&gt;&gt;&gt; <strong>len(lst)</strong>   <span class="color-comment"># Length</span>
3
&gt;&gt;&gt; <strong>type(lst)</strong>
&lt;class 'list'&gt;
&gt;&gt;&gt; <strong>lst[0]</strong>     <span class="color-comment"># Indexing to get an item</span>
123
&gt;&gt;&gt; <strong>lst[2] = 'world'</strong>  <span class="color-comment"># Re-assign</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, 'world']
&gt;&gt;&gt; <strong>lst[0:2]</strong>   <span class="color-comment"># Slicing to get a sub-list</span>
[123, 4.5]
&gt;&gt;&gt; <strong>lst[:2]</strong>
[123, 4.5]
&gt;&gt;&gt; <strong>lst[1:]</strong>
[4.5, 'world']
&gt;&gt;&gt; <strong>123 in lst</strong>
True
&gt;&gt;&gt; <strong>1234 in lst</strong>
False
&gt;&gt;&gt; <strong>lst + [6, 7, 8]</strong>   <span class="color-comment"># Concatenation</span>
[123, 4.5, 'world', 6, 7, 8]
&gt;&gt;&gt; <strong>lst * 3</strong>           <span class="color-comment"># Repetition</span>
[123, 4.5, 'world', 123, 4.5, 'world', 123, 4.5, 'world']
&gt;&gt;&gt; <strong>del lst[1]</strong>        <span class="color-comment"># Removal</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'world']

<span class="color-comment"># Lists can be nested</span>
&gt;&gt;&gt; <strong>lst = [123, 4.5, ['a', 'b', 'c']]</strong>
&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, ['a', 'b', 'c']]
&gt;&gt;&gt; <strong>lst[2]</strong>
['a', 'b', 'c']</pre>

<h5>Appending Items to a list</h5>

<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [123, 'world']</strong>
&gt;&gt;&gt; <strong>lst[2]</strong>     <span class="color-comment"># Python performs index bound check</span>
<span class="color-error">IndexError: list index out of range</span>
&gt;&gt;&gt; <strong>lst[len(lst)] = 4.5</strong>  <span class="color-comment"># Cannot append using indexing</span>
<span class="color-error">IndexError: list assignment index out of range</span>
&gt;&gt;&gt; <strong>lst[len(lst):] = [4.5]</strong>  <span class="color-comment"># Need to append a list using slicing</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'world', 4.5]
&gt;&gt;&gt; <strong>lst[len(lst):] = [6, 7, 8]</strong>  <span class="color-comment"># Append a list using slicing</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'world', 4.5, 6, 7, 8]
&gt;&gt;&gt; <strong>lst + [a, b]</strong>  <span class="color-comment"># '+' returns the resultant list; while slicing-assignment returns None</span>
[123, 'world', 4.5, 6, 7, 8, a, b]
</pre>

<h5>Copying a List</h5>

<pre class="color-example">
&gt;&gt;&gt; <strong>l1 = [123, 4.5, 'hello']</strong>
&gt;&gt;&gt; <strong>l2 = l1[:]</strong>   <span class="color-comment"># Make a copy</span>
&gt;&gt;&gt; <strong>l2</strong>
[123, 4.5, 'hello']
&gt;&gt;&gt; <strong>l2[0] = 8</strong>    <span class="color-comment"># Modify l1</span>
&gt;&gt;&gt; <strong>l2</strong>
[8, 4.5, 'hello']
&gt;&gt;&gt; <strong>l1</strong>           <span class="color-comment"># No change in l1</span>
[123, 4.5, 'hello']

<span class="color-comment"># Contrast with direct assignment of list</span>
&gt;&gt;&gt; <strong>l3 = l1</strong>    <span class="color-comment"># direct assignment</span>
&gt;&gt;&gt; <strong>l3</strong>
[123, 4.5, 'hello']
&gt;&gt;&gt; <strong>l3[0] = 8</strong>  <span class="color-comment"># Modify l3</span>
&gt;&gt;&gt; <strong>l3</strong>
[8, 4.5, 'hello']
&gt;&gt;&gt; <strong>l1</strong>         <span class="color-comment"># l1 also changes</span>
[8, 4.5, 'hello']</pre>

<h5>List-Specific Member Functions</h5>

<p>The <code>list</code> class provides many member functions. Suppose <code>lst</code> is a <code>list</code> object:</p>

<ul>
<li><code>lst.append(x)</code>: append the given item <code>x</code> behind the <code>lst</code> and return <code>None</code>; same as <code>lst[len(lst):] = [x]</code>.</li>

<li><code>lst.extend(l)</code>: append the given list <code>l</code> behind the <code>lst</code> and return <code>None</code>; same as <code>lst[len(lst):] = l</code>.</li>

<li><code>lst.insert(index, x)</code>: insert the given item <code>x</code> before the <code>index</code> and return <code>None</code>. Hence, <code>lst.insert(0, x)</code> inserts before the first item of the <code>lst</code>; <code>lst.insert(len(lst), x)</code> inserts at the end of the <code>lst</code> which is the same as <code>lst.append(x)</code>.</li>

<li><code>lst.index(x)</code>: return the index of the first occurrence of the value <code>x</code>; or error.</li>

<li><code>lst.remove(x)</code>: remove the first occurrence of value <code>x</code> from the <code>lst</code> and return <code>None</code>; or error.</li>

<li><code>lst.pop()</code>: remove and return the last item of the <code>lst</code>.</li>
<li><code>lst.pop(index)</code>: remove and return the indexed item of the <code>lst</code>.</li>

<li><code>lst.clear(index)</code>: remove all items from the <code>lst</code> and return <code>None</code>; same as <code>del lst[:]</code>.</li>

<li><code>lst.count(x)</code>: return the occurrences of item <code>x</code>.</li>

<li><code>lst.reverse()</code>: reverse the <code>lst</code> in place and return <code>None</code>.</li>
<li><code>lst.sort()</code>: sort the <code>lst</code> in place and return <code>None</code>.</li>
<li><code>lst.copy()</code>: return a copy of <code>lst</code>; same as <code>lst[:]</code>.</li>
</ul>

<p>Recall that list is mutable (unlike string which is immutable). These functions modify the list directly. For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [123, 4.5, 'hello', [6, 7, 8]]</strong>  <span class="color-comment"># list can also contain list</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, 'hello', [6, 7, 8]]
&gt;&gt;&gt; <strong>type(lst)</strong>  <span class="color-comment"># Show type</span>
&lt;class 'list'&gt;
&gt;&gt;&gt; <strong>dir(lst)</strong>   <span class="color-comment"># Show all attributes for lst object</span>

&gt;&gt;&gt; <strong>len(lst)</strong>
4
&gt;&gt;&gt; <strong>lst.append('apple')</strong>  <span class="color-comment"># append item at the back</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, 'hello', [6, 7, 8], 'apple']
&gt;&gt;&gt; <strong>len(lst)</strong>
5
&gt;&gt;&gt; <strong>lst.pop(1)</strong>     <span class="color-comment"># retrieve and remove item at index</span>
4.5
&gt;&gt;&gt; <strong>lst</strong>
[123, 'hello', [6, 7, 8], 'apple']
&gt;&gt;&gt; <strong>len(lst)</strong>
4
&gt;&gt;&gt; <strong>lst.insert(2, 55.66)</strong>  <span class="color-comment"># insert item before the index</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'hello', 55.66, [6, 7, 8], 'apple']
&gt;&gt;&gt; <strong>del lst[3:]</strong>         <span class="color-comment"># delete the slice (del is an operator , not function)</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'hello', 55.66]
&gt;&gt;&gt; <strong>lst.append(55.66)</strong>   <span class="color-comment"># list can contain duplicate values</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'hello', 55.66, 55.66]
&gt;&gt;&gt; <strong>lst.remove(55.66)</strong>   <span class="color-comment"># remove first item of given value</span>
&gt;&gt;&gt; <strong>lst</strong>
[123, 'hello', 55.66]
&gt;&gt;&gt; <strong>lst.reverse()</strong>       <span class="color-comment"># reverse the list</span>
&gt;&gt;&gt; <strong>lst</strong>
[55.66, 'hello', 123]
 
<span class="color-comment"># Searching and Sorting</span>
&gt;&gt;&gt; <strong>lst2 = [5, 8, 2, 4, 1]</strong>
&gt;&gt;&gt; <strong>lst2.sort()</strong>     <span class="color-comment"># In-place sorting</span>
&gt;&gt;&gt; <strong>lst2</strong>
[1, 2, 4, 5, 8]
&gt;&gt;&gt; <strong>lst2.index(5)</strong>   <span class="color-comment"># Get the index of the given item</span>
3
&gt;&gt;&gt; <strong>lst2.index(9)</strong>
......
ValueError: 9 is not in list
&gt;&gt;&gt; <strong>lst2.append(1)</strong>
&gt;&gt;&gt; <strong>lst2</strong>
[1, 2, 4, 5, 8, 1]
&gt;&gt;&gt; <strong>lst2.count(1)</strong>   <span class="color-comment"># Count the occurrences of the given item</span>
2
&gt;&gt;&gt; <strong>lst2.count(9)</strong>
0
&gt;&gt;&gt; <strong>sorted(lst2)</strong>    <span class="color-comment"># Built-in function that returns a sorted list</span>
[1, 1, 2, 4, 5, 8]
&gt;&gt;&gt; <strong>lst2</strong>
[1, 2, 4, 5, 8, 1]  <span class="color-comment"># Not modified</span></pre>

<h4>Tuple <span class="font-code">(v1, v2,...)</span></h4>

<p>Tuple is similar to list except that it is immutable (like string). A tuple consists of items separated by commas, typically enclosed in parentheses <code>()</code>.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>tup = (123, 4.5, 'hello')</strong>  <span class="color-comment"># A tuple can contain different types</span>
&gt;&gt;&gt; <strong>tup</strong>
(123, 4.5, 'hello')
&gt;&gt;&gt; <strong>tup[1]</strong>           <span class="color-comment"># Indexing to get an item</span>
4.5
&gt;&gt;&gt; <strong>tup[1:3]</strong>         <span class="color-comment"># Slicing to get a sub-tuple</span>
(4.5, 'hello')
&gt;&gt;&gt; <strong>tup[1] = 9</strong>       <span class="color-comment"># Tuple, unlike list, is immutable</span>
<span class="color-error">TypeError: 'tuple' object does not support item assignment</span>
&gt;&gt;&gt; <strong>type(tup)</strong>
&lt;class 'tuple'&gt;
&gt;&gt;&gt; <strong>lst = list(tup)</strong>  <span class="color-comment"># Convert to list
</span>&gt;&gt;&gt; <strong>lst</strong>
[123, 4.5, 'hello']
&gt;&gt;&gt; <strong>type(lst)</strong>
&lt;class 'list'&gt;</pre>

<p>An one-item tuple needs a comma to differentiate from parentheses:</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>tup = (5,)</strong>  <span class="color-comment"># An one-item tuple needs a comma</span>
&gt;&gt;&gt; <strong>tup</strong>
(5,)
&gt;&gt;&gt; <strong>x = (5)</strong>     <span class="color-comment"># parentheses</span>
&gt;&gt;&gt; <strong>x</strong>
5</pre>

<p>The parentheses are actually optional (but recommended for readability). But the commas are mandatory. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>tup = 123, 4.5, 'hello'</strong>
&gt;&gt;&gt; <strong>tup</strong>
(123, 4.5, 'hello')
&gt;&gt;&gt; <strong>tup2 = 88,</strong>  <span class="color-comment"># one-item tuple needs a trailing commas</span> 
&gt;&gt;&gt; <strong>tup2</strong>
(88,)

<span class="color-comment"># However, we use empty parentheses to create an empty tuple
# Empty tuples are quite useless, as tuples are immutable.</span>
&gt;&gt;&gt; <strong>tup3 = ()</strong>
&gt;&gt;&gt; <strong>tup3</strong>
()
&gt;&gt;&gt; <strong>len(tup3)</strong>
0</pre>

<p>You can operate on tuples using (suppose <code>tuple</code> is a tuple):</p>

<ul>
<li>built-in functions such as <code>len(tuple)</code>, <code>max(tuple)</code>, <code>min(tuple)</code>;</li>
<li>operators such as <code>in</code>, <code>+</code> and <code>*</code>; and</li>
<li><code>Tuple</code> class's member functions <code>tuple.count(item)</code>,  <code>tuple.index(item)</code>, etc.</li>
</ul>


<h5>Conversion between List and Tuple</h5>
<p>You can covert a list to a tuple using built-in function <code>tuple()</code>; and a tuple to a list using <code>list()</code>. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>tuple([1, 2, 3, 1])</strong>  <span class="color-comment"># Convert list to tuple</span>
(1, 2, 3, 1)
&gt;&gt;&gt; <strong>list((1, 2, 3, 1))</strong>   <span class="color-comment"># Convert tuple to list</span>
[1, 2, 3, 1]</pre>

<h4>Dictionary <span class="font-code">{k1:v1, k2:v2,...}</span></h4>

<p>Python's built-in dictionary type supports <em>key-value pairs</em> (or <em>name-value pairs</em>, or <em>associative array</em>, or <em>mappings</em>).</p>

<ul>
<li>Dictionary is enclosed by curly braces <code>{}</code>. The name and value are separated by a colon (<code>:</code>), in the form of <code>{k1:v1, k2:v2,...}</code></li>

<li>Unlike list (or array), which indexes items using an integer indexes (0, 1, 2, 3,...), dictionary can be indexed using number, string or other types as the key.</li>
</ul>

<pre class="color-example">
&gt;&gt;&gt; <strong>dct = {'name':'Peter', 'gender':'male', 'age':21}</strong>
&gt;&gt;&gt; <strong>dct</strong>
{'age': 21, 'name': 'Peter', 'gender': 'male'}
&gt;&gt;&gt; <strong>dct['name']</strong>       <span class="color-comment"># Get value via key</span>
'Peter'
&gt;&gt;&gt; <strong>dct['age'] = 22</strong>   <span class="color-comment"># Re-assign a value</span>
&gt;&gt;&gt; <strong>dct</strong>
{'age': 22, 'name': 'Peter', 'gender': 'male'}
&gt;&gt;&gt; <strong>len(dct)</strong>
3
&gt;&gt;&gt; <strong>dct['email'] = 'peter@nowhere.com'</strong>   <span class="color-comment"># Add new member</span>
&gt;&gt;&gt; <strong>dct</strong>
{'name': 'Peter', 'age': 22, 'email': 'peter@nowhere.com', 'gender': 'male'}
&gt;&gt;&gt; <strong>type(dct)</strong>
&lt;class 'dict'&gt;

<span class="color-comment"># Use dict() built-in function to create a list</span>
&gt;&gt;&gt; <strong>dct2 = dict([('a', 1), ('c', 3), ('b', 2)])</strong>  <span class="color-comment"># Convert a list of 2-item tuples into a dictionary</span>
&gt;&gt;&gt; <strong>dct2</strong>
{'b': 2, 'c': 3, 'a': 1}</pre>

<h5>Dictionary-Specific Member Functions</h5>

<p>The <code>dict</code> class has many member methods. The commonly-used are (suppose that <code>dct</code> is a <code>dict</code> object):</p>

<ul>
<li><code>dct.has_key()</code>:</li>
<li><code>dct.items()</code>, <code>dct.keys()</code>, <code>dct.values()</code>:</li>
<li><code>dct.clear()</code>:</li>
<li><code>dct.copy()</code>:</li>
<li><code>dct.get()</code>:</li>
<li><code>dct.update(d)</code>: merge the given dictionary <code>d</code> into <code>dct</code>. Override the value if key exists, else, add new key-value.</li>
<li><code>dct.pop()</code>:</li>
</ul>

<p>For Examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>dct = {'name':'Peter', 'age':22, 'gender':'male'}</strong>
&gt;&gt;&gt; <strong>dct</strong>
{'gender': 'male', 'name': 'Peter', 'age': 22}

&gt;&gt;&gt; <strong>type(dct)</strong>  <span class="color-comment"># Show type</span>
&lt;class 'dict'&gt;
&gt;&gt;&gt; <strong>dir(dct)</strong>   <span class="color-comment"># Show all attributes of dct object</span>
......

&gt;&gt;&gt; <strong>list(dct.keys())</strong>       <span class="color-comment"># Get all the keys as a list</span>
['gender', 'name', 'age']
&gt;&gt;&gt; <strong>list(dct.values())</strong>     <span class="color-comment"># Get all the values as a list</span>
['male', 'Peter', 22]
&gt;&gt;&gt; <strong>list(dct.items())</strong>      <span class="color-comment"># Get key-value as tuples</span>
[('gender', 'male'), ('name', 'Peter'), ('age', 22)]

&gt;&gt;&gt; <strong>dct.get('age', 'not such key')</strong>  <span class="color-comment"># Retrieve item</span>
22
&gt;&gt;&gt; <strong>dct.get('height', 'not such key')</strong>
'not such key'

&gt;&gt;&gt; <strong>del dct['age']</strong>   <span class="color-comment"># Delete an item of the given key</span>
&gt;&gt;&gt; <strong>dct</strong>
{'gender': 'male', 'name': 'Peter'}

&gt;&gt;&gt; <strong>'name' in dct</strong>
True

&gt;&gt;&gt; <strong>dct.update({'height':180, 'weight':75})</strong>  <span class="color-comment"># Merge the given dictionary</span>
&gt;&gt;&gt; <strong>dct</strong>
{'height': 180, 'gender': 'male', 'name': 'Peter', 'weight': 75}

&gt;&gt;&gt; <strong>dct.pop('gender')</strong>  <span class="color-comment"># Remove and return the item with the given key</span> 
'male'
&gt;&gt;&gt; <strong>dct</strong>
{'name': 'Peter', 'weight': 75, 'height': 180}
&gt;&gt;&gt; <strong>dct.pop('no_such_key')</strong>   <span class="color-comment"># Raise KeyError if key not found</span>
KeyError: 'no_such_key'
&gt;&gt;&gt; <strong>dct.pop('no_such_key', 'not found')</strong>   <span class="color-comment"># Provide a default if key does not exist</span>
'not found'</pre>

<p>Both <code>pop()</code> (member function) and <code>del</code> (operator) can be used to remove an item from a dictionary. Use <code>pop()</code> if you want the removed item.</p>


<h4>Set <span class="font-code">{v1, v2,...}</span></h4>

<p>A set is an unordered, non-duplicate collection of objects. A set is delimited by curly braces <code>{}</code>, just like dictionary. You can think of a set as a collection of dictionary keys without associated values.</p>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>st = {123, 4.5, 'hello', 123, 'Hello'}</strong>
&gt;&gt;&gt; <strong>st</strong>         <span class="color-comment"># Duplicate removed and order changed</span>
{'Hello', 'hello', 123, 4.5}
&gt;&gt;&gt; <strong>123 in st</strong>  <span class="color-comment"># Test membership</span>
True
&gt;&gt;&gt; <strong>88 in st</strong>
False

<span class="color-comment"># Use the built-in function set() to create a set.</span>
&gt;&gt;&gt; <strong>st2 = set([2, 1, 3, 1, 3, 2])</strong>  <span class="color-comment"># Convert a list to a set. Duplicate removed and unordered.</span>
&gt;&gt;&gt; <strong>st2</strong>
{1, 2, 3}
&gt;&gt;&gt; <strong>st3 = set('hellllo')</strong>  <span class="color-comment"># Convert a string to a character set.</span>
&gt;&gt;&gt; <strong>st3</strong>
{'o', 'h', 'e', 'l'}
</pre>

<h5>Set-Specific Operators</h5>
<p>Python supports set operators <code>&amp;</code> (intersection), <code>|</code> (union), <code>-</code> (difference) and <code>^</code> (exclusive-or). For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>st1 = {'a', 'e', 'i', 'o', 'u'}</strong>
&gt;&gt;&gt; <strong>st1</strong>
{'e', 'o', 'u', 'a', 'i'}
&gt;&gt;&gt; <strong>st2 = set('hello')</strong>  <span class="color-comment"># Convert a string to a character set</span>
&gt;&gt;&gt; <strong>st2</strong>
{'o', 'l', 'e', 'h'}
&gt;&gt;&gt; <strong>st1 &amp; st2</strong>   <span class="color-comment"># Set intersection</span>
{'o', 'e'}
&gt;&gt;&gt; <strong>st1 | st2</strong>   <span class="color-comment"># Set union</span>
{'o', 'l', 'h', 'i', 'e', 'a', 'u'}
&gt;&gt;&gt; <strong>st1 - st2</strong>   <span class="color-comment"># Set difference</span>
{'i', 'u', 'a'}
&gt;&gt;&gt; <strong>st1 ^ st2</strong>   <span class="color-comment"># Set exclusive-or</span>
{'h', 'i', 'u', 'a', 'l'}</pre>

<h3>Control Constructs</h3>

<h4>Syntax</h4>

<p>A Python compound statement (such as conditional, loop and function definition) takes the following syntax:</p>

<pre class="color-syntax">
Header-1:       <span class="color-comment"># Headers are terminated by a colon</span>
    statements  <span class="color-comment"># Body blocks are indented (recommended to use 4 spaces)</span>
    ......
Header-2:
    statements
    ......</pre>
   
<p>For example, a <code>if-elif-else</code> takes the following form:</p>

<pre class="color-example">
if x == 0:    <span class="color-comment"># Parentheses are not needed for condition</span>
    print('x is zero')
elif x &gt; 0:
    print(x)
    print('x is more than zero')
else:
    print(x)
    print('x is less than zero')</pre>

<ul>
<li>It begins with a header line, such as <code>if</code>, <code>elif</code>, <code>else</code>, terminated by a colon (<code>:</code>), followed by the  <em>indented</em> body block of statement(s).</li>

<li>The parentheses <code>()</code> surrounding the condition are optional.</li>

<li>Python does not use curly braces <code>{}</code> to embrace a block (as in C/C++/Java). Instead, it uses <em>indentation</em> to delimit a body block. That is, the indentation is syntactically significant. Python does not care how you indent (with spaces or tab), and how far you indent. But ALL the statements in the SAME block must be indented with the same distance. You can use either spaces or tabs, but you cannot mix them. This indentation rule forces programmers to write readable code!!!</li>
</ul>

<p>In Python, a statement is delimited by the end-of-line. The end-of-line is the end of the statement. There is no need to place a semicolon (<code>;</code>) to end a statement (as in C/C++/Java).</p>

<p>Special cases:</p>

<ul>
<li>You can place multiple statements in one line, separated by semicolon (<code>;</code>), for example,
<pre class="color-example">
x = 1; y = 2; z = 3</pre>
</li>

<li>A statement can span multiple line if parentheses <code>()</code>, square brackets <code>[]</code>, or braces <code>{}</code> are parts of the statement, for example,
<pre class="color-example">
x = [123,
     55.66,   <span class="color-comment"># Indentation optional</span>
     'hello']</pre></li>

<li>You can place the body block on the same line as the header line, e.g.,
<pre class="color-example">
if x == 0:  print('x is zero')
elif x > 0: print(x); print('x is more than zero')
else:       print(x); print('x is less than zero')</pre>
</li>

<li>You can use backslash <code>\</code> to indicate continuation into next line. This is an old rule and is NOT recommended, because it is error-prone.</li>
</ul>

<h4>Conditional <span class="font-code">if-elif-else</span></h4>

<p>The general syntax is as follows. The <code>elif</code> (else-if) and <code>else</code> blocks are optional.</p>

<pre class="color-syntax">
<strong>if</strong> <em>test-1</em><strong>:</strong>
    <em>block-1</em>
<strong>elif</strong> <em>test-2</em><strong>:</strong>
    <em>block-2</em>
<strong>elif</strong> <em>test-3</em><strong>:</strong>
    <em>block-3</em>
......
<strong>elif</strong> <em>test-n</em><strong>:</strong>
    <em>block-n</em>
<strong>else:</strong>
    <em>else-block</em></pre>

<p>There is no <code>switch-case</code> statement in Python (as in C/C++/Java).</p>

<h5>Comparison and Logical Operators</h5>

<p>Python supports these comparison (relational) operators, which return a boolean <code>True</code> or <code>False</code></p>
<ul>
<li><code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code></li>
<li><code>in</code>, <code>not in</code></li>
<li><code>is</code>, <code>is not</code></li>
</ul>

<p>Python supports these logical (boolean) operators:</p>
<ul>
<li><code>and</code></li>
<li><code>or</code></li>
<li><code>not</code></li>
</ul>

<h5>Chain Comparison <span class="font-code">n1 &lt; x &lt; n2</span></h5>
<p>Python supports chain comparison, e.g.,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = 8</strong>
&gt;&gt;&gt; <strong>1 &lt; x &lt; 10</strong>  <span class="color-comment"># Same as 1 &lt; x and x &lt; 10</span>
True
&gt;&gt;&gt; <strong>10 &lt; x &lt; 20</strong>
False
&gt;&gt;&gt; <strong>not (10 &lt; x &lt; 20)</strong>
True</pre>

<h5>Shorthand if-else</h5>
<p>The syntax is:</p>
<pre class="color-syntax">
<em>expr-1</em> <strong>if</strong> <em>test</em> <strong>else</strong> <em>expr-2</em>
   <span class="color-comment"># Evaluate <em>expr-1</em> if <em>test</em> is True; otherwise, evaluate <em>expr-2</em></span></pre>

<p>For example,</p>

<pre class="color-example">&gt;&gt;&gt; <strong>x = 0</strong>
&gt;&gt;&gt; <strong>print('zero' if x == 0 else 'not zero')</strong>
zero
 
&gt;&gt;&gt; <strong>x = -8</strong>
&gt;&gt;&gt; <strong>abs_x = x if x &gt; 0 else -x</strong>
&gt;&gt;&gt; <strong>abs_x</strong>
8</pre>


<h4>The <span class="font-code">while</span> loop</h4>

<p>The general syntax is as follows:</p>

<pre class="color-syntax">
<strong>while</strong> <em>test</em><strong>:</strong>
    <em>true-block</em>
 
<span class="color-comment"># while loop with a else block</span>
<strong>while</strong> <em>test</em><strong>:</strong>
    <em>true-block</em>
<strong>else:</strong>           <span class="color-comment"># Run only if no break encountered</span>
    <em>else-block</em></pre>

<p>The <code>else</code> block is optional, which will be executed if control exits the loop without encountering a <code>break</code> statement.</p>

<p>For example,</p>

<pre class="color-example">
<span class="color-comment"># Sum from 1 to the given upperbound</span>
n = int(input('Enter the upperbound: '))
i = 1
sum = 0
while (i &lt;= n):
    sum += i
    i += 1
print(sum)</pre>


<h4><span class="font-code">break</span>, <span class="font-code">continue</span>, <span class="font-code">pass</span> and loop-<span class="font-code">else</span></h4>

<p>Like C/C++/Java, the <code>break</code> statement breaks out from the innermost loop; the <code>continue</code> statement skips the remaining statements of the loop and continues into the next iteration.</p>

<p>The <code>pass</code> statement does nothing. It serves as a placeholder for an empty statement.</p>

<p>The loop-<code>else</code> block is executed if the loop is exited normally, without encountering the <code>break</code> statement.</p>


<h4>The <span class="font-code">for-in</span> loop</h4>

<p>The <code>for-in</code> loop has the following syntax:</p>

<pre class="color-syntax">
<strong>for</strong> <em>item</em> <strong>in</strong> <em>sequence</em><strong>:</strong>  <span class="color-comment"># sequence: string, list, tuple, dictionary, set</span>
    <em>true-block</em>
 
<span class="color-comment"># for-in loop with a else block</span>
<strong>for</strong> <em>item</em> <strong>in</strong> <em>sequence</em><strong>:</strong>
    <em>true-block</em>
<strong>else:</strong>        <span class="color-comment"># Run only if no break encountered</span>
    <em>else-block</em></pre>

<p>Again, the <code>else</code> block is executed only if the loop exits normally, without encountering the <code>break</code> statement.</p>

<h5>Iterating through a Sequence (String, List, Tuple, Dictionary, Set)</h5>

<p>The <code>for..in..</code> can be used to iterate through a sequence, for example,</p>

<pre class="color-example">
<span class="color-comment"># String: iterating through each character</span>
&gt;&gt;&gt; <strong>for char in 'hello': print(char)</strong>
h
e
l
l
o

<span class="color-comment"># List: iterating through each item</span>
&gt;&gt;&gt; <strong>for item in [123, 4.5, 'hello']: print(item)</strong>
123
4.5
hello

<span class="color-comment"># Tuple: iterating through each item</span>
&gt;&gt;&gt; <strong>for item in (123, 4.5, 'hello'): print(item)</strong>
123
4.5
hello

<span class="color-comment"># Dictionary: iterating through each key</span>
&gt;&gt;&gt; <strong>dct = {'a': 1, 2: 'b', 'c': 'cc'}</strong>
&gt;&gt;&gt; <strong>for key in dct: print(key, ':', dct[key])</strong>
a : 1
c : cc
2 : b

<span class="color-comment"># Set: iterating through each item</span>
&gt;&gt;&gt; <strong>for item in {'apple', 1, 2, 'apple'}: print(item)</strong>
1
2
apple

<span class="color-comment"># File: iterating through each line</span>
&gt;&gt;&gt; <strong>f = open('test.txt', 'r')</strong>
&gt;&gt;&gt; <strong>for line in f: print(line, end='')</strong>
...Each line of the file...
&gt;&gt;&gt; <strong>f.close()</strong>
</pre>

<h5>Iterating through Dictionary</h5>

<p>There are a few ways to iterating through an dictionary:</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>dct = {'name':'Peter', 'gender':'male', 'age':21}</strong>

<span class="color-comment"># Iterate through the keys (as in the above example)</span>
&gt;&gt;&gt; <strong>for key in dct: print(key, ':', dct[key])</strong>
age : 21
name : Peter
gender : male

<span class="color-comment"># Iterate through the items</span>
&gt;&gt;&gt; <strong>for key, value in dct.items(): print(key, ':', value)</strong>
age : 21
name : Peter
gender : male</pre>

<h5>The <span class="font-code">iter()</span> and <span class="font-code">next()</span> Built-in Functions</h5>

<p>The built-in function <code>iter(iterable)</code> takes a <code>iterable</code> (such as sequence) and returns an <code>iterator</code> object. You can then use <code>next()</code> to iterate through the <code>iterator</code>. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>i = iter([11, 22, 33])</strong>
&gt;&gt;&gt; <strong>next(i)</strong>
11
&gt;&gt;&gt; <strong>next(i)</strong>
22
&gt;&gt;&gt; <strong>next(i)</strong>
33
&gt;&gt;&gt; <strong>next(i)</strong>  <span class="color-comment"># Raise StopIteration exception if no more item</span>
...... 
StopIteration</pre>

<h5>The <span class="font-code">range()</span> Built-in Function</h5>

<p>The <code>range()</code> function produces a series of consecutive integers, which can be used as indexes for for-in loop.</p>

<ul>
<li><code>range(n)</code> produces integers from <code>0</code> to <code>n-1</code>;</li>
<li><code>range(m, n)</code> produces integers from <code>m</code> to <code>n-1</code>;</li>
<li><code>range(m, n, s)</code> produces integers from <code>m</code> to <code>n-1</code> in step of <code>s</code>.</li>
</ul>

<p>For example,</p>

<pre class="color-example">
<span class="color-comment"># Sum from 1 to the given upperbound</span>
n = int(input('Enter the upperbound: '))
sum = 0
for i in range(1, n+1):  <span class="color-comment"># list of 1 to n</span>
    sum += i
print(sum)
 
<span class="color-comment"># Sum a given list</span>
lst = [9, 8, 4, 5]
sum = 0
for i in range(len(lst)):  <span class="color-comment"># list of 0 to len-1</span>
    sum += lst[i]
print(sum)
 
<span class="color-comment"># Better alternative</span>
lst = [9, 8, 4, 5]
sum = 0
for item in lst:  <span class="color-comment"># Each item of lst</span>
    sum += item
print(sum)

<span class="color-comment"># Use built-in function</span>
sum(lst)</pre>

<h5><span class="font-code">reversed()</span> Built-in Function</h5>

<p>To iterate a sequence in the reverse order, apply the <code>reversed()</code> function which reverses the iterator over values of the sequence. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [11, 22, 33]</strong>
&gt;&gt;&gt; <strong>reversed(lst)</strong>
&lt;list_reverseiterator object at 0x7fc4707f3828&gt;
&gt;&gt;&gt; <strong>for item in reversed(lst): print(item, end=' ')</strong>
33 22 11

&gt;&gt;&gt; <strong>str = "hello"</strong>
&gt;&gt;&gt; <strong>for c in reversed(str): print(c, end='')</strong>
olleh</pre>

<h5>Index and <span class="font-code">enumerate()</span> Built-in Function</h5>

<p>You can use function <code>enumerate()</code> to obtain the positional indexes, when looping through a sequence. For example,</p>

<pre class="color-example">
<span class="color-comment"># List</span>
&gt;&gt;&gt; <strong>for i, v in enumerate(['a', 'b', 'c']): print(i, v)</strong>
... 
0 a
1 b
2 c

<span class="color-comment"># Tuple</span>
&gt;&gt;&gt; <strong>for i, v in enumerate(('d', 'e', 'f')): print(i, v)</strong>
... 
0 d
1 e
2 f</pre>

<h5>Multiple Sequences and <span class="font-code">zip()</span> Built-in Function</h5>

<p>To loop over two or more sequences at the same time, the entries can be paired with the <code>zip()</code> function. For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>lst1 = ['a', 'b', 'c']</strong>
&gt;&gt;&gt; <strong>lst2 = [11, 22, 33]</strong>
&gt;&gt;&gt; <strong>for i1, i2 in zip(lst1, lst2): print(i1, i2)</strong>
... 
a 11
b 22
c 33</pre>

<h5>List and Dictionary Comprehension</h5>

<p>List comprehension provides concise way to generate a list. The syntax is:</p>
<pre class="color-syntax">
<em>result_list</em> = <strong>[</strong><em>expression_with_item</em> <strong>for</strong> <em>item</em> <strong>in</strong> <em>in_list</em> <strong>if</strong> <em>test</em><strong>]</strong>
 
<span class="color-comment"># Same as</span>
<em>result_list</em> = []
for <em>item</em> in <em>in_list</em>:
    if <em>test</em>:
        <em>result_list</em>.append(<em>item</em>)</pre>

<p>For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>sq = [item * item for item in range(1,11)]</strong>
&gt;&gt;&gt; <strong>sq</strong>
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]

&gt;&gt;&gt; <strong>x = [3, 4, 1, 5]</strong>
&gt;&gt;&gt; <strong>sq_x = [item * item for item in x]</strong>  <span class="color-comment"># no test, all items</span>
&gt;&gt;&gt; <strong>sq_x</strong>
[9, 16, 1, 25]
&gt;&gt;&gt; <strong>sq_odd = [item * item for item in x if item % 2 != 0]</strong>
&gt;&gt;&gt; <strong>sq_odd</strong>
[9, 1, 25]

<span class="color-comment"># Nested for</span>
&gt;&gt;&gt; <strong>[(x, y) for x in range(1,3) for y in range(1,4) if x != y]</strong>
[(1, 2), (1, 3), (2, 1), (2, 3)]</pre>

<p>Similarly, you can create dictionary and set (mutable sequences) via comprehension. For example,</p>

<pre class="color-example">
<span class="color-comment"># Dictionary {k1:v1, k2:v2,...}</span>
&gt;&gt;&gt; <strong>d = {x:x**2 for x in range(1, 5)}</strong>  <span class="color-comment"># Use braces for dictionary</span>
&gt;&gt;&gt; <strong>d</strong>
{1: 1, 2: 4, 3: 9, 4: 16}

<span class="color-comment"># Set {v1, v2,...}</span>
&gt;&gt;&gt; <strong>s = {i for i in 'hello' if i not in 'aeiou'}</strong>  <span class="color-comment"># Use braces for set too</span>
&gt;&gt;&gt; <strong>s</strong>
{'h', 'l'}</pre>

<h5>Using <span class="font-code">else</span>-clause</h5>

<p>Recall that the <code>else</code>-clause runs when no <code>break</code> occurs.</p>

<pre class="color-example">
<span class="color-comment"># List all primes between 2 and 100</span>
for number in range(2,100):
    for factor in range(2, number//2+1):  <span class="color-comment"># Look for factor</span>
        if number % factor == 0:  <span class="color-comment"># break if a factor found</span>
            print('%d is NOT a prime' % number)  
            break
    else:
        print('%d is a prime' % number)  <span class="color-comment"># No break encountered</span></pre>

<h3>Functions</h3>

<h4>Syntax</h4>

<p>In Python, you define a function via the keyword <code>def</code> followed by the function name, the parameter list, and the function body. Inside the function body, you can use a <code>return</code> statement to return a value to the caller.</p>

<pre class="color-syntax">
<strong>def</strong> <em>function_name</em>(<em>arg_1</em>, <em>arg_2</em>, ...)<strong>:</strong>
    &quot;&quot;&quot;Function doc-string&quot;&quot;&quot;    <span class="color-comment"># can be retrieved via <em>function_name</em>.__doc__</span>
    <em>statements</em>
    <strong>return</strong> <em>return-value</em></pre>
   
<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>def my_square(x):
       &quot;&quot;&quot;Return the square of the given number&quot;&quot;&quot;
       return x * x</strong>

&gt;&gt;&gt; <strong>my_square(8)</strong>
64
&gt;&gt;&gt; <strong>my_square(1.8)</strong>
3.24
&gt;&gt;&gt; <strong>my_square('hello')</strong>
TypeError: can't multiply sequence by non-int of type 'str'
&gt;&gt;&gt; <strong>my_square</strong>
&lt;function my_square at 0x7fa57ec54bf8&gt;
&gt;&gt;&gt; <strong>type(my_square)</strong>
&lt;class 'function'&gt;
&gt;&gt;&gt; <strong>my_square.__doc__</strong>
'Return the square of the given number'</pre>

<p>Take note that you need to define the function before using it, as Python is interpreted.</p>

<p>More Examples,</p>

<pre class="color-example">
def fibon(n):
    &quot;&quot;&quot;Print the first n Fibonacci numbers, where f(n)=f(n-1)+f(n-2) and f(1)=f(2)=1&quot;&quot;&quot;
    a, b = 1, 1
    for i in range(n):
        print(a, end=' ')  <span class="color-comment"># print space instead of newline at the end</span>
        a, b = b, a+b
    print()   <span class="color-comment"># print a newline</span>

fibon(20)</pre>


<h5>The <span class="font-code">pass</span> statement</h5>
<p>The <code>pass</code> statement does nothing. It is sometimes needed as the statement placeholder to ensure correct syntax, e.g.,</p>

<pre class="color-example">
def my_fun():
    pass      <span class="color-comment"># syntax error if empty</span></pre>

<h4>Function Parameters</h4>

<h5>Passing Arguments by Value/Reference</h5>
<p>In Python:</p>
<ul>
<li>Immutable arguments (such as integers, floats, strings and tuples) are passed by value, i.e., a copy is cloned and passed into the function, and the original cannot be modified inside the function.</li>
<li>Mutable arguments (such as lists, dictionaries, sets and instances of classes) are passed by reference, i.e., they can be modified inside the function.</li>
</ul>

<h5>Parameters with Default Values</h5>

<p>You can assign a default value to &quot;trailing&quot; parameters. Trailing parameters having default values are optional during invocation. For example,</p>

<pre class="color-example">
def my_sum(n1, n2 = 4, n3 = 5):  <span class="color-comment"># n1 is required, n2 and n3 are optional</span>
    &quot;&quot;&quot;Return the sum of all the arguments&quot;&quot;&quot;
    return n1 + n2 + n3

print(my_sum(1, 2, 3))
print(my_sum(1, 2))    <span class="color-comment"># n3 defaults</span>
print(my_sum(1))       <span class="color-comment"># n2 and n3 default</span></pre>


<p>More Examples,</p>

<pre class="color-example">
def greet(name):
    return 'hello, ' + name
    
greet('Peter')  <span class="color-comment"># Output: 'hello, Peter'</span></pre>

<p>In stead of hardcoding the <code>'hello, '</code>, it is more flexible to use a parameter with default value, as follows:</p>

<pre class="color-example">  <span class="color-comment"># name is required, prefix is optional</span>
def greet(name, prefix='hello'):
    return prefix + ', ' + name
    
greet('Peter')  <span class="color-comment"># Output: 'hello, Peter'</span>
greet('Peter', 'hi')  <span class="color-comment"># Output: 'hi, Peter'</span>
greet('Peter', prefix='hi')  <span class="color-comment"># Output: 'hi, Peter'</span>
greet(name='Peter', prefix='hi')  <span class="color-comment"># Output: 'hi, Peter'</span>
</pre>

<h5>Positional and Keyword Arguments</h5>

<p>Python functions support both positional and keyword (or named) arguments.</p>

<p>Normally, Python passes the arguments by position from left to right (i.e., positional), like C/C++/Java. Python also allows you to pass arguments by keyword (or name) in the form of <code>kwarg=value</code>. For example,</p>

<pre class="color-example">
def my_sum(n1, n2 = 4, n3 = 5):
    &quot;&quot;&quot;Return the sum of all the arguments&quot;&quot;&quot;
    return n1 + n2 + n3

print(my_sum(n2 = 2, n1 = 1, n3 = 3)) <span class="color-comment"># keyword arguments need not follow their positions</span>
print(my_sum(n2 = 2, n1 = 1))         <span class="color-comment"># n3 defaults</span>
print(my_sum(n1 = 1))                 <span class="color-comment"># n2 and n3 default</span>
print(my_sum(1, n3 = 3))              <span class="color-comment"># n2 default</span>
#print(my_sum(n2 = 2))                <span class="color-error"># TypeError, n1 missing</span></pre>

<p>You can also mix the positional arguments and keyword arguments, by placing the positional arguments first, as shown in the above examples.</p>

<h5>Variable Number of Positional Parameters (<span class="font-code">*args</span>) and Keyword Parameters (<span class="font-code">**kwargs</span>)</h5>

<p>Python supports variable number (arbitrary) of arguments. In the function definition, you can use <code>*</code> to <em>pack</em> all the remaining positional arguments into a tuple. For example,</p>

<pre class="color-example">
def my_sum(a, *args):  <span class="color-comment"># Accept one positional argument, followed by arbitrary number of arguments</span>
    &quot;&quot;&quot;Return the sum of all the arguments (one or more)&quot;&quot;&quot;
    sum = a
    for item in args:  <span class="color-comment"># args is a tuple</span>
        sum += item
    return sum

print(my_sum(1))           <span class="color-comment"># args is ()</span>
print(my_sum(1, 2))        <span class="color-comment"># args is (2,)</span>
print(my_sum(1, 2, 3))     <span class="color-comment"># args is (2, 3)</span>
print(my_sum(1, 2, 3, 4))  <span class="color-comment"># args is (2, 3, 4)</span></pre>

<p>Python supports placing <code>*args</code> in the middle of the parameter list. However, all the arguments after <code>*args</code> must be passed by keyword to avoid ambiguity. For example</p>

<pre class="color-example">
def my_sum(a, *args, b):
    sum = a
    for item in args:
        sum += item
    sum += b
    return sum

print(my_sum(1, 2, 3, 4))  
    <span class="color-comment"># TypeError: my_sum() missing 1 required keyword-only argument: 'b'</span>
print(my_sum(1, 2, 3, 4, b=5))</pre>

<p>In the reverse situation when the arguments are already in a list/tuple, you can also use <code>*</code> to <em>unpack</em> the list/tuple as separate positional arguments. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>def my_sum(a, b, c): return a+b+c</strong>

&gt;&gt;&gt; <strong>lst1 = [11, 22, 33]</strong>
<span class="color-comment"># my_sum() expects 3 arguments, NOT a 3-item list</span>
&gt;&gt;&gt; <strong>my_sum(*lst1)</strong>   <span class="color-comment"># unpack the list into separate positional arguments</span>
66

&gt;&gt;&gt; <strong>lst2 = [44, 55]</strong>
&gt;&gt;&gt; <strong>my_sum(*lst2)</strong>
TypeError: my_sum() missing 1 required positional argument: 'c'</pre>

<p>For keyword parameters, you can use <code>**</code> to pack them into a dictionary. For example,</p>

<pre class="color-example">
def my_print_kwargs(**kwargs):  <span class="color-comment"># Accept variable number of keyword arguments</span>
    &quot;&quot;&quot;Print all the keyword arguments&quot;&quot;&quot;
    for key, value in kwargs.items():  <span class="color-comment"># kwargs is a dictionary</span>
        print('%s: %s' % (key, value))

my_print_kwargs(name='Peter', age=24)

<span class="color-comment"># Similarly, you can also use ** to unpack a dictionary into individual keyword arguments</span>
dict = {'k1':'v1', 'k2':'v2'}
my_print_kwargs(**dict)  <span class="color-comment"># Use ** to unpack dictionary into separate keyword arguments k1=v1, k2=v2</span></pre>

<p>You can use both <code>*args</code> and <code>**kwargs</code> in your function definition. Place <code>*args</code> before <code>**kwargs</code>. For example,</p>

<pre class="color-example">
def my_print_all_args(*args, **kwargs):   <span class="color-comment"># Place *args before **kwargs</span>
    &quot;&quot;&quot;Print all positional and keyword arguments&quot;&quot;&quot;
    for item in args:  <span class="color-comment"># args is a tuple</span>
        print(item)
    for key, value in kwargs.items():  <span class="color-comment"># kwargs is a dictionary</span>
        print('%s: %s' % (key, value))

my_print_all_args('a', 'b', 'c', name='Peter', age=24)
    <span class="color-comment"># Place the positional arguments before the keyword arguments during invocation</span></pre>


<h4>Function Overloading</h4>

<p>Python does NOT support Function Overloading like Java/C++ (where the same function name can have different versions differentiated by their parameters).</p>


<h4>Function Return Values</h4>

<p>You can return multiple values from a Python function, e.g.,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>def my_fun():
       return 1, 'a', 'hello'</strong>

&gt;&gt;&gt; <strong>x, y, z = my_fun()</strong>
&gt;&gt;&gt; <strong>z</strong>
'hello'
&gt;&gt;&gt; <strong>my_fun()</strong>
(1, 'a', 'hello')</pre>

<p>It seems that Python function can return multiple values. In fact, a tuple is returned.</p>

<p>A tuple is actually formed through the commas, not the parentheses, e.g.,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = 1, 'a'</strong>  <span class="color-comment"># Parentheses are optional for tuple</span>
&gt;&gt;&gt; <strong>x</strong>
(1, 'a')</pre>

<h4>Types Hints via Function Annotations</h4>

<p>From Python 3.5, you can provide type hints via function annotations in the form of:</p>

<pre class="color-example">
def say_hello(name:str) -&gt; str:  <span class="color-comment"># Type hints for parameter and return value</span>
    return 'hello, ' + name

say_hello('Peter')</pre>

<p>The type hints annotations are usually ignored, and merely serves as documentation. But there are external library that can perform the type check.</p>


<h3>Modules, Import-Statements and Packages</h3>

<h4>Modules</h4>

<p>A Python module is a file containing Python codes (statements, variables, functions, classes), which shall be saved with the file extension of &quot;<code>.py</code>&quot;. The module name is the filename, i.e., a module shall be saved as &quot;<code>&lt;module_name&gt;.py</code>&quot;.</p>

<p>By convention, modules names shall be short and all-lowercase (optionally joined with underscores if it improves readability).</p>

<p>A module typically begins with a triple-double-quoted documentation string (doc-string) (available via <code>module_name.__doc__</code>), followed by variables, function or class definitions.</p>

<h5>Example: The <span class="font-code">greet</span> Module</h5>
<p>Create a module called <code>greet</code> (save as &quot;<code>greet.py</code>&quot;) as follows:</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;greet.py: the greet module with attributes msg and greet()&quot;&quot;&quot;</span>
msg = 'Hello'      <span class="color-comment"># variable</span>
 
def greet(name):   <span class="color-comment"># function</span>
    print('%s, %s' % (msg, name))</pre>

<p>This module <code>greet</code> contains a variable <code>msg</code> and a function <code>greet()</code>.</p>

<h4>The <span class="font-code">import</span> statement</h4>

<p>To use an external module in your script, use the <code>import</code> statement:</p>

<pre class="color-syntax">
import &lt;module_name&gt;                          <span class="color-comment"># import one module</span>
import &lt;module_name_1&gt;, &lt;module_name_2&gt;, ...  <span class="color-comment"># import more modules, separated by commas</span>
import &lt;module_name&gt; as &lt;name&gt;                <span class="color-comment"># Reference the imported module as name</span></pre>

<p>With the <code>import</code>, you can then reference the module's attributes as <code>&lt;module_name&gt;.&lt;attribute_name&gt;</code>. You can use the <code>import-as</code> to assign a new name to avoid module name conflict.</p>

<p>For example, to use the <code>greet</code> module created earlier:</p>

<pre class="color-example">
$ cd /path/to/module-dir
$ python3
&gt;&gt;&gt; <strong>import greet</strong>
&gt;&gt;&gt; <strong>greet.greet('Peter')</strong>  <span class="color-comment"># &lt;module_name&gt;.&lt;function_name&gt;</span>
Hello, Peter
&gt;&gt;&gt; <strong>print(greet.msg)</strong>      <span class="color-comment"># &lt;module_name&gt;.&lt;var_name&gt;</span>
Hello

&gt;&gt;&gt; <strong>greet.__doc__</strong>         <span class="color-comment"># module's doc-string</span>
'greet.py: the greet module with attributes msg and greet()'
&gt;&gt;&gt; <strong>greet.__name__</strong>        <span class="color-comment"># module's name</span>
'greet'
&gt;&gt;&gt; <strong>dir(greet)</strong>            <span class="color-comment"># List all attributes defined in the module</span>
['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__',
 '__package__', '__spec__', 'greet', 'msg']
&gt;&gt;&gt; <strong>help(greet)</strong>
... List Module's name, file, functions, data, ...</pre>

<p>The import statements should be grouped in this order:</p>

<ol>
<li>standard library</li>
<li>related third party</li>
<li>local application/library</li>
</ol>

<h4>The <span class="font-code">from-import</span> Statement</h4>

<p>The syntax is:</p>
<pre class="color-syntax">
from &lt;module_name&gt; import &lt;attr_name&gt;              <span class="color-comment"># import one attribute</span>
from &lt;module_name&gt; import &lt;attr_name_1&gt;, &lt;attr_name_2&gt;, ...   <span class="color-comment"># import selected attributes</span>
from &lt;module_name&gt; import *                        <span class="color-comment"># import ALL attributes (NOT recommended)</span>
from &lt;module_name&gt; import &lt;attr_name&gt; as &lt;name&gt;    <span class="color-comment"># import attribute as the given name</span></pre>

<p>With the <code>from-import</code> statement, you can reference the attributes with the <code>attr_name</code>, without qualified with the <code>module_name</code>.</p>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>from greet import greet, msg as message</strong>
&gt;&gt;&gt; <strong>greet('Peter')</strong>  <span class="color-comment"># without the module_name</span>
Hello, Peter
&gt;&gt;&gt; <strong>message</strong>
'Hello'
&gt;&gt;&gt; <strong>msg</strong>
NameError: name 'msg' is not defined</pre>

<h4><span class="font-code">sys.path</span> and <span class="font-code">PYTHONPATH</span></h4>
<p>The module search path is maintained in the variable <code>path</code> of the <code>sys</code> module, i.e. <code>sys.path</code>.</p>

<p>The <code>sys.path</code> is initialized from the environment variable <code>PYTHONPATH</code>, plus an installation-dependent default.</p>

<p>For example,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>import sys</strong>
&gt;&gt;&gt; <strong>sys.path</strong>
['', '/usr/lib/python2.7', '/usr/local/lib/python2.7/dist-packages', 
 '/usr/lib/python2.7/dist-packages', ...]</pre>
 
<p><code>sys.path</code> default includes the current working directory, and the standard Python directories, plus the extension directories in <code>dist-packages</code>.</p>

<p>The imported modules must be available in one of the <code>sys.path</code> entries.</p>

<h4>Reloading module</h4>

<p>If you modify a module (e.g., under IDEL or Python Interpreter), you need to use function <code>reload()</code> function of the <code>imp</code> module to reload a module, for example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import my_module, imp</strong>
&gt;&gt;&gt; <strong>imp.reload(my_module)</strong></pre>

<h4>Standalone Module</h4>

<p>The following is a template of standalone module:</p>

<pre class="color-example">
&quot;&quot;&quot;doc-string&quot;&quot;&quot;

<span class="color-comment"># Define variables</span>
......

<span class="color-comment"># Define helper functions</span>
......

<span class="color-comment"># Define main function</span>
def main():
    &quot;&quot;&quot;The main function&quot;&quot;&quot;
    .......

<span class="color-comment"># Run the main function</span>
main()</pre>

<p>Example: [TODO]</p>

<h4>Packages</h4>

<p>Recall that a module contains attributes (such as variables, functions and classes). Relevant modules can be grouped into a package (kept in the same directory). Python also supports sub-packages (in sub-directories). Packages and sub-packages are a way of organizing Python's module namespace by using &quot;dotted module names&quot;, in the form of &quot;<code>&lt;pack_name&gt;.&lt;sub_pack_name&gt;.&lt;sub_sub_pack_name&gt;.&lt;module_name&gt;.&lt;attr_name&gt;</code>&quot;.</p>

<p>To create a Python package:</p>

<ol>
<li>Create a directory and named it your package's name.</li>
<li>Put your modules in it.</li>
<li>Create a <code>__init__.py</code> file in the directory</li>
</ol>

<p>The <code>__init__.py</code> marks the directory as a Python package. For example, suppose that you have this directory/file structure:</p>

<pre class="color-example">
myappdir/              <span class="color-comment"># This directory is in the sys.path</span>
   |
   + mypack/           <span class="color-comment"># A directory of modules</span>
        |
        + __init__.py  <span class="color-comment"># Mark this directory as a package called mypack</span>
        + mymod1.py    <span class="color-comment"># Reference as mypack.mymod1</span>
        + mymod2.py    <span class="color-comment"># Reference as mypack.mymod2</span></pre>

<p>If <code>myappdir</code> is in your <code>sys.path</code>, you can import <code>mymod1</code> as:</p>

<pre class="color-example">
import mypack.mymod1       <span class="color-comment"># To reference attr as mypack.mymod1.attr</span>
from mypack import mymod1  <span class="color-comment"># To reference attr as mymod1.attr</span></pre>

<p>Without the <code>__init__.py</code>, Python will NOT search the <code>mypack</code> directory for <code>mymod1</code>. Moreover, you cannot reference modules in the <code>mypack</code> directory directly (e.g., import mymod1) as it is not in the <code>sys.path</code>.</p>

<h5>Attributes in <span class="font-code">__init__.py</span></h5>

<p>The <code>__init__.py</code> file is usually empty, but it can be used to export selected portions of the package under more convenient name, hold convenience functions, etc.</p>

<p>The contents of the <code>__init__.py</code> module can be accessed via the package name. For example,</p>

<pre class="color-example">
import mypack              <span class="color-comment"># To reference attr in __init__.py as mypack.attr</span>
from mypack import myattr  <span class="color-comment"># To reference myattr in __init__.py as myattr</span></pre>

<h5>Sub-Packages</h5>

<p>A package can contain sub-packages too. For example,</p>

<pre class="color-example">
myappdir/              <span class="color-comment"># This directory is in the sys.path</span>
   |
   + mypack/
        |
        + __init__.py  <span class="color-comment"># Mark this directory as a package called mypack</span>
        + mymod1.py    <span class="color-comment"># Reference as mypack.mymod1</span>
        + mysubpack1/
             |
             + __init__.py  <span class="color-comment"># Mark this sub-directory as a sub-package called mysubpack1</span>
             + mymod2.py    <span class="color-comment"># Reference as mypack.mysubpack1.mymod2</span>
             + mymod3.py    <span class="color-comment"># Reference as mypack.mysubpack1.mymod3</span>
        + mysubpack2/
             |
             + __init__.py  <span class="color-comment"># Mark this sub-directory as a sub-package called mysubpack2</span>
             + mymod4.py    <span class="color-comment"># Reference as mypack.mysubpack2.mymod4</span></pre>

<p>Clearly, the package's dot structure corresponds to the directory structure.</p>

<h5>Relative <span class="font-code">from-import</span></h5>

<p>In the <code>from-import</code> statement, you can use <code>.</code> to refer to the current package and <code>..</code> to refer to the parent package.  For example, inside <code>mymod2.py</code>, you can write:</p>

<pre class="color-example">
<span class="color-comment"># The current package is mysubpack1, where mymod2 resides</span>
from . import mymod3     <span class="color-comment"># Current package</span>
from .. import mymod1    <span class="color-comment"># Parent package</span>
from .mymod2 import attr
from ..mysubpack2 import mymod4</pre>

<p>Take note that in Python, you write <code>.mymod2</code>, <code>..mysubpack2</code>, instead of <code>./mymod2</code>, <code>../mysubpack2</code>.</p>


<h3>Advanced Functions and Namespaces</h3>

<h4>Local Variables vs Global Variables</h4>

<p>Names created inside a function (i.e. within <code>def</code> statement) are local to the function and are available inside the function only.</p>

<p>Names created outside all functions are global to that particular module (or file), but not available to the other modules. Global variables are available inside all the functions defined in the module. Global-scope in Python is equivalent to module-scope or file-scope. There is no all-module-scope in Python.</p>

<p>For example,</p>

<pre class="color-example">
x = 'global'     <span class="color-comment"># x is a global variable for the module</span>
 
def myfun(arg):  <span class="color-comment"># arg is a local variable for the function</span>
    y = 'local'  <span class="color-comment"># y is also a local variable</span>
    
    <span class="color-comment"># Function can access both local and global variables</span>
    print(x)
    print(y)
    print(arg)
 
myfun('abc')
print(x)
#print(y)   <span class="color-comment"># locals are not visible outside the function</span>
#print(arg)</pre>


<h4>Function Variables</h4>

<p>In Python, you can assign a function to a variable. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>def square(n): return n * n</strong>

&gt;&gt;&gt; <strong>square(5)</strong>
25
&gt;&gt;&gt; <strong>sq = square</strong>   <span class="color-comment"># Assign function square to variable sq</span>
&gt;&gt;&gt; <strong>sq(5)</strong>
25
&gt;&gt;&gt; <strong>type(square)</strong>
&lt;class 'function'&gt;
&gt;&gt;&gt; <strong>type(sq)</strong>
&lt;class 'function'&gt;
&gt;&gt;&gt; <strong>square</strong>
&lt;function square at 0x7f0ba7040f28&gt;
&gt;&gt;&gt; <strong>sq</strong>
&lt;function square at 0x7f0ba7040f28&gt;  <span class="color-comment"># Exactly the same reference as square</span></pre>

<p>A variable in Python can hold anything, a value, a function or an object.</p>

<p>In Python, you can also assign a specific invocation of a function to a variable. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>def square(n): return n * n</strong>

&gt;&gt;&gt; <strong>sq5 = square(5)</strong>
&gt;&gt;&gt; <strong>sq5</strong>
25
&gt;&gt;&gt; <strong>type(sq5)</strong>
&lt;class 'int'&gt;</pre>

<h4>Nested Functions</h4>

<p>Python supports nested functions, i.e., defining a function inside a function.  For example,</p>

<pre class="color-example">
def outer(a):      <span class="color-comment"># Outer function</span>
    print('outer begin with arg =', a)
    x = 1  <span class="color-comment"># Define a local variable</span>

    <span class="color-comment"># Define an inner function</span>
    def inner(b):  
        print('inner begin with arg = %s' % b)
        y = 2
        print('a = %s, x = %d, y = %d' % (a, x, y))
            <span class="color-comment"># Have read-access to outer function's attributes</span>
        print('inner end')

    <span class="color-comment"># Call inner function defined earlier</span>
    inner('bbb')
    print('outer end')

<span class="color-comment"># Call outer function, which in turn calls the inner function</span> 
outer('aaa')</pre>

<p>The expected output is:</p>
<pre class="output">
outer begin with arg = aaa
inner begin with arg = bbb
a = aaa, x = 1, y = 2
inner end
outer end</pre>

<p>Take note that the inner function has read-access to all the attributes of the enclosing outer function, and the global variable of the module.</p>


<h4>Lambda Function</h4>
<p>Lambda functions are anonymous function or un-named function. They are used to inline a function definition, or to defer execution of certain codes. The syntax is:</p>

<pre class="color-syntax">
<strong>lambda</strong> <em>arg1</em>, <em>arg2</em>, ...<strong>:</strong> <em>return-expression</em></pre>

<p>For example,</p>
<pre class="color-example">
<span class="color-comment"># Define an ordinary function</span>
&gt;&gt;&gt; <strong>def f1(a, b, c): return a + b + c</strong>

&gt;&gt;&gt; <strong>f1(1, 2, 3)</strong>
6
&gt;&gt;&gt; <strong>type(f1)</strong>
&lt;class 'function'&gt;

<span class="color-comment"># Assign variable f2 to a function object</span>
&gt;&gt;&gt; <strong>f2 = lambda a, b, c: a + b + c</strong>

&gt;&gt;&gt; <strong>f2(1, 2, 3)</strong>  <span class="color-comment"># Invoke function</span>
6
&gt;&gt;&gt; <strong>type(f2)</strong>
&lt;class 'function'&gt;</pre>

<p><code>f1</code> and <code>f2</code> do the same thing. Take note that <code>return</code> keyword is NOT needed inside the lambda function.</p>

<p>Lambda function, like ordinary function, can have default values for its parameters.</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>f2 = lambda a, b=2, c=3: a + b + c</strong>
&gt;&gt;&gt; <strong>f2(1, 2, 3)</strong>
6
&gt;&gt;&gt; <strong>f2(8)</strong>
13</pre>


<h4>Functions are Objects</h4>

<p>In Python, functions are objects (like instances of a class).  Like any object,</p>
<ol>
<li>a function can be assigned to a <em>variable</em>;</li>
<li>a function can be passed into a function as an <em>argument</em>; and</li>
<li>a function can be the <em>return value</em> of a function.</li>
</ol>

<h5>Example: Passing a Function Object as a Function Argument</h5>

<p>A function name is a variable name that can be passed into another function as argument.</p>

<pre class="color-example">
def my_add(x, y):
    return x + y

def my_sub(x, y):
    return x - y

<span class="color-comment"># This function takes a function object as its first argument</span>
def my_apply(func, x, y):
    <span class="color-comment"># Invoke the function received</span>
    return func(x, y)

print(my_apply(my_add, 3, 2))  <span class="color-comment"># Output: 5</span>
print(my_apply(my_sub, 3, 2))  <span class="color-comment"># Output: 1</span>

<span class="color-comment"># We can also pass an anonymous function as argument</span>
print(my_apply(<strong>lambda x, y: x * y</strong>, 3, 2))  <span class="color-comment"># Output: 6</span></pre>

<h5>Example: Returning an Inner Function from an Outer Function</h5>

<pre class="color-example">
<span class="color-comment"># Define an outer function</span>
def my_outer():
    <span class="color-comment"># Outer has a function local variable</span>
    def my_inner():  
        print('hello from inner')

    <span class="color-comment"># Outer returns the inner function defined earlier</span>
    return my_inner

result = my_outer()  <span class="color-comment"># my_outer() returns a function object my_inner()</span>
result()             <span class="color-comment"># Invoke my_inner(). Output: 'hello from inner'</span>
print(result)        <span class="color-comment"># Output: '&lt;function inner at 0x7fa939fed410&gt;'</span></pre>

<h5>Example: Returning a Lambda Function</h5>

<pre class="color-example">
def increase_by(n):
    &quot;&quot;&quot;Return a one-argument function object&quot;&quot;&quot;
    return lambda x: x + n

plus_8 = increase_by(8)
plus_88 = increase_by(88)

print(plus_8(1))    <span class="color-comment"># 9</span>
print(plus_88(1))   <span class="color-comment"># 89</span>

<span class="color-comment"># Same as above with anonymous references</span>
print(increase_by(8)(1))   
print(increase_by(88)(1))</pre>

<h5>Function Closure</h5>
<p>In the above example, <code>n</code> is not local to the lambda function. Instead, <code>n</code> is obtained from the outer function.</p>

<p>When we assign <code>increase_by(8)</code> to <code>plus_8()</code>, <code>n</code> takes on the value of 8 during the invocation, and we expect <code>n</code> to go out of scope after the outer function terminates. In this case, calling <code>plus_8(1)</code> would encounter an non-existent <code>n</code>?</p>

<p>This problem is resolved via so called <em>Function Closure</em>. A closure is an inner function that is passed outside the enclosing function, to be used elsewhere. In brief, the inner function creates a closure (enclosure) for its enclosing namespaces at definition time. Hence, in <code>plus_8</code>, an enclosure with <code>n=8</code> is created; while in <code>plus_88</code>, an enclosure with <code>n=88</code> is created.  Take note that Python only allows the read access to the outer scope, but not assignment. You can inspect the enclosure via <code>function_name.func_closure</code>, e.g.,</p>

<pre class="color-example">
print(plus_8.func_closure)   <span class="color-comment"># (&lt;cell at 0x7f01c3909c90: int object at 0x16700f0&gt;,)</span>
print(plus_88.func_closure)  <span class="color-comment"># (&lt;cell at 0x7f01c3909c20: int object at 0x1670900&gt;,)</span>
</pre>

<h4><span class="font-code">filter()</span>, <span class="font-code">map()</span> and <span class="font-code">reduce()</span></h4>

<p>Instead of using a <code>for-in</code> loop to iterate through all the items in a iterable (sequence), you can use the following functions to apply an operation to all the items. This is known as <em>functional programming</em> or <em>expression-oriented programming</em>.</p>

<ul>
<li><code>filter(func, iterable)</code>: Return an iterator yielding those items of <code>iterable</code> for which <code>func(item)</code> is <code>True</code>. For example
<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [11, 22, 33, 44, 55]</strong>
&gt;&gt;&gt; <strong>filter(lambda x: x % 2 == 0, lst)</strong>
&lt;filter object at 0x7fc46f72b8d0&gt;
&gt;&gt;&gt; <strong>list(filter(lambda x: x % 2 == 0, lst))</strong>
[22, 44]
&gt;&gt;&gt; <strong>for item in filter(lambda x: x % 2 == 0, lst): print(item, end=' ')</strong>
22 44</pre>
</li>

<li><code>map(function, iterable)</code>: Apply (Map) the function on each item of the iterable. For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [11, 22, 33, 44, 55]</strong>
&gt;&gt;&gt; <strong>map(lambda x: x*x, lst)</strong>
&lt;map object at 0x7fc46f72b908&gt;
&gt;&gt;&gt; <strong>list(map(lambda x: x*x, lst))</strong>
[121, 484, 1089, 1936, 3025]
&gt;&gt;&gt; <strong>for item in map(lambda x: x*x, lst): print(item, end=' ')</strong>
121 484 1089 1936 3025</pre>
</li>

<li><code>reduce(function, iterable)</code> (in module <code>functools</code>): Apply the function of two arguments cumulatively to the items of a sequence, from left to right, so as to reduce the sequence to a single value. For example,
<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [11, 22, 33, 44, 55]</strong>
&gt;&gt;&gt; <strong>from functools import reduce</strong>
&gt;&gt;&gt; <strong>reduce(lambda x,y: x+y, lst)</strong>
165    <span class="color-comment"># (((11 + 22) + 33) + 44) + 55</span>
</pre>
</li>

<li>List comprehension: a one-liner to generate a list as discussed in the earlier section. e.g.,
<pre class="color-example">
&gt;&gt;&gt; <strong>lst = [x*x for x in range(1,10) if x % 2 == 0]</strong>
&gt;&gt;&gt; <strong>lst</strong>
[4, 16, 36, 64]</pre>
</li>

</ul>





<h4>Decorators</h4>

<p>In Python, a decorator is a callable (function) that takes a function as an argument and returns a replacement function. Recall that functions are objects in Python, i.e., you can pass a function as argument, and return a function. A decorator is a transformation of a function.  It can be used to pre-process the function arguments before passing them into the actual function; or extending the behavior of functions that you don't want to modify, such as ascertain that the user has logined and has the necessary permissions.</p>

<h5>Example: Decorating a Function</h5>
<pre class="color-example">
def clamp_range(func):
    <span class="color-comment">&quot;&quot;&quot;Decorator to clamp the value of the argument to [0,100]&quot;&quot;&quot;</span>
    def _wrapper(x):
        if x &lt; 0:
            x = 0
        elif x &gt; 100:
            x = 100
        return func(x)  <span class="color-comment"># Run the original function with clamped argument</span>
    return _wrapper

def square(x):
    return x**2

<span class="color-comment"># Invoke clamp_range() with square()</span>
print(clamp_range(square)(5))   <span class="color-comment"># 25</span>

<span class="color-comment"># Transforming the square() function by replacing it with a decorated version</span>
square = clamp_range(square)  
print(square(50))    <span class="color-comment"># Output: 2500</span>
print(square(-1))    <span class="color-comment"># Output: 0</span>
print(square(101))   <span class="color-comment"># Output: 10000</span></pre>

<p>Notes:</p>

<ol>
<li>The decorator <code>clamp_range()</code> takes a function as its argument, and return an replacement function <code>_wrapper()</code>. The <code>_wrapper()</code> clamps its argument to [0,100] before applying the original function.</li>

<li>In the statement <code>square = clamp_range(square)</code>, we decorate the <code>square()</code> and assign the decorated (replacement) function to the same function name (confusing?!). After the decoration, the <code>square()</code> takes on a new version!</li>
</ol>

<h5>Example: Using the <span class="font-code">@</span> symbol</h5>

<p>The syntax in the above example in decorating a function is messy (<code>square</code> is mentioned three times!). Instead, Python uses the <code>@</code> symbol to denote the replacement. For example,</p>

<pre class="color-example">
def clamp_range(func):
    <span class="color-comment">&quot;&quot;&quot;Decorator to clamp the value of the argument to [0,100]&quot;&quot;&quot;</span>
    def _wrapper(x):
        if x &lt; 0:
            x = 0
        elif x &gt; 100:
            x = 100
        return func(x)  <span class="color-comment"># Run the original function with clamped argument</span>
    return _wrapper

<span class="color-comment"># Use the decorator @ symbol
# Same as cube = clamp_range(cube)</span>
@clamp_range
def cube(x):
    return x**3

print(cube(50))    <span class="color-comment"># Output: 12500</span>
print(cube(-1))    <span class="color-comment"># Output: 0</span>
print(cube(101))   <span class="color-comment"># Output: 1000000</span>

print(clamp_range(cube)(5))  <span class="color-comment"># Output: 125</span></pre>

<p>For Java programmers, do not confuse the Python decorator <code>@</code> with Java's annotation.</p>

<h5>Example: Decorator with Arbitrary Number of Function Arguments</h5>

<p>The above example only work for one-argument function. You can use <code>*args</code> and/or <code>**kwargs</code> to handle variable number of arguments.  For example, the following decorator log all the arguments before the actual processing.</p>

<pre class="color-example">
def logger(func):
    <span class="color-comment">&quot;&quot;&quot;log all the function arguments&quot;&quot;&quot;</span>
    def _wrapper(*args, **kwargs):
        print('The arguments are: %s, %s' % (args, kwargs))
        return func(*args, **kwargs)  <span class="color-comment"># Run the decorated function</span>
    return _wrapper

@logger
def myfun(a, b, c=3, d=4):
    pass

myfun(1, 2, c=33, d=44)  <span class="color-comment"># Output: The arguments are: (1, 2), {'c': 33, 'd': 44}</span>
myfun(1, 2, c=33)        <span class="color-comment"># Output: The arguments are: (1, 2), {'c': 33}</span></pre>

<p>We can also modify our earlier <code>clamp_range()</code> to handle arbitrary number of arguments:</p>

<pre class="color-example">
def clamp_range(func):
    <span class="color-comment">&quot;&quot;&quot;Decorator to clamp the value of ALL arguments to [0,100]&quot;&quot;&quot;</span>
    def _wrapper(*args):
        newargs = []
        for item in args:
            if item &lt; 0:
                newargs.append(0)
            elif item &gt; 100:
                newargs.append(100)
            else:
                newargs.append(item)
        return func(*newargs)  <span class="color-comment"># Run the original function with clamped arguments</span>
    return _wrapper

@clamp_range
def my_add(x, y, z):
    return x + y + z

print(my_add(1, 2, 3))     <span class="color-comment"># Output: 6</span>
print(my_add(-1, 5, 109))  <span class="color-comment"># Output: 105</span></pre>

<h5>The <span class="font-code">@wraps</span> Decorator</h5>

<p>Decorator can be hard to debug. This is because it wraps around and replaces the original function and hides variables like <code>__name__</code> and <code>__doc__</code>.  This can be solved by using the <code>@wraps</code> of <code>functools</code>, which modifies the signature of the replacement functions so they look more like the decorated function. For example,</p>

<pre class="color-example">
from functools import wraps
  
def without_wraps(func):
    def _wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return _wrapper
 
def with_wraps(func):
    @wraps(func)
    def _wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return _wrapper
 
@without_wraps
def f1():
    <span class="color-comment">&quot;&quot;&quot;f1 doc string&quot;&quot;&quot;</span>
    pass
 
@with_wraps
def f2():
    <span class="color-comment">&quot;&quot;&quot;f2 doc string&quot;&quot;&quot;</span>
    pass

print(f1.__name__)  <span class="color-comment"># Output: _wrapper</span>
print(f1.__doc__)   <span class="color-comment"># Output: None</span>
print(f2.__name__)  <span class="color-comment"># Output: f2</span>
print(f2.__doc__)   <span class="color-comment"># Output: f2 doc string</span></pre>

<h5>Example: Passing Arguments into Decorators</h5>

<p>Let's modify the earlier <code>clamp_range</code> decorator to take two arguments - <code>min</code> and <code>max</code> of the range.</p>

<pre class="color-example">
from functools import wraps

def clamp_range(min, max):    <span class="color-comment"># Take the desired arguments instead of func</span>
    &quot;&quot;&quot;Decorator to clamp the value of ALL arguments to [min,max]&quot;&quot;&quot;
    def _decorator(func):     <span class="color-comment"># Take func as argument</span>
        @wraps(func)          <span class="color-comment"># For proper __name__, __doc__</span>
        def _wrapper(*args):  <span class="color-comment"># Call the original function here</span>
            newargs = []
            for item in args:
                if item &lt; min:
                    newargs.append(min)
                elif item &gt; max:
                    newargs.append(max)
                else:
                    newargs.append(item)
            return func(*newargs)  <span class="color-comment"># Run the original function with clamped arguments</span>
        return _wrapper
    return _decorator

@clamp_range(1, 10)
def add(x, y, z):
    <span class="color-comment">&quot;&quot;&quot;Clamped Add&quot;&quot;&quot;</span>
    return x + y + z
<span class="color-comment"># Same as</span>
<span class="color-comment"># add = clamp_range(min, max)(add)</span>
<span class="color-comment"># clamp_range(min, max) returns _decorator(func); apply add as func</span>

print(add(1, 2, 3))     <span class="color-comment"># Output: 6</span>
print(add(-1, 5, 109))  <span class="color-comment"># Output: 16 (1+5+10)</span>
print(add.__name__)     <span class="color-comment"># Output: add</span>
print(add.__doc__)      <span class="color-comment"># Output: Clamped Add</span></pre>

<p>The decorator <code>clamp_range</code> takes the desired arguments and returns a wrapper function which takes a function argument (for the function to be decorated).</p>

<h4>Namespace</h4>

<h5>Names, Namespaces and Scope</h5>

<p>In Python, a <em>name</em> is roughly analogous to a variable in other languages but with some extras. Because of the dynamic nature of Python, name is applicable to almost everything, including variable, function, class/instance, module/package.</p>

<p>Names defined inside a function are local. Names defined outside all functions are global for that module, and are accessible by all functions inside the module  (i.e., module-global scope). There is no all-module-global scope in Python.</p>

<p>A <em>namespace</em> is a collection of <em>names</em> (i.e., a space of names).</p>

<p>A scope refers to the part of the program from where a names can be accessed <em>without a prefix</em>. For example, local variables defined inside a function have local scope within that function. They are not available outside the function.</p>

<h5>Each Module has a Global Namespace</h5>

<p>A module is a file containing variables, functions and classes. Each module has its own global namespace. Hence, you cannot define two functions or classes of the same name within a module. But you can define functions of the same name in  different modules, as the namespaces are isolated.</p>

<p>When you launch the interactive shell, Python runs all the statements under a module called <code>__main__</code>, with its namespace. All the names are added into <code>__main__</code>'s namespace.</p>

<p>When you import a module via &quot;<code>import module_name</code>&quot; under the interactive shell, only the <code>module_name</code> is added into <code>__main__</code>'s namespace. You need to access the names inside <code>module_name</code> via <code>module_name.attr_name</code>. In other words, the imported module retains its own namespace.</p>

<p>However, if you import an attribute via &quot;<code>from module_name import attr_name</code>&quot; under the interactive shell, the <code>attr_name</code> is added into <code>__main__</code>'s namespace, and you can access the <code>attr_name</code> directly without prefixing with the <code>module_name</code>.</p>

<p>On the other hand, you you import a module inside another module (instead of interactive shell), the imported <code>module_name</code> is added into the target module's namespace (instead of <code>__main__</code>).</p>

<p>The built-in functions are kept in a module called <code>__builtin__</code>, which is imported into <code>__main__</code> automatically.</p>

<h5>The <span class="font-code">globals()</span>, <span class="font-code">locals()</span> and <span class="font-code">dir()</span> Built-in Functions</h5>

<p>You can list the names of the current scope via these built-in functions:</p>

<ul>
<li><code>globals()</code>: return a dictionary (name-value pairs) containing the current scope's global variables.</li>
<li><code>locals()</code>: return a dictionary (name-value pairs) containing the current scope's local variables. If <code>locals()</code> is issued in global scope, it returns the same outputs as <code>globals()</code>.</li>
<li><code>dir()</code>: return a list of local names in the current scope, which is equivalent to <code>locals().keys()</code>.</li>
<li><code>dir(obj)</code>: return a list of the local names for the given object.</li>
</ul>

<p>For example,</p>

<pre class="color-example">
$ python3
<span class="color-comment"># The current scope is the __main__ module's global scope.</span>

&gt;&gt;&gt; <strong>globals()</strong>  <span class="color-comment"># Global variable of the current scope</span>
{'__name__': '__main__',  <span class="color-comment"># module name</span>
 '__builtins__': &lt;module 'builtins' (built-in)&gt;,  <span class="color-comment"># Hook to built-in names</span>
 '__doc__': None,  <span class="color-comment"># Module's doc-string</span>
 '__package__': None,  <span class="color-comment"># package name</span>
 '__spec__': None,
 '__loader__': &lt;class '_frozen_importlib.BuiltinImporter'&gt;}

&gt;&gt;&gt; <strong>__name__</strong>  <span class="color-comment"># The module name of the current scope</span>
'__main__'
 
&gt;&gt;&gt; <strong>locals()</strong>
...same outputs as global() under the global-scope...

&gt;&gt;&gt; <strong>dir()</strong>  <span class="color-comment"># Names (local) only</span>
['__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__']

<span class="color-comment"># Add a name (global scope)</span>
&gt;&gt;&gt; <strong>x = 88</strong>
&gt;&gt;&gt; <strong>globals()</strong>
{'x': 88, ...}
&gt;&gt;&gt; <strong>dir()</strong>
['__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__', 'x']

<span class="color-comment"># import</span>
&gt;&gt;&gt; <strong>import random</strong>
&gt;&gt;&gt; <strong>globals()</strong>
{'x': 88,
 'random': &lt;module 'random' from '/usr/lib/python3.4/random.py'&gt;, ...}  <span class="color-comment"># Hook to the imported module</span>
&gt;&gt;&gt; <strong>from math import pi</strong>
&gt;&gt;&gt; <strong>globals()</strong>
{'x': 88,
 'pi': 3.141592653589793,  <span class="color-comment"># Added directly into global namespace</span>
 'random': &lt;module 'random' from '/usr/lib/python3.4/random.py'&gt;, ...}</pre>

<p>To show the difference between locals and globals, we need to define a function to create a local scope. For example,</p>

<pre class="color-example">
$ python3
&gt;&gt;&gt; <strong>x = 88</strong>  <span class="color-comment"># x is a global variable</span>

&gt;&gt;&gt; <strong>def myfun(arg):</strong>  <span class="color-comment"># arg is a local variable</span>
   <strong>y = 99</strong>            <span class="color-comment"># y is a local variable</span>
   <strong>print(x)</strong>          <span class="color-comment"># Can read global</span>
   <strong>print(globals())
   print(locals())</strong>
   <strong>print(dir())</strong>
   
&gt;&gt;&gt; <strong>myfun(11)</strong>
88
{'__builtins__': &lt;module 'builtins' (built-in)&gt;,  <span class="color-comment"># Name-value pairs of globals</span>
 'myfun': &lt;function myfun at 0x7f550d1b5268&gt;,
 '__name__': '__main__',
 '__package__': None,
 '__spec__': None,
 '__doc__': None,
 '__loader__': &lt;class '_frozen_importlib.BuiltinImporter'&gt;,
 'x': 88}             
{'y': 99, 'arg': 11}  <span class="color-comment"># Name-value pairs of locals</span>
['arg', 'y']          <span class="color-comment"># Names only of locals</span></pre>

<h5>More on Module's Global Namespace</h5>

<p>Let's create two modules: <code>mod1</code> and <code>mod2</code>, where <code>mod1</code> imports <code>mod2</code>, as follows:</p>

<pre class="color-example">
&quot;&quot;&quot;mod1.py: Module 1&quot;&quot;&quot;
import mod2

mod1_var = 'mod1 global variable'
print('Inside mod1, __name__ = ', __name__)

if __name__ == '__main__':
    print('Run module 1')</pre>
    
<pre class="color-example">
&quot;&quot;&quot;mod2.py: Module 2&quot;&quot;&quot;

mod2_var = 'mod2 global variable'
print('Inside mod2, __name__ = ', __name__)

if __name__ == '__main__':
    print('Run module 2')</pre>
    
<p>Let's import <code>mod1</code> (which in turn import <code>mod2</code>) under the interpreter shell, and check the namespaces:</p>
        
<pre class="color-example">
$ python3
&gt;&gt;&gt; <strong>import mod1</strong>
Inside mod2, __name__ =  mod2
Inside mod1, __name__ =  mod1
&gt;&gt;&gt; <strong>dir()</strong>
['__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__', 'mod1']
&gt;&gt;&gt; <strong>dir(mod1)</strong>
['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'mod1_var', 'mod2']
&gt;&gt;&gt; <strong>dir(mod2)</strong>
NameError: name 'mod2' is not defined
&gt;&gt;&gt; <strong>dir(mod1.mod2)</strong>
['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'mod2_var']</pre>

<p>Take note that the current scope's <code>__name__</code> is <code>'__main__'</code>. It's namespace contains <code>'mod1'</code> (imported).  The <code>'mod1'</code>'s namespace contains <code>'mod2'</code> (imported) and <code>'mod1_var'</code>. To refer <code>mod2</code>, you need to go thru <code>mod1</code>, in the form of <code>mod1.mod2</code>. The <code>mod2</code>'s namespace contains <code>mod2_var</code>.</p>

<p>Now, let run <code>mod1</code> instead, under IDLE3, and check the namespaces:</p>
    
<pre class="color-example">
Inside mod2, __name__ =  mod2
Inside mod1, __name__ =  __main__
Run module 1
&gt;&gt;&gt; <strong>dir()</strong>
['__builtins__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'mod1_var', 'mod2']
&gt;&gt;&gt; <strong>dir(mod2)</strong>
['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'mod2_var']</pre>

<p>Take note that the current scope's name is again '__main__', which is the executing module <code>mod1</code>. Its namespace contains <code>mod2</code> (imported) and <code>mod1_var</code>.</p>

<h5>Name Resolution</h5>

<p>When you ask for a name (variable), says <code>x</code>, Python searches the LEGB namespaces, in this order, of the current scope:</p>
<ol>
<li>L: local namespace which is specific to the current function</li>
<li>E: for nested function, the enclosing function's namespace.</li>
<li>G: global namespace for the current module</li>
<li>B: built-in namespace for all the modules</li>
</ol>
<p>If <code>x</code> cannot be found, Python raises a <code>NameError</code>.</p>

<h5>Modifying Global Variables inside a Function</h5>

<p>Recall that names created inside a function are local, while names created outside all functions are global for that module. You can &quot;read&quot; the global variables inside all functions defined in that module. For example,</p>

<pre class="color-example">
x = 'global'     <span class="color-comment"># Global file-scope</span>
 
def myfun():
    y = 'local'  <span class="color-comment"># Function local-scope</span>
    print(y)
    print(x)     <span class="color-comment"># Can read global variable</span>
 
myfun()
print(x)
#print(y)        <span class="color-comment"># Local out-of-scope</span></pre>

<p>If you assign a value to a name inside a function, a local name is created, which hides the global name. For example,</p>

<pre class="color-example">
x = 'global'      <span class="color-comment"># Global file-scope</span>
 
def myfun():
    x = 'change'  <span class="color-comment"># Local x created which hides the global x</span>
    print(x)      <span class="color-comment"># Show local. Global is hidden</span>
 
myfun()
print(x)          <span class="color-comment"># Global does not change</span></pre>

<p>To modify a global variable inside a function, you need to use a <code>global</code> statement to declare the name global; otherwise, the modification (assignment) will create a local variable (see above). For example,</p>

<pre class="color-example">
x = 'global'      <span class="color-comment"># Global file-scope</span>
 
def myfun():
    global x      <span class="color-comment"># Declare x global, needed to modify global variable</span>
    x = 'change'  <span class="color-comment"># Else, a local x created which hides the global x</span>
    print(x)
 
myfun()
print(x)          <span class="color-comment"># Global changes</span></pre>


<p>For nested functions, you need to use the <code>nonlocal</code> statement in the inner function to modify names in the enclosing outer function. For example,</p>

<pre class="color-example">
def outer():        <span class="color-comment"># Outer function</span>
    count = 0
    
    def inner():    <span class="color-comment"># Inner function</span>
        nonlocal count  <span class="color-comment"># Needed to modify count</span>
        count += 1      <span class="color-comment"># Else, a local created, which hides the outer</span>

    print(count)    <span class="color-comment"># Output: 0</span>
    inner()         <span class="color-comment"># Call inner function</span>
    print(count)    <span class="color-comment"># Output: 1</span>

<span class="color-comment"># Call outer function</span> 
outer()</pre>


<p>To modify a global variable inside a nested function, declare it via <code>global</code> statement too. For example,</p>

<pre class="color-example">
count = 100

def outer():
    count = 0         <span class="color-comment"># Local created, hide global</span>
    
    def inner():
        global count  <span class="color-comment"># Needed to modify global</span>
        count += 1    <span class="color-comment"># Else, a local created, which hides the outer</span>

    print(count)      <span class="color-comment"># Output: 0</span>
    inner()           <span class="color-comment"># Call inner function</span>
    print(count)      <span class="color-comment"># Output: 0</span>

<span class="color-comment"># Call outer function</span> 
outer()
print(count)          <span class="color-comment"># Output: 101</span></pre>




<p>In summary,</p>

<ol>
<li>The order for name resolution (for names inside a function) is: local, enclosing function for nested <code>def</code>, global, and then the built-in namespaces (i.e., LEGB).</li>
<li>However, if you assign a new value to a name, a local name is created, which hides the global name.</li>
<li>You need to declare via <code>global</code> statement to modify globals inside the function. Similarly, you need to declare via <code>nonlocal</code> statement to modify enclosing local names inside the nested function.</li>
</ol>

<h5>More on <span class="font-code">global</span> Statement</h5>

<p>The <code>global</code> statement is necessary if you are changing the reference to an object (e.g. with an assignment). It is not needed if you are just mutating or modifying the object. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>a = []</strong>
&gt;&gt;&gt; <strong>def myfun():</strong>
       <strong>a.append('hello')</strong>   <span class="color-comment"># Do not need global</span>
 
&gt;&gt;&gt; <strong>myfun()</strong>
&gt;&gt;&gt; <strong>a</strong>
['hello']</pre>

<p>In the above example, we modify the contents of the array. The <code>global</code> statement is not needed.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>a = 1</strong>
&gt;&gt;&gt; <strong>def myfun():</strong>
       <strong>global a</strong>
       <strong>a = 8</strong>

&gt;&gt;&gt; <strong>myfun()</strong>
&gt;&gt;&gt; <strong>a</strong>
8</pre>

<p>In the above example, we are modifying the reference to the variable. <code>global</code> is needed, otherwise, a local variable will be created inside the function.</p>

<h5>Built-in Namespace</h5>

<p>The built-in namespace is defined in the <code>__builtins__</code> module, which contains built-in functions such as <code>len()</code>, <code>min()</code>, <code>max()</code>, <code>int()</code>, <code>float()</code>, <code>str()</code>, <code>list()</code>, <code>tuple()</code> and etc. You can use <code>help(__builtins__)</code> or <code>dir(__builtins__)</code> to get the information on the <code>__builtins__</code> module.</p>

<p>[TODO]</p>

<h5><span class="font-code">del</span> Statement</h5>

<p>You can use <code>del</code> statement to remove names from the namespace, for example,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>del x, pi</strong>     <span class="color-comment"># delete variables or imported attributes</span>
&gt;&gt;&gt; <strong>globals()</strong>
...... x and pi removed ......
&gt;&gt;&gt; <strong>del random</strong>    <span class="color-comment"># remove imported module</span>
&gt;&gt;&gt; <strong>globals()</strong>
...... random module removed ......</pre>

<p>If you accidentally override a built-in function, you could use <code>del</code> to remove it from the namespace to recover the function from the built-in space.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>len = 8</strong>       <span class="color-comment"># Override built-in function len() (for length)</span>
&gt;&gt;&gt; <strong>len('abc')</strong>    <span class="color-comment"># built-in function len() no longer available</span>
TypeError: 'int' object is not callable
&gt;&gt;&gt; <strong>del len</strong>       <span class="color-comment"># Delete len from global and local namespace</span>
&gt;&gt;&gt; <strong>len('abc')</strong>    <span class="color-comment"># built-in function len() is available</span>
3</pre>




<h3>File Input/Output</h3>

<h4>File Objects</h4>

<p>Python provides built-in functions to support file input/output:</p>

<ul>
<li><code>open(filename, mode)</code>: creates a file object. The valid <code>mode</code>s are: <code>'r'</code> (read-only, default), <code>'w'</code> (write - erase all contents for existing file), <code>'a'</code> (append), <code>'r+'</code> (read and write).  You can also use <code>'rb'</code>, <code>'wb'</code>, <code>'ab'</code>, <code>'rb+'</code> for binary mode.</li>

<li><code>file.close()</code>: closes the file object.</li>

<li><code>file.readline()</code>: reads a single line (up to newline and including the newline). It returns an empty string after the end-of-file.</li>

<li><code>fileread()</code>: reads the entire file. It returns an empty string after the end-of-file.</li>

<li><code>file.write(string)</code>: writes the <code>string</code> to file.</li>

<li><code>file.tell()</code>: returns the &quot;current position&quot;. The &quot;current position&quot; is the number of bytes from the beginning of the file in binary mode, and an opaque number in text mode.</li>

<li><code>file.seek(offset)</code>: sets the &quot;current position&quot; to <code>offset</code> from the beginning of the file.</li>
</ul>

<p>In Python, use the built-in function . For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>f = open('test.txt', 'w')</strong>  <span class="color-comment"># create (open) a file for write</span>
&gt;&gt;&gt; <strong>f.write('apple\n')</strong>         <span class="color-comment"># write given string to file</span>
&gt;&gt;&gt; <strong>f.write('orange\n')</strong>
&gt;&gt;&gt; <strong>f.close()</strong>                  <span class="color-comment"># close the file</span>
 
&gt;&gt;&gt; <strong>f = open('test.txt', 'r')</strong>  <span class="color-comment"># create (open) a file for read (default)</span>
&gt;&gt;&gt; <strong>f.readline()</strong>               <span class="color-comment"># read till newline</span>
'apple\n'
&gt;&gt;&gt; <strong>f.readline()</strong>
'orange\n'
&gt;&gt;&gt; <strong>f.readline()</strong>               <span class="color-comment"># return empty string after end-of-file</span>
''
&gt;&gt;&gt; <strong>f.close()</strong>
 
&gt;&gt;&gt; <strong>f = open('test.txt', 'r')</strong>
&gt;&gt;&gt; <strong>f.read()</strong>                   <span class="color-comment"># read entire file</span>
'apple\norange\n'
&gt;&gt;&gt; <strong>f.close()</strong>

<span class="color-comment"># Test tell() and seek()</span>
&gt;&gt;&gt; <strong>f = open('test.txt', 'r')</strong>
&gt;&gt;&gt; <strong>f.tell()</strong>
0
&gt;&gt;&gt; <strong>f.read()</strong>
'apple\norange\n'
&gt;&gt;&gt; <strong>f.tell()</strong>
13
&gt;&gt;&gt; <strong>f.read()</strong>
''
&gt;&gt;&gt; <strong>f.seek(0)</strong>  <span class="color-comment"># Rewind</span>
0
&gt;&gt;&gt; <strong>f.read()</strong>
'apple\norange\n'
&gt;&gt;&gt; <strong>f.close()</strong></pre>


<h5>Iterating through Files</h5>
<p>You can also process line-by-line via a for-in loop.</p>

<pre class="color-example">
with open('test.txt') as f:  <span class="color-comment"># auto close the file upon exit</span>
    for line in f:
        line = line.rstrip()   <span class="color-comment"># strip trailing spaces and newline</span>
        print(line)

<span class="color-comment"># Same as above</span>
f = open('test.txt', 'r')
for line in f:
    print(line.rstrip())
f.close()</pre>

<p>Each line includes newline. For example,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>f = open('temp.txt', 'w')</strong>
&gt;&gt;&gt; <strong>f.write('apple\n')</strong>
6
&gt;&gt;&gt; <strong>f.write('orange\n')</strong>
7
&gt;&gt;&gt; <strong>f.close()</strong>

&gt;&gt;&gt; <strong>f = open('temp.txt', 'r')</strong>
&gt;&gt;&gt; <strong>for line in f: print(line, end='')</strong>  <span class="color-comment"># line includes a newline, disable print()'s newline</span>
apple
orange
&gt;&gt;&gt; <strong>f.close()</strong>
</pre>


<h3>Assertion and Exception Handling</h3>

<h4><span class="font-code">assert</span> Statement</h4>

<p>You can use assert statement to test a certain assertion (or constraint). For example, if x is supposed to be 0 in a certain part of the program, you can use the <code>assert</code> statement to test this constraint. An <code>AssertionError</code> will be raised if x is not zero.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>x = 0</strong>
&gt;&gt;&gt; <strong>assert x == 0, 'x is not zero?!'</strong>
 
&gt;&gt;&gt; <strong>x = 1</strong>
&gt;&gt;&gt; <strong>assert x == 0, 'x is not zero?!'</strong>
......
AssertionError: x is not zero?!</pre>

<p>The assertions are always executed.</p>

<p>The syntax is:</p>

<pre class="color-syntax">
assert <em>test</em>, <em>error-message</em></pre>

<p>If the <code><em>test</em></code> if <code>True</code>, nothing happens; otherwise, an <code>AssertionError</code> will be raised with the <code><em>error-message</em></code>.</p>

<h4>Exceptions</h4>

<p>In Python, errors detected during execution are called exceptions. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>1/0</strong>        <span class="color-comment"># Divide by 0</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">ZeroDivisionError: division by zero</span>
&gt;&gt;&gt; <strong>zzz</strong>        <span class="color-comment"># Variable not defined</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">NameError: name 'zzz' is not defined</span>
&gt;&gt;&gt; <strong>'1' + 1</strong>    <span class="color-comment"># Cannot concatenate string and int</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">TypeError: Can't convert 'int' object to str implicitly</span>

&gt;&gt;&gt; <strong>lst = [0, 1, 2]</strong>
&gt;&gt;&gt; <strong>lst[3]</strong>        <span class="color-comment"># Index out of range</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">IndexError: list index out of range</span>
&gt;&gt;&gt; <strong>lst.index(8)</strong>  <span class="color-comment"># Item is not in the list</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">ValueError: 8 is not in list</span>

&gt;&gt;&gt; <strong>int('abc')</strong>    <span class="color-comment"># Cannot parse this string into int</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">ValueError: invalid literal for int() with base 10: 'abc'</span>

&gt;&gt;&gt; <strong>tup = (1, 2, 3)</strong>
&gt;&gt;&gt; <strong>tup[0] = 11</strong>    <span class="color-comment"># Tuple is immutable</span>
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
<span class="color-error">TypeError: 'tuple' object does not support item assignment</span></pre>

<p>Whenever an exception is raised, the program terminates <em>abruptly</em>.</p>

<h4><span class="font-code">try-except-else-finally</span> Statement</h4>

<p>You can use <code>try-except-else-finally</code> exception handling facility to prevent the program from terminating <em>abruptly</em>.</p>

<h5>Example 1: Handling Index out-of-range for List Access</h5>

<pre class="color-example">
def get_item(seq, index):
    &quot;&quot;&quot;Return the indexed item of the given sequences.&quot;&quot;&quot;
    try:
        result = seq[index]   <span class="color-comment"># may raise IndexError</span>
        print('try succeed')      
    except IndexError:
        result = 0
        print('Index out of range')
    except:        <span class="color-comment"># run if other exception is raised</span>
        result = 0
        print('other exception')
    else:          <span class="color-comment"># run if no exception raised</span>
        print('no exception raised')
    finally:       <span class="color-comment"># always run regardless of whether exception is raised</span>
        print('run finally')

    <span class="color-comment"># Next statements after try-exception-finally</span>
    print('continue after try-except')
    return result
 
print(get_item([0, 1, 2, 3], 1))  <span class="color-comment"># Index within the range</span>
print('-----------')
print(get_item([0, 1, 2, 3], 4))  <span class="color-comment"># Index out of range</span></pre>

<p>The expected outputs are:</p>

<pre class="output">
try succeed
no exception raised
run finally
continue after try-except
1
-----------
Index out of range
run finally
continue after try-except
0</pre>

<p>The exception handling process for <code>try-except-else-finally</code> is:</p>

<ol>
<li>Python runs the statements in the <code>try</code>-block.</li>

<li>If no exception is raised in all the statements of the <code>try</code>-block, all the <code>except</code>-blocks are skipped, and the program continues to the next statement after the <code>try-except</code> statement.</li>

<li>However, if an exception is raised in one of the statement in the <code>try</code>-block, the rest of <code>try</code>-block will be skipped. The exception is matched with the <code>except</code>-blocks. The first matched <code>except</code>-block will be executed. The program then continues to the next statement after the <code>try-except</code> statement, instead of terminates abruptly. Nevertheless, if none of the <code>except</code>-blocks is matched, the program terminates abruptly.</li>

<li>The <code>else</code>-block will be executable if no exception is raised.</li>

<li>The <code>finally</code>-block is always executed for doing house-keeping tasks such as closing the file and releasing the resources.</li>
</ol>

<p>The syntax for <code>try-except-else-finally</code> is:</p>
<pre class="color-syntax">
try:
    <em>statements</em>
except <em>exception-1</em>:                <span class="color-comment"># Catch one exception</span>
    <em>statements</em>
except (<em>exception-2</em>, <em>exception-3</em>): <span class="color-comment"># Catch multiple exceptions</span>
    <em>statements</em>
except <em>exception-4</em> as <em>var_name</em>:    <span class="color-comment"># Retrieve the exception instance</span>
    <em>statements</em>
except:         <span class="color-comment"># For (other) exceptions</span>
    <em>statements</em>
else:
    <em>statements</em>   <span class="color-comment"># Run if no exception raised</span>
finally:
    <em>statements</em>   <span class="color-comment"># Always run regardless of whether exception raised</span></pre>

<p>The <code>try</code>-block (mandatory) must follow by at least one <code>except</code> or <code>finally</code> block. The rests are optional.</p>

<p>CAUTION: Python 2 uses older syntax of &quot;<code>except <em>exception-4</em>, <em>var_name</em>:</code>&quot;, which should be re-written as &quot;<code>except <em>exception-4</em> as <em>var_name</em>:</code>&quot; for portability.</p>

<h5>Example 2: Input Validation</h5>

<pre class="color-example">
&gt;&gt;&gt; <strong>while True:</strong>
       <strong>try:</strong>
           <strong>x = int(input('Enter an integer: '))</strong>  <span class="color-comment"># Raise ValueError if input cannot be parsed into int</span>
           <strong>break</strong>
       <strong>except ValueError:</strong>
           <strong>print('Wrong input! Try again...')</strong>

Enter an integer: abc
Wrong input! Try again...
Enter an integer: 11.22
Wrong input! Try again...
Enter an integer: 123</pre>

<h4><span class="font-code">raise</span> Statement</h4>

<p>You can manually raise an exception via raise statement, for example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>raise IndexError('out-of-range')</strong>
......
IndexError: out-of-range</pre>

<p>The syntax is:</p>
<pre class="color-syntax">
raise <em>exception_class_name</em>     <span class="color-comment"># E.g. raise IndexError</span>
raise <em>exception_instance_name</em>  <span class="color-comment"># E.g. raise IndexError('out of range')</span>
raise                          <span class="color-comment"># Re-raise the most recent exception for propagation</span></pre>

<p>A <code>raise</code> without argument in the <code>except</code> block re-raise the exception to the outer block, e.g.,</p>

<pre class="color-example">
try:
    ......
except:
    raise   <span class="color-comment"># re-raise the exception</span></pre>


<h4>Built-in Exceptions</h4>

<ul>
<li><code>BaseException</code>, <code>Exception</code>, <code>StandardError</code>: base classes</li>
<li><code>ArithmeticError</code>: for <code>OverflowError</code>, <code>ZeroDivisionError</code>, <code>FloatingPointError</code>.</li>
<li><code>BufferError</code>:</li>
<li><code>LookupError</code>: for <code>IndexError</code>, <code>KeyError</code>.</li>
<li><code>Environment</code>: for <code>IOError</code>, <code>OSError</code>.</li>

<li>[TODO] more</li>
</ul>

<h4>User-defined Exception</h4>

<p>You can defined your own exception by sub-classing the <code>Exception</code> class.</p>

<h5>Example</h5>

<pre class="color-example">
class MyCustomError(Exception):  <span class="color-comment"># Sub-classing Exception class</span>
    &quot;&quot;&quot;My custom exception&quot;&quot;&quot;

    def __init__(self, value):
        &quot;&quot;&quot;Constructor&quot;&quot;&quot;
        self.value = value

    def __str__(self):
        return repr(self.value)

<span class="color-comment"># Test the exception defined</span>
try:
    raise MyCustomError('an error occurs')
    print('after exception')
except MyCustomError as e:
    print('MyCustomError: ', e.value)
else:
    print('running the else block')
finally:
    print('always run the finally block')</pre>

<h4><span class="font-code">with-as</span> Statement and Context Managers</h4>

<p>The syntax of the <code>with</code> statement is as follows:</p>

<pre class="color-syntax">
with ... as ...:
    statements
   
<span class="color-comment"># More than one items</span>
with ... as ..., ... as ..., ...:
    statements</pre>

<p>Pythons <code>with</code> statement supports the concept of a runtime context defined by a context manager. In programming, context can be seen as a bucket to pass information around, i.e., the state at a point in time. Context Managers are a way of allocating and releasing resources in the context.</p>

<h5>Example 1</h5>

<pre class="color-example">
with open('test.log', 'r') as infile:  <span class="color-comment"># automatically close the file at the end of with</span>
    for line in infile:
        print(line)</pre>

<p>This is equivalent to:</p>

<pre class="color-example">
infile = open('test.log', 'r')
try:
    for line in infile:
        print(line)
finally:
    infile.close()</pre>

<p>The with-statement's context manager acquires, uses, and releases the context (of the file) cleanly, and eliminate a bit of boilerplate.</p>

<p>The <code>with-as</code> statement is  applicable to certain objects only, such as file; while <code>try-finally</code> can be applied to all.</p>

<h5>Example 2:</h5>

<pre class="color-example">
<span class="color-comment"># Copy file</span>
with open('in.txt', 'r') as infile, open('out.txt', 'w') as outfile:
    for line in infile:
        outfile.write(line)</pre>

   

<h3>Commonly-Used Python Standard Library Modules</h3>

<p>Python provides a set of standard library.</p>

<p>To use a module, use <code>import module_name</code> or <code>from module_name import attribute_name</code> to import the entire module or selected attribute.  You can use built-in functions <code>dir(module_name)</code> to list all the attributes, <code>help(module_name)</code> or <code>help(attribute_name)</code> to check the man (manual) page.  For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import math</strong>   <span class="color-comment"># import an external module</span>
&gt;&gt;&gt; <strong>dir(math)</strong>     <span class="color-comment"># List all attributes</span>
['e', 'pi', 'sin', 'cos', 'tan', 'tan2', ....]
&gt;&gt;&gt; <strong>help(math)</strong>    <span class="color-comment"># Show the man page for the module</span>
......
&gt;&gt;&gt; <strong>help(math.atan2)</strong>  <span class="color-comment"># Show the man page for a specific function</span>
......
&gt;&gt;&gt; <strong>math.atan2(3, 0)</strong>
1.5707963267948966
&gt;&gt;&gt; <strong>math.sin(math.pi / 2)</strong>
1.0
&gt;&gt;&gt; <strong>math.cos(math.pi / 2)</strong>
6.123233995736766e-17

&gt;&gt;&gt; <strong>from math import pi</strong>  <span class="color-comment"># import an attribute from a module</span>
&gt;&gt;&gt; <strong>pi / 2</strong>
1.5707963267948966</pre>

<h4><span class="font-code">math</span> and <span class="font-code">cmath</span> Modules</h4>

<p>The <code>math</code> module provides access to the mathematical functions defined by the C language standard. The commonly-used attributes are:</p>

<ul>
<li>Constants: <code>pi</code>, <code>e</code>.</li>
<li>Power and exponent: <code>pow(x,y)</code>, <code>sqrt(x)</code>, <code>exp(x)</code>, <code>log(x)</code>, <code>log2(x)</code>, <code>log10(x)</code></li>
<li><code>ceil(x)</code>, <code>floor(x)</code>, <code>trunc(x)</code>.</li>
<li><code>fabs()</code>, <code>fmod()</code></li>
<li><code>hypot(x,y)</code> (<code>=sqrt(x*x + y*y)</code>)</li>
<li><code>degrees(x)</code>, <code>radians(x)</code>.</li>
<li>Trigonometric functions: <code>sin(x)</code>, <code>cos(x)</code>, <code>tan(x)</code>, <code>acos(x)</code>, <code>asin(x)</code>, <code>atan(x)</code>, <code>atan2(x,y)</code>.</li>
<li>Hyperbolic functions: <code>sinh(x)</code>, <code>cosh(x)</code>, <code>tanh(x)</code>, <code>asinh(x)</code>, <code>acosh(x)</code>, <code>atanh(x)</code>.</li>
</ul>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import math</strong>
&gt;&gt;&gt; <strong>dir(math)</strong>
......
&gt;&gt;&gt; <strong>help(math)</strong>
......
&gt;&gt;&gt; <strong>help(math.trunc)</strong>
......

&gt;&gt;&gt; <strong>x = 1.5</strong>
&gt;&gt;&gt; <strong>math.floor(x)</strong>
1
&gt;&gt;&gt; <strong>math.ceil(x)</strong>
2
&gt;&gt;&gt; <strong>math.trunc(8.8)</strong>
8
&gt;&gt;&gt; <strong>math.floor(8.8)</strong>
8
&gt;&gt;&gt; <strong>math.trunc(-8.8)</strong>
-8
&gt;&gt;&gt; <strong>math.floor(-8.8)</strong>
-9</pre>

<p>In addition, the <code>cmath</code> module provides mathematical functions for complex numbers. See Python documentation for details.</p>


<h4><span class="font-code">statistics</span> Module</h4>

<p>The <code>statistics</code> module computes the basic statistical properties (such as mean, median, variance, etc.). For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import statistics</strong>
&gt;&gt;&gt; <strong>dir(statistics)</strong>
['mean', 'median', 'median_grouped', 'median_high', 'median_low', 'mode', 'pstdev', 'pvariance', 'stdev', 'variance', ...]
&gt;&gt;&gt; <strong>help(statistics)</strong>
......
&gt;&gt;&gt; <strong>help(statistics.pstdev)</strong>
......

&gt;&gt;&gt; <strong>data = [5, 7, 8, 3, 5, 6, 1, 3]</strong>
&gt;&gt;&gt; <strong>statistics.mean(data)</strong>
4.75
&gt;&gt;&gt; <strong>statistics.median(data)</strong>
5.0
&gt;&gt;&gt; <strong>statistics.stdev(data)</strong>
2.3145502494313788
&gt;&gt;&gt; <strong>statistics.variance(data)</strong>
5.357142857142857
&gt;&gt;&gt; <strong>statistics.mode(data)</strong>
statistics.StatisticsError: no unique mode; found 2 equally common values</pre>

<h4><span class="font-code">random</span> Module</h4>

<p>The module <code>random</code> can be used to generate various pseudo-random numbers.</p>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import random</strong>
&gt;&gt;&gt; <strong>dir(random)</strong>
......
&gt;&gt;&gt; <strong>help(random)</strong>
......
&gt;&gt;&gt; <strong>help(random.random)</strong>
......

&gt;&gt;&gt; <strong>random.random()</strong>       <span class="color-comment"># float in [0,1)</span>
0.7259532743815786
&gt;&gt;&gt; <strong>random.random()</strong>
0.9282534690123855
&gt;&gt;&gt; <strong>random.randint(1, 6)</strong>  <span class="color-comment"># int in [1,6]</span>
3
&gt;&gt;&gt; <strong>random.randrange(6)</strong>   <span class="color-comment"># from range(6), i.e., 0 to 5</span>
0
&gt;&gt;&gt; <strong>random.choice(['apple', 'orange', 'banana'])</strong>
'apple'</pre>

<h4><span class="font-code">sys</span> Module</h4>

<p>The module <code>sys</code> provides system-specific parameters and functions. The commonly-used are:</p>

<ul>
<li><strong><code>sys.exit([<em>exit-status</em>|0])</code></strong>: exit the program by raising the <code>SystemExit</code> exception. If used inside a <code>try</code>, the <code>finally</code> clause is honored.<br />
The optional argument <code><em>exit-status</em></code> can be an integer (default to 0 for normal termination, or non-zero for abnormal termination); or any object (e.g., <code>sys.exit('an error message')</code>).
</li>

<li><strong><code>sys.path</code></strong>: A <code>list</code> of strings of search path for modules. Initialized from the environment variable <code>PYTHONPATH</code>, plus installation-dependent default entries. See earlier example.</li>

<li><strong><code>sys.stdin</code>, <code>sys.stdout</code>, <code>sys.stderr</code></strong>: standard input, output and error stream.</li>

<li><strong><code>sys.argv</code></strong>: A <code>list</code> of command-line arguments passed into the Python script. <code>argv[0]</code> is the script name. See example below.</li>
</ul>

<h5>Example: Command-Line Arguments</h5>

<p>The command-line arguments are kept in <code>sys.argv</code> as a <code>list</code>. For example, create the following script called &quot;<code>test_argv.py</code>&quot;:</p>

<pre class="color-example">
import sys
print(sys.argv)       <span class="color-comment"># Print command-line argument list</span>
print(len(sys.argv))  <span class="color-comment"># Print length of list</span></pre>

<p>Run the script:</p>

<pre class="color-command">
$ <strong>python test_argv.py</strong>
['test_argv.py']
1
 
$ <strong>python test_argv.py hello 1 2 3 apple orange</strong>
['test_argv.py', 'hello', '1', '2', '3', 'apple', 'orange']   <span class="color-comment"># list of strings</span>
7</pre>

<h4><span class="font-code">os</span> Module</h4>
<p>The module <code>os</code> provides interface to the Operating System.</p>
<p>However,</p>
<ul>
<li>If you just want to read or write a file, use <code>open</code>.</li>
<li>If you just want to manipulate paths, use <code>os.path</code> module.</li>
<li>If you want to read all the lines in all the files on the command-line, use <code>fileinput</code> module.</li>
<li>To create temporary files/directories, use <code>tempfile</code> module.</li>
</ul> 

<p>The commonly-used attributes are:</p>

<ul>
<li><strong><code>os.mkdir(<em>path</em>[, <em>mode</em>|0777])</code></strong>: Create a directory with the given <em><code>mode</code></em> (masked by environment variable <code>umask</code>).</li>

<li><strong><code>os.mkdirs(<em>path</em>[, <em>mode</em>|0777])</code></strong>: Similar to <code>mkdir</code>, but create the intermediate sub-directories.</li>

<li><strong><code>os.getcwd()</code></strong>: Return current working directory (in a string).</li>

<li><strong><code>os.chdir(<em>path</em>)</code></strong>: Change the current working directory.</li>

<li><strong><code>os.system(<em>command</em>)</code></strong>: Run a shell command.</li>

<li><strong><code>os.getenv(<em>varname</em>[, <em>value</em>|None])</code></strong>: Returns the environment variable if it exists, or <code><em>value</em></code> if it doesn't, with default of <code>None</code>.</li>

<li><strong><code>os.putenv(<em>varname</em>, <em>value</em>)</code></strong>: Set environment variable to <em>value</em>.</li>

<li><strong><code>os.unsetenv(<em>varname</em>)</code></strong>: Delete the environment variable.</li>
</ul>

<p>For examples,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import os</strong>
&gt;&gt;&gt; <strong>dir(os)</strong>          <span class="color-comment"># List all attributes</span>
......
&gt;&gt;&gt; <strong>help(os)</strong>         <span class="color-comment"># Show man page</span>
......
&gt;&gt;&gt; <strong>help(os.getcwd)</strong>  <span class="color-comment"># Show man page for specific function</span>
......

&gt;&gt;&gt; <strong>os.getcwd()</strong>                   <span class="color-comment"># Get current working directory</span>
...<em>current working directory</em>...
&gt;&gt;&gt; <strong>os.listdir('.')</strong>               <span class="color-comment"># List the contents of the current directory</span>
...<em>contents of current directory</em>...
&gt;&gt;&gt; <strong>os.chdir('test-python')</strong>       <span class="color-comment"># Change directory</span>
&gt;&gt;&gt; <strong>exec(open('hello.py').read())</strong> <span class="color-comment"># Run a Python script</span>
&gt;&gt;&gt; <strong>os.system('ls -l')</strong>            <span class="color-comment"># Run shell command</span>
&gt;&gt;&gt; <strong>os.name</strong>                       <span class="color-comment"># Name of OS</span>
'posix'
&gt;&gt;&gt; <strong>os.makedirs(<em>dir</em>)</strong>              <span class="color-comment"># Create sub-directory</span>
&gt;&gt;&gt; <strong>os.remove(<em>file</em>)</strong>               <span class="color-comment"># Remove file</span>
&gt;&gt;&gt; <strong>os.rename(<em>oldFile</em>, <em>newFile</em>)</strong>   <span class="color-comment"># Rename file</span></pre>


<h4><span class="font-code">os.path</span> Module</h4>
<p>The <code>os.path</code> module implements some useful functions on pathnames. In Python, path means full-path filename; while dirname for directory name. </p>

<ul>
<li><strong><code>os.path.sep()</code></strong>: the directory separator, <code>'\'</code> for Windows and <code>'/'</code> for Unix/Mac.</li>

<li><strong><code>os.path.dirname(<em>path</em>)</code></strong>: Return the directory name of the given filename, by simply extracting its path.</li>

<li><strong><code>os.path.abspath(<em>path</em>)</code></strong>: Return the absolute pathname the given pathname.</li>

<li><strong><code>os.path.realpath(<em>path</em>)</code></strong>: Return the canonical path of the given filename, eliminating symlink.</li>

<li><strong><code>os.path.join(<em>path</em>, *<em>paths</em>)</code></strong>: Form path by joining one or more path components intelligently, without using platform-dependent path separator (<code>'/'</code> or <code>'\'</code>). For absolute path, begin with <code>os.path.sep</code>. See example below.</li>

<li><strong><code>os.path.exists(<em>path</em>)</code></strong>: Check if the given pathname exists.</li>

<li><strong><code>os.path.isfile(<em>path</em>)</code>, <code>os.path.isdir(<em>path</em>)</code>, <code>os.path.islink(<em>path</em>)</code></strong>: Check if the given pathname is a file, path, or symlink.</li>
</ul>

<p>EXAMPLE: For examples, when a module is loaded in Python, <code>__file__</code> is set to its name. You can then use that with other functions to find the directory that the file is located in.</p>

<pre class="color-example">
&quot;&quot;&quot;test_ospath.py (also create a symlink to this file called test_ospath_link.py)&quot;&quot;&quot;
import os

print(__file__)
print(os.path.dirname(__file__))   <span class="color-comment"># extract the path part of __file__</span>

print(os.path.abspath(__file__))                   <span class="color-comment"># absolute filename</span>
print(os.path.dirname(os.path.abspath(__file__)))  <span class="color-comment"># absolute directory</span>

print(os.path.realpath(__file__))                  <span class="color-comment"># filename with symlink resolved</span>
print(os.path.dirname(os.path.realpath(__file__))) <span class="color-comment"># directory name with symlink resolved</span>

<span class="color-comment"># Form path with os.path.join, without '/' or '\' for portability</span>
print(os.path.join(os.path.dirname(__file__), '..'))             <span class="color-comment"># parent directory</span>
print(os.path.join(os.path.sep, 'etc', 'apache2', 'httpd.conf')) <span class="color-comment"># /etc/apache2/httpd.conf</span>
print(os.path.join('etc', 'apache2', 'httpd.conf'))              <span class="color-comment"># etc/apache2/httpd.conf</span></pre>

<p>Make a symlink, and try running the script with various file references:</p>
<pre class="color-command">
$ <strong>ln -s test_ospath.py test_ospath_link.py</strong>
$ <strong>python test_ospath.py</strong>
$ <strong>python ./test_ospath.py</strong>
$ <strong>python ../Path/test_ospath.py</strong>
$ <strong>python /Path/To/test_ospath.py</strong>
$ <strong>python test_ospath_link.py</strong></pre>

<p>More Examples,</p>
<pre class="color-example">
&gt;&gt;&gt; os.path.exists(....)   <span class="color-comment"># Check if path exists (as file or directory)</span>
&gt;&gt;&gt; os.path.isfile(....)   <span class="color-comment"># Check if path is a file</span>
&gt;&gt;&gt; os.path.isdir(....)    <span class="color-comment"># Check if path is a directory</span></pre>



<h4><span class="font-code">fileinput</span> Module</h4>

<p>The <code>fileinput</code> module provides support for processing lines of input from one or more files given in the command-line arguments (<code>sys.argv</code>).  For example, create the following script called &quot;<code>test_fileinput.py</code>&quot;:</p>

<pre class="color-example">
&quot;&quot;&quot;Process all the files given in the command-line arguments&quot;&quot;&quot;
import fileinput

def main():
    &quot;&quot;&quot;Get lines from all the file given in the command-line arguments&quot;&quot;&quot;
    for line in fileinput.input():
        <span class="color-comment"># process each line from all the files (may use formatted output)</span>
        print(line)

main()  <span class="color-comment"># Run the main() function</span></pre>

<p>You can run the script via System's Command shell:</p>

<pre class="color-command">$ <strong>python test_fileinput.py file1 file2</strong>
......</pre>


<h4><span class="font-code">re</span> module for Regular Expression</h4>

<p>The <code>re</code> module provides support for regular expression (regex).</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import re</strong>
&gt;&gt;&gt; <strong>dir(re)</strong>   <span class="color-comment"># List all attributes</span>
......
&gt;&gt;&gt; <strong>help(re)</strong>  <span class="color-comment"># Show man page</span>
......
    <span class="color-comment"># The man page lists all the special characters and meta-characters used by Python's regex.</span></pre>

<h5><span class="font-code">re.compile()</span></h5>
<p>To create a Regex Pattern object, use <code>re.compile(<em>regex-str</em>)</code>, e.g.,</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>import re</strong>
&gt;&gt;&gt; <strong>p1 = re.compile(r'[1-9][0-9]*|0')</strong>
      <span class="color-comment"># non-negative integer (begin with 1-9, followed by 0 or more 0-9; or 0)</span>
&gt;&gt;&gt; <strong>type(p1)</strong>
&lt;class '_sre.SRE_Pattern'&gt;

&gt;&gt;&gt; <strong>p2 = re.compile(r'^\w{6,10}$')</strong>
      <span class="color-comment"># 6-10 characters (^ matches the begin, and $ matches the end, \w for word characters.)</span>

&gt;&gt;&gt; <strong>p3 = re.compile(r'ab*', re.IGNORECASE)</strong>
      <span class="color-comment"># a followed by 0 or more b, case insensitive</span>
</pre>

<p>The prefix <code>r</code> denotes a <em>raw</em> string, where you do not need to escape black slashes. e.g., you can write <code>r'^\w{6,10}$'</code>, instead of <code>'^\\w{6,15}$'</code> in an ordinary string. Raw strings are handing in writing regex, as regex's meta-characters begin with a black-slash, e.g., <code>\w</code> for a word character, <code>\W</code> for a non-word character, <code>\d</code> for a digit character and <code>\D</code> for a non-digit character.</p>

<h5><span class="font-code">findall()</span></h5>

<p>The <code>findall(<em>str</em>)</code> finds all the matching substrings in the given <code><em>str</em></code>, and return a <code>list</code>. For example,</p>

<pre class="color-example">
<span class="color-comment"># Using regex pattern object's member function</span>
&gt;&gt;&gt; <strong>p1.findall('123 456')</strong>
['123', '456']
&gt;&gt;&gt; <strong>p1.findall('abc')</strong>
[]

<span class="color-comment"># Using re module</span>
&gt;&gt;&gt; <strong>re.findall(r'[1-9][0-9]*|0', '123 456')</strong>  <span class="color-comment"># Giving the pattern</span>
['123', '456']
&gt;&gt;&gt; <strong>re.findall(r'[1-9][0-9]*|0', 'abc')</strong>
[]</pre>

<p>As shown in the above example, you can invoke regex functions in two ways: via a Regex Pattern object or via the <code>re</code> module.</p>

<h5><span class="font-code">sub()</span> and <span class="font-code">subn()</span></h5>

<p>The <code>sub(<em>replacement</em>, <em>str</em>)</code> substitutes (replaces) all the matching substrings in the given <em><code>str</code></em> with the <code><em>replacement</em></code>. The <code>subn()</code> is similar, but returns a new string together with the number of replacements in a 2-tuple.</p>

<p>For example,</p>

<pre class="color-example">
<span class="color-comment"># Using regex pattern object's member function</span>
&gt;&gt;&gt; <strong>p1.sub('---', 'aaa123zzz')</strong>
'aaa---zzz'
&gt;&gt;&gt; <strong>p1.subn('---', 'aaa123zzz456')</strong>
('aaa---zzz---', 2)

<span class="color-comment"># Using re module</span>
&gt;&gt;&gt; <strong>re.sub(r'[1-9][0-9]*|0', '---', 'aaa123zzz')</strong> 
'aaa---zzz'</pre>

<p>Note: For simple string replacement, use <code>str.replace(old, new)</code> which is more efficient, e.g.,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>str = "aaa123bbb"</strong>
&gt;&gt;&gt; <strong>help(str.replace)</strong>
......
&gt;&gt;&gt; <strong>str.replace('123', '---')</strong>
'aaa---bbb'</pre>

<h5>Using Back References</h5>

<p>In Python, parentheses back references are denoted as <code>\1</code>, <code>\2</code>, and etc. Make sure you enclose the replacement string with a raw string <code>r'...'</code>, so as to recognize the back slash.</p>

<p>For example, to swap the first two words using back references:</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>re.sub(r'(\w+) (\w+)', r'\2 \1', 'hello world')</strong>
'world hello'</pre>

<h5>The <span class="font-code">Match</span> Object and Functions <span class="font-code">search()</span>, <span class="font-code">match()</span> and <span class="font-code">fullmatch()</span></h5>

<p>The <code>search(<em>str</em>, <em>begin</em>, <em>end</em>)</code> method returns a special Regex Match object encapsulating the first match (or <code>None</code> if no matches). You can then use the following methods to further process the resultant Match object:</p>

<ul>
<li><code>group()</code>: return the matched substring.</li>
<li><code>start()</code>: return the staring matched position (inclusive)</li>
<li><code>end()</code>: return the ending matched position (exclusive)</li>
<li><code>span()</code>: return a tuple of (start, end) matched position</li>
</ul>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>m = p1.search('aaa123zzz456')</strong>  <span class="color-comment"># whole string</span>
&gt;&gt;&gt; <strong>m</strong>
&lt;_sre.SRE_Match object; span=(3, 6), match='123'&gt;
&gt;&gt;&gt; <strong>m.group()</strong>
'123'
&gt;&gt;&gt; <strong>m.span()</strong>
(3, 6)
&gt;&gt;&gt; <strong>m.start()</strong>
3
&gt;&gt;&gt; <strong>m.end()</strong>
6

<span class="color-comment"># You can further provide the begin and end search positions
# in the form of search(str, begin, end), e.g.,</span>
&gt;&gt;&gt; <strong> m = p1.search('aaa123zzz456', m.end())</strong>  <span class="color-comment"># to the end</span>
&gt;&gt;&gt; <strong> m</strong>
&lt;_sre.SRE_Match object; span=(9, 12), match='456'&gt;</pre>


<p>The <code>search()</code> matches anywhere in the given string. On the other hand, the <code>match()</code> matches from the beginning of the given string; while the <code>fullmatch()</code> matches the entire given string (from the beginning to the end). For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong> m = p1.match('aaa123zzz456')</strong>
&gt;&gt;&gt; <strong> m</strong>
<span class="color-comment"># None</span>
&gt;&gt;&gt; <strong> m = p1.match('123zzz456')</strong>
&gt;&gt;&gt; <strong> m</strong>
&lt;_sre.SRE_Match object; span=(0, 3), match='123'&gt;</pre>

<h5><span class="font-code">split()</span></h5>

<p>The <code>split(<em>str</em>)</code> split the string into a <code>list</code>, using the Regex Pattern as delimiter. For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>p1.split('aaa123bbb456ccc')</strong>
['aaa', 'bbb', 'ccc']</pre>

<h4 id="logging"><code>logging</code> Module</h4>

<h5>The <span class="font-code">logging</span> module</h5>

<p>The <code>logging</code> module supports a flexible event logging system for your applications and libraries.</p>

<p>The <code>logging</code> supports five levels:</p>
<ol>
<li><code>logging.DEBUG</code>: Detailed information meant for debugging.</li>
<li><code>logging.INFO</code>: Confirmation that some events take place as expected.</li>
<li><code>logging.WARNING</code>: Something unexpected happened, but the application is still working.</li>
<li><code>logging.ERROR</code>: The Application does not work as expected.</li>
<li><code>logging.CRITICAL</code>: Serious error, the application may not be able to continue.</li>
</ol>

<p>The logging functions are:</p>
<ul>
<li><code>logging.basicConfig(**<em>kwargs</em>)</code>: Perform basic configuration of the logging system. The keyword arguments are: <code>filename</code>, <code>filemode</code> (default to append <code>'a'</code>), <code>level</code> (log this level and above), and etc.</li>

<li><code>logging.debug(<em>msg</em>, *<em>args</em>, **<em>kwargs</em>)</code>, <code>logging.info()</code>, <code>logging.warning()</code>, <code>logging.error()</code>, <code>logging.critical()</code>: Log the <code><em>msg</em></code> at the specific level.  The <code><em>args</em></code> are merged into <code><em>msg</em></code> using string formatting specifier.</li>

<li><code>logging.log(<em>level</em>, <em>msg</em>, *<em>args</em>, **<em>kwargs</em>)</code>: General logging function, at the given log <code><em>level</em></code>.</li>
</ul>

<h5>Basic Logging via <span class="font-code">logging.basicConfig()</span></h5>

<p>Example,</p>

<pre class="color-example">
import logging
logging.basicConfig(filename='myapp.log', level=logging.DEBUG)
logging.debug('A debug message')
logging.info('An info message %s, %s', 'apple', 'orange')  <span class="color-comment"># with printf-like format specifiers</span>
logging.error('error %d, some error messages', 1234)</pre>

<p>The logging functions support printf-like format specifiers such as <code>%s</code>, <code>%d</code>, with values as function arguments, instead of via <code>%</code> operator.</p>

<p>Run the script. A log file <code>myapp.log</code> would be created, with these records:</p>
<pre class="color-example">
DEBUG:root:A debug message
INFO:root:An info message apple, orange
ERROR:root:error 1234, some error messages</pre>

<p>By default, the log records append the log level and logger name (default of <code>root</code>) before the message.</p>


<h5>Getting Log Level from Configuration File</h5>
<p>The log level is typically read from a configuration file. To convert a string log-level to the numeric log-level used by <code>logging</code> module:</p>

<pre class="color-example">
import logging

str_level = 'info'   <span class="color-comment"># Case insensitive</span>

<span class="color-comment"># Convert to uppercase, and get the numeric value</span>
numeric_level = getattr(logging, str_level.upper(), None)
if not isinstance(numeric_level, int):
    raise ValueError('Invalid log level: %s' % str_level)

logging.basicConfig(level=numeric_level)  <span class="color-comment"># Default logging to console</span>

<span class="color-comment"># Test logging</span>
logging.debug('a debug message')  <span class="color-comment"># Not logged</span>
logging.info('an info message')   <span class="color-comment"># Output: INFO:root:an info message</span>
logging.error('an error message') <span class="color-comment"># Output: ERROR:root:an error message</span></pre>

<h5>Log Record Format</h5>
<p>To set the log message format, use the <code>format</code> keyword:</p>
<pre class="color-example">
import logging
logging.basicConfig(
        format='%(asctime)s|%(levelname)s|%(name)s|%(pathname)s:%(lineno)d|%(message)s',
        level=logging.DEBUG)</pre>

<p>where <code>asctime</code> for date/time, <code>levelname</code> for log level, <code>name</code> for logger name, <code>pathname</code> for full-path filename (<code>filename</code> for filename only), <code>lineno</code> (<code>int</code>) for the line number, and <code>message</code> for the log message.</p>

<h5>Advanced Logging: Logger, Handler, Filter and Formatter</h5>
<p>So far, we presented the basic logging facilities. The <code>logging</code> library is extensive and organized into these components:</p>

<ul>
<li>Loggers: expose the methods to application for logging.</li>
<li>Handlers: send the log records created by the loggers to the appropriate destination, such as file, console (<code>sys.stderr</code>), email via SMTP, or network via HTTP/FTP.</li>
<li>Filters: decide which log records to output.</li>
<li>Formatters: specify the layout format of log records.</li>
</ul>

<h5>Loggers</h5>

<p>To create a <code>Logger</code> instance, invoke the <code>logging.getLogger(<em>logger-name</em>)</code>, where the optional <code><em>logger-name</em></code> specifies the logger name (default of <code>root</code>).</p>

<p>The <code>Logger</code>'s methods falls into two categories: configuration and logging.</p>

<p>The commonly-used logging methods are: <code>debug()</code>, <code>info()</code>, <code>warning()</code>, <code>error()</code>, <code>critical()</code> and the general <code>log()</code>.</p>

<p>The commonly-used configuration methods are:</p>
<ul>
<li><code>setLevel()</code></li>
<li><code>addHandler()</code> and <code>removeHandler()</code></li>
<li><code>addFilter()</code> and <code>removeFilter()</code></li>
</ul>

<h5>Handlers</h5>
<p>The logging library provides handlers like <code>StreamHandler</code> (<code>sys.stderr</code>, <code>sys.stdout</code>),  <code>FileHandler</code>, <code>RotatingFileHandler</code>, and <code>SMTPHandler</code> (emails).</p>

<p>The commonly-used methods are:</p>

<ul>
<li><code>setLevel()</code>: The logger's <code>setLevel()</code> determines which message levels to be passed to the handler; while the handler's <code>setLevel()</code> determines which message level to be sent to the destination.</li>
<li><code>setFormatter()</code>: for formatting the message sent to the destination.</li>
<li><code>addFilter()</code> and <code>removeFilter()</code></li>
</ul>

<p>You can add more than one handlers to a logger, possibly handling different log levels. For example, you can add a <code>SMTPHandler</code> to receive emails for ERROR level; and a <code>RotatingFileHandler</code> for INFO (or DEBUG) level.</p>

<h5>Formatters</h5>
<p>Attach to a handler to format the log messages.</p>

<h5>Example: Using Logger with Console Handler and a Formatter</h5>

<pre class="color-example">
import logging

<span class="color-comment"># Create a logger</span>
logger = logging.getLogger('MyApp')
logger.setLevel(logging.INFO)

<span class="color-comment"># Create a console handler and set log level</span>
ch = logging.StreamHandler()   <span class="color-comment"># Default to sys.stderr</span> 
ch.setLevel(logging.INFO)

<span class="color-comment"># Create a formatter and attach to console handler</span>
formatter = logging.Formatter('%(asctime)s|%(name)s|%(levelname)s|%(message)s')
ch.setFormatter(formatter)

<span class="color-comment"># Add console handler to logger</span>
logger.addHandler(ch)

<span class="color-comment"># Test logging</span>
logger.debug('a debug message')
logger.info('an info message')
logger.warn('a warn message')
logger.error('error %d, an error message', 1234)
logger.critical('a critical message')</pre>

<ol>
<li>There is probably no standard of log record format (unless you have an analysis tool in mind)?! But I recommend that you choose a field delimiter which does not appear in the log messages, for ease of processing of log records (e.g., export to spreadsheet).</li>
</ol>

<p>The expected outputs are:</p>
<pre class="output">
2015-12-09 00:32:33,521|MyApp|INFO|an info message
2015-12-09 00:32:33,521|MyApp|WARNING|a warn message
2015-12-09 00:32:33,521|MyApp|ERROR|error 1234: an error message
2015-12-09 00:32:33,521|MyApp|CRITICAL|a critical message</pre>


<h5>Example: Using Rotating Log Files with <span class="font-code">RotatingFileHandler</span></h5>

<pre class="color-example">
import logging
from logging.handlers import RotatingFileHandler

<span class="color-comment"># Configuration data in a dictionary</span>
config = {
        'loggername'  : 'myapp',
        'logLevel'    : logging.INFO,
        'logFilename' : 'test.log',
        'logFileBytes': 300,          <span class="color-comment"># for testing only</span>
        'logFileCount': 3}

<span class="color-comment"># Create a Logger and set log level</span>
logger = logging.getLogger(config['loggername'])
logger.setLevel(config['logLevel'])
 
<span class="color-comment"># Create a rotating file handler</span>
handler = RotatingFileHandler(
        config['logFilename'], 
        maxBytes=config['logFileBytes'], 
        backupCount=config['logFileCount'])
handler.setLevel(config['logLevel'])
handler.setFormatter(logging.Formatter(
        "%(asctime)s|%(levelname)s|%(message)s|%(filename)s:%(lineno)d"))

<span class="color-comment"># Add handler</span>
logger.addHandler(handler)

<span class="color-comment"># Test</span>
logger.info('An info message')
logger.debug('A debug message')
for i in range(1, 10):    <span class="color-comment"># Test rotating log files</span>
    logger.error('Error message %d', i)</pre>

<ol>
<li>We keep all the logging parameters in a dictionary, which are usually retrieved from a configuration file.</li>

<li>In the constructor of <code>RotatingFileHandler</code>, the <code>maxBytes</code> sets the log file size-limit; the <code>backupCount</code> appends <code>'.1'</code>, <code>'.2'</code>, etc to the old log files, such that <code>'.1'</code> is always the newer backup of the log file.  Both <code>maxBytes</code> and <code>backupCount</code> default to 0. If either one is zero, roll-over never occurs.</li>

<li>The above example produces 4 log files: <code>test.log</code>, <code>test.log.1</code> to <code>test.log.3</code>. The file being written to is always <code>test.log</code>. When this file is filled, it is renamed to <code>test.log.1</code>; and if <code>test.log.1</code> and <code>test.log.2</code> exist, they will be renamed to <code>test.log.2</code> and <code>test.log.3</code> respectively, with the old <code>test.log.3</code> deleted.</li>
</ol>

<h5>Example: Using an Email Log for CRITICAL Level and Rotating Log Files for INFO Level</h5>

<pre class="color-example">
import logging
from logging.handlers import RotatingFileHandler, SMTPHandler

<span class="color-comment"># Configuration data in a dictionary</span>
config = {
        'loggername'  : 'myapp',
        'fileLogLevel' : logging.INFO,
        'logFilename'  : 'test.log',
        'logFileBytes' : 300,         <span class="color-comment"># for testing only</span>
        'logFileCount' : 5,
        'emailLogLevel': logging.CRITICAL,
        'smtpServer'   : 'your_smtp_server',
        'email'        : 'myapp@nowhere.com',
        'emailAdmin'   : 'admin@nowhere.com'}

<span class="color-comment"># Create a Logger and set log level</span>
logger = logging.getLogger(config['loggername'])
logger.setLevel(config['fileLogLevel'])  <span class="color-comment"># lowest among all</span>
 
<span class="color-comment"># Create a rotating file handler</span>
fileHandler = RotatingFileHandler(
        config['logFilename'],
        maxBytes=config['logFileBytes'],
        backupCount=config['logFileCount'])
fileHandler.setLevel(config['fileLogLevel'])
fileHandler.setFormatter(logging.Formatter(
        "%(asctime)s|%(levelname)s|%(message)s|%(filename)s:%(lineno)d"))

<span class="color-comment"># Create a email handler</span>
emailHandler = SMTPHandler(
        config['smtpServer'], 
        config['email'], 
        config['emailAdmin'],
        '%s - CRITICAL ERROR' % config['loggername'])
emailHandler.setLevel(config['emailLogLevel'])

<span class="color-comment"># Add handlers</span>
logger.addHandler(fileHandler)
logger.addHandler(emailHandler)

<span class="color-comment"># Test</span>
logger.debug('A debug message')
logger.info('An info message')
logger.warning('A warning message')
logger.error('An error message')
logger.critical('A critical message')</pre>

<h5>Example: Separating ERROR Log and INFO Log with Different Format</h5>

<pre class="color-example">
import logging, sys
from logging.handlers import RotatingFileHandler

class MaxLevelFilter(logging.Filter):
    <span class="color-comment">&quot;&quot;&quot;Custom filter that passes messages with level &lt;= maxlevel&quot;&quot;&quot;</span>
    def __init__(self, maxlevel):
        <span class="color-comment">&quot;&quot;&quot;Constructor takes the max level to pass&quot;&quot;&quot;</span>
        self.maxlevel = maxlevel

    def filter(self, record):
        <span class="color-comment">&quot;&quot;&quot;Return True to pass the record&quot;&quot;&quot;</span>
        return (record.levelno &lt;= self.maxlevel)

<span class="color-comment"># INFO and below go to rotating files</span>
file_handler = RotatingFileHandler('test.log', maxBytes=500, backupCount=3)
file_handler.addFilter(MaxLevelFilter(logging.INFO))
file_handler.setFormatter(logging.Formatter(
        "%(asctime)s|%(levelname)s|%(message)s"))

<span class="color-comment"># WARNING and above go to stderr, with all details</span>
err_handler = logging.StreamHandler(sys.stderr)
err_handler.setLevel(logging.WARNING)
err_handler.setFormatter(logging.Formatter(
        "%(asctime)s|%(levelname)s|%(message)s|%(pathname)s:%(lineno)d"))

logger = logging.getLogger("myapp")
logger.setLevel(logging.DEBUG)    <span class="color-comment"># Lowest</span>
logger.addHandler(file_handler)
logger.addHandler(err_handler)

<span class="color-comment"># Test</span>
logger.debug("A DEBUG message")
logger.info("An INFO message")
logger.warning("A WARNING message")
logger.error("An ERROR message")
logger.critical("A CRITICAL message")</pre>


<h4 id="configparser"><code>ConfigParser</code> (Python 2) or <code>configparser</code> (Python 3) Module</h4>
<p>The <code>ConfigParser</code> module implements a basic configuration file parser for <code>.ini</code>.</p>

<p>A <code>.ini</code> file contains key-value pairs organized in sections and looks like:</p>

<pre class="color-example">
<span class="color-comment"># This is a comment</span>
[app]
name = my application
version = 0.9.1
authors = ["Peter", "Paul"]
debug = False

[db]
host = localhost
port = 3306

[DEFAULT]
message = hello</pre>

<ol>
<li>A configuration file consists of sections (marked by <code>[<em>section-name</em>]</code> header).  A section contains <code>key=value</code> or <code>key:value</code>  pairs. The leading and trailing whitespaces are trimmed from the <code>value</code>. Lines beginning with <code>'#'</code> or <code>';'</code> are comments.</li>
</ol>

<p>You can use <code>ConfigParser</code> to parse the <code>.ini</code> file, e.g.,</p>

<pre class="color-example">
import ConfigParser

cp = ConfigParser.SafeConfigParser()
cp.read('test1.ini')

<span class="color-comment"># Print all contents. Also save into a dictionary</span>
config = {}
for section in cp.sections():
    print("Section [%s]" % section)
    for option in cp.options(section):
        print("|%s|%s|" % (option,
                cp.get(section, option)))          <span class="color-comment"># Print</span>
        config[option] = cp.get(section, option) <span class="color-comment"># Save in dict</span>

print(config)

<span class="color-comment"># List selected contents with type</span>
cp.get('app', 'debug')         <span class="color-comment"># string</span>
cp.getboolean('app', 'debug')
cp.getint('app', 'version')</pre>

<ul>
<li><code>ConfigParser.read(<em>file1</em>, <em>file2</em>,...)</code>: read and parse from the list of filenames. It overrides the keys with each successive file, if present.</li>

<li><code>ConfigParser.get(<em>section</em>, <em>name</em>)</code>: get the value of <code><em>name</em></code> from <code><em>section</em></code>.</li>
</ul>

<h5>Interpolation with <span class="font-code">SafeConfigParser</span></h5>

<p>A <code>value</code> may contain formatting string in the form of <code>%(name)s</code>, which refers to another <code>name</code> in the SAME section, or a special <code>DEFAULT</code> (in uppercase) section. This interpolation feature is, however, supported only in <code>SafeConfigParser</code>. For example, suppose we have the following configuration file called <code>myapp.ini</code>:</p>

<pre class="color-example">
[My Section]
msg: %(head)s + %(body)s
body = bbb

[DEFAULT]
head = aaa</pre>

<p>The <code>msg</code> will be interpolated as <code>aaa + bbb</code>, interpolated from the SAME section and DEFAULT section.</p>


<h4><span class="font-code">datetime</span> Module</h4>

<p>The <code>datetime</code> module supplies classes for manipulating dates and time in both simple and complex ways.</p>

<ul>
<li><strong><code>datetime.date.today()</code></strong>: Return the current local date.</li>
</ul>

<pre class="color-example">
&gt;&gt;&gt; <strong>import datetime</strong>
&gt;&gt;&gt; <strong>dir(datetime)</strong>
['MAXYEAR', 'MINYEAR', 'date', 'datetime', 'datetime_CAPI', 'time', 'timedelta', 'timezone', 'tzinfo', ...]
&gt;&gt;&gt; <strong>dir(datetime.date)</strong>
['today', ...]

&gt;&gt;&gt; <strong>from datetime import date</strong>
&gt;&gt;&gt; <strong>today = date.today()</strong>
&gt;&gt;&gt; <strong>today</strong>
datetime.date(2016, 6, 17)
&gt;&gt;&gt; <strong>aday = date(2016, 5, 1)</strong>  <span class="color-comment"># Construct a datetime.date instance</span>
&gt;&gt;&gt; <strong>aday</strong>
datetime.date(2016, 5, 1)
&gt;&gt;&gt; <strong>diff = today - aday</strong>      <span class="color-comment"># Find the difference between 2 date instances</span>
&gt;&gt;&gt; <strong>diff</strong>
datetime.timedelta(47)
&gt;&gt;&gt; <strong>dir(datetime.timedelta)</strong>
['days', 'max', 'microseconds', 'min', 'resolution', 'seconds', 'total_seconds', ...]
&gt;&gt;&gt; <strong>diff.days</strong>
47</pre>

<h4><span class="font-code">smtplib</span> and <span class="font-code">email</span> Modules</h4>

<p>The SMTP (Simple Mail Transfer Protocol) is a protocol, which handles sending email and routing email between mail servers. Python provides a <code>smtplib</code> module, which defines an SMTP client session object that can be used to send email to any Internet machine with an SMTP listener daemon.</p>

<p>To use <code>smtplib</code>:</p>
<pre class="color-example">
import smtplib

<span class="color-comment"># Create an SMTP instance</span>
smtpobj = smtplib.SMTP([<em>host</em> [,<em>port</em> [, <em>local_hostname</em> [, <em>timeout</em>]]]])
......
<span class="color-comment"># Send email</span>
smtpobj.sendmail(<em>form_addr</em>, <em>to_addrs</em>, <em>msg</em>)
<span class="color-comment"># Terminate the SMTP session and close the connection</span>
smtpobj.quit()
</pre>

<p>The <code>email</code> module can be used to construct an email message.</p>

<p>[TODO] more</p>

<h4><span class="font-code">json</span> Module</h4>

<p>JSON (JavaScript Object Notation) is a lightweight data interchange format inspired by JavaScript object literal syntax. The <code>json</code> module provides implementation for JSON encoder and decoder.</p>

<ul>
<li><code>json.dumps(python_obj)</code>: Serialize <code>python_obj</code> to a JSON-encoded string.</li>

<li><code>json.loads(json_str)</code>: Create a Python object from the given JSON-encoded string.</li>

<li><code>json.dump(python_obj, file_obj)</code>: Serialize <code>python_obj</code> to the file.</li>

<li><code>json.load(file_obj)</code>: Create a Python object by reading the given file.</li>
</ul>

<p>For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>import json</strong>

<span class="color-comment"># Create a JSON-encoded string from a Python object</span>
&gt;&gt;&gt; <strong>lst = [123, 4.5, 'hello', True]</strong>
&gt;&gt;&gt; <strong>json_lst = json.dumps(lst)</strong>  <span class="color-comment"># Create a JSON-encoded string</span>
&gt;&gt;&gt; <strong>json_lst</strong>
'[123, 4.5, "hello", true]'
        <span class="color-comment"># JSON uses double-quote for string</span> 

&gt;&gt;&gt; <strong>dct = {'a': 11, 2: 'b', 'c': 'cc'}</strong>
&gt;&gt;&gt; <strong>json_dct = json.dumps(dct)</strong>
&gt;&gt;&gt; <strong>json_dct</strong>
'{"a": 11, "c": "cc", "2": "b"}'

<span class="color-comment"># Create a Python object from a JSON string</span>
&gt;&gt;&gt; <strong>lst_decoded = json.loads(json_lst)</strong>
&gt;&gt;&gt; <strong>lst_decoded</strong>
[123, 4.5, 'hello', True]
&gt;&gt;&gt; <strong>dct_decoded = json.loads(json_dct)</strong>
&gt;&gt;&gt; <strong>dct_decoded</strong>
{'a': 11, 'c': 'cc', '2': 'b'}

<span class="color-comment"># Serialize a Python object to a text file</span>
&gt;&gt;&gt; <strong>f = open('json.txt', 'w')</strong>
&gt;&gt;&gt; <strong>json.dump(dct, f)</strong>
&gt;&gt;&gt; <strong>f.close()</strong>

<span class="color-comment"># Construct a Python object via de-serializing from a JSON file</span>
&gt;&gt;&gt; <strong>f = open('json.txt', 'r')</strong>
&gt;&gt;&gt; <strong>dct_decoded_from_file = json.load(f)</strong>
&gt;&gt;&gt; <strong>dct_decoded_from_file</strong>
{'a': 11, 'c': 'cc', '2': 'b'}

<span class="color-comment"># Inspect the JSON file</span>
&gt;&gt;&gt; <strong>f.seek(0)</strong>  <span class="color-comment"># Rewind</span>
0
&gt;&gt;&gt; <strong>f.read()</strong>   <span class="color-comment"># Read the entire file</span>
'{"a": 11, "c": "cc", "2": "b"}'
&gt;&gt;&gt; <strong>f.close()</strong></pre>

<h4><span class="font-code">pickle</span> and <span class="font-code">cPickle</span> Modules</h4>

<p>The <code>json</code> module (described earlier) handles lists and dictionaries, but serializing arbitrary class instances requires a bit of extra effort. On the other hand, the <code>pickle</code> module implements serialization and de-serialization of any Python object. Pickle is a protocol which allows the serialization of arbitrarily complex Python objects. It is specific to the Python languages and not applicable to other languages.</p>

<p>The <code>pickle</code> module provides the same functions as the <code>json</code> module:</p>
<ul>
<li><strong><code>pickle.dumps(python_obj)</code></strong>: Return the pickled representation of the <code>python_obj</code> as a string.</li>

<li><strong><code>pickle.loads(pickled_str)</code></strong>: Construct a Python object from <code>pickled_str</code>.</li>

<li><strong><code>pickle.dump(python_obj, file_obj)</code></strong>: Write a pickled representation of the <code>python_obj</code> to <code>file_obj</code>.</li>

<li><strong><code>pickle.load(file_obj)</code></strong>: Construct a Python object reading from the <code>file_obj</code>.</li>
</ul>

<p>The module <code>cPickle</code> is an improved version of <code>pickle</code>.</p>


<h4><span class="font-code">signal</span> module</h4>

<p>Signals (software interrupt) are a limited form of asynchronous inter-process communication, analogous to hardware interrupts. It is generally used by the operating system to notify processes about certain issues/states/errors, like division by zero, etc.</p>

<p>The <code>signal</code> module provides mechanisms to use signal handlers in Python.</p>

<h5><span class="font-code">signal.signal()</span></h5>

<p>The <code>signal.signal()</code> method takes two arguments: the signal number to handle, and the handling function. For example,</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;test_signal.py&quot;&quot;&quot;</span>
import sys, signal, time

def my_signal_handler(signalnum, handler):
    <span class="color-comment">&quot;&quot;&quot;Custom Signal Handler&quot;&quot;&quot;</span>
    print('Signal received %d: %s' % (signalnum, handler));

<span class="color-comment"># Test sending signals</span>
signal.signal(signal.SIGINT, my_signal_handler);
signal.signal(signal.SIGUSR1, my_signal_handler);

while(1):
    print "Wait..."
    time.sleep(10)</pre>

<p>Run the program in the background and send signals:</p>

<pre class="color-command">
$ <strong>./test_signal.py &amp;</strong>
[1] 24078

$ Wait...

$ <strong>kill -INT 24078</strong>    <span class="color-comment"># Send signal</span>
Signal received 2: &lt;frame object at 0x7f6f59e12050&gt;

$ <strong>kill -USR1 24078</strong>   <span class="color-comment"># Send signal</span>
Signal received 10: &lt;frame object at 0x7f6f59e12050&gt;

$ <strong>kill -9 24078</strong>      <span class="color-comment"># Kill the process</span></pre>



<h3>Object Oriented Programming (OOP) in Python</h3>

<p>I assume that you are familiar with the OOP concepts, and you know some OO languages such as Java/C++/C#.</p>

<h4>Introduction of OOP in Python</h4>

<p>A <em>class</em> is a blueprint or template of things of the same kind. An <em>instance</em> is a particular realization of a class.</p>

<p>In Python, objects can refer to classes or instances. In other words, Python has class objects and instance object.</p>

<p>An object contains <em>attributes</em>: <em>data attributes</em> (or <em>variable</em>) and behaviors (called <em>methods</em>). To access an attribute, use &quot;dot&quot; operator in the form of <code>class_name.attr_name</code> or <code>instance_name.attr_name</code>.</p>

<p>To construct an instance of a class, invoke the constructor in the form of <code>instance_name = class_name(*args)</code>.</p>

<p>[TODO] UML class diagram for class and instances.</p>

<p>[TODO] more</p>

<h4>Example 1: Getting Started with a <span class="font-code">Circle</span> class</h4>

<p>Let's write a module called <code>circle</code> (save as <code>circle.py</code>), which contains a <code>Circle</code> class. The <code>Circle</code> class shall contain data attribute <code>radius</code> and method <code>get_area()</code>, as shown in the following class diagram.</p>

<p>[TODO] class diagram</p>


<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;
circle.py: The circle module.
It contains a Circle class.
&quot;&quot;&quot;</span>
from math import pi

class Circle:    <span class="color-comment"># For Python 2 use: &quot;class Circle(object):&quot;</span>
    <span class="color-comment">&quot;&quot;&quot;A Circle instance models a circle with a radius&quot;&quot;&quot;</span>
    def __init__(self, radius=1.0):
        <span class="color-comment">&quot;&quot;&quot;Constructor with default radius of 1.0&quot;&quot;&quot;</span>
        self.radius = radius  <span class="color-comment"># create an instance variable radius</span>
        
    def __str__(self):
        <span class="color-comment">&quot;&quot;&quot;Self description for this Circle instance, used by print() and str()&quot;&quot;&quot;</span>
        return self.__repr__()

    def __repr__(self):
        <span class="color-comment">&quot;&quot;&quot;Return a string that can be used to re-create this instance&quot;&quot;&quot;</span>
        return 'Circle(radius=%.2f)' % self.radius
    
    def get_area(self):
        <span class="color-comment">&quot;&quot;&quot;Return the area of this Circle instance&quot;&quot;&quot;</span>
        return self.radius * self.radius * pi
 
<span class="color-comment"># For Testing under Python interpreter</span>
<span class="color-comment"># If this module is run under Python interpreter, __name__ is '__main__'.</span>
<span class="color-comment"># If this module is imported in another module, __name__ is 'circle' (the module name).</span>
if __name__ == '__main__':
    c1 = Circle(2.1)     <span class="color-comment"># Construct an instance</span>
    print(c1)            <span class="color-comment"># Invoke __str__()</span>
    print(c1.get_area())
 
    c2 = Circle()        <span class="color-comment"># Default radius</span>
    print(c2)
    print(c2.get_area())
 
    c2.color = 'red'  <span class="color-comment"># Create a new attribute for this instance via assignment</span>
    print(c2.color)
    #print(c1.color)  <span class="color-comment"># Error - c1 has no attribute color</span>

    <span class="color-comment"># Test doc-strings</span>
    print(__doc__)                  <span class="color-comment"># This module</span>
    print(Circle.__doc__)           <span class="color-comment"># Circle class</span>
    print(Circle.get_area.__doc__)  <span class="color-comment"># get_area() method</span>
    
    print(isinstance(c1, Circle)) <span class="color-comment"># True</span>
    print(isinstance(c2, Circle)) <span class="color-comment"># True</span>
    print(isinstance(c1, str))    <span class="color-comment"># False</span></pre>

<p>Try running this script, and check the outputs:</p>

<pre class="output">
Circle(radius=2.10)
13.854423602330987
Circle(radius=1.00)
3.141592653589793
red
circle.py: The circle module, which defines the Circle class
A Circle instance models a circle with a radius
Return the area of this Circle instance
True
True
False</pre>


<h5>How it Works</h5>

<ol>
<li>By convention, module names (and package names) are in lowercase (optionally joined with underscore if it improves readability). Class names are initial-capitalized (i.e., CamelCase). Variable and method names are also in lowercase.  <br />Following the convention, this module is called <code>circle</code> (in lowercase) and is to be saved as &quot;<code>circle.py</code>&quot;. The class is called <code>Circle</code> (in CamelCase). It contains a data attribute (instance variable) <code>radius</code> and a method <code>get_area()</code>.</li>

<li>We use the &quot;<code>class Circle:</code>&quot; statement to define the <code>Circle</code> class.
<br />Notes:
<br />In Python 2, you need to write &quot;<code>class Circle(object):</code>&quot; to create a so-called <em>new-style</em> class by inheriting from the default superclass <code>object</code>.  Otherwise, it will create a <em>old-style</em> class. The <em>old-style</em> classes should no longer be used. In Python 3, &quot;<code>class Circle:</code>&quot; inherits from <code>object</code> by default.</li>

<li>The first parameter of all the methods shall be an object called <code>self</code> (e.g., <code>get_area(self)</code>, <code>__init__(self, ...)</code>), which takes this instance (i.e., itself) as argument during invocation.</li>

<li>You can invoke a method via the dot operator, in the form of <code>obj_name.method_name()</code>. However, Python differentiates between instance objects and class objects:

<ul>
<li>For class objects: You can invoke a method via
<pre class="color-example">
<strong>class_name</strong>.method_name(instance_name, ...)</pre>
where an <code>instance_name</code> is passed into the method as the argument for <code>self</code>.</li>

<li>For instance objects: Python converts an instance method call from:
<pre class="color-example">
<strong>instance_name</strong>.method_name(...)</pre>
to
<pre class="color-example">
<strong>class_name</strong>.method_name(<strong>instance_name</strong>, ...)</pre>
where the <code>instance_name</code> is passed into the method as the argument for <code>self</code>.
</li>
</ul>
I will elaborate on this soon.
</li>

<li>You can construct an instance of a class by invoking its constructor, in the form of <code>class_name(...)</code>, e.g.,
<pre class="color-example">
c1 = Circle(1.2)
c2 = Circle()     <span class="color-comment"># radius default</span></pre>
Python first creates a plain <code>Circle</code> object and invokes the <code>Circle</code>'s <code>__init__(self, radius)</code> with <code>self</code> bound to the newly created instance, as follows:
<pre class="color-example">
Circle.__init__(c1, 1.2)
Circle.__init__(c2)       <span class="color-comment"># radius default</span></pre>
Inside the <code>__init__()</code> method, the <code>self.radius = radius</code> creates and attaches an instance variable <code>radius</code> under the instances <code>c1</code> and <code>c2</code>.
<br />Take note that:
<ul>
<li>The <code>__init__()</code> is not really the constructor, but an initializer to create the instance variables.</li>
<li><code>__init__()</code> shall never return a value.</li>
<li><code>__init__()</code> is optional and can be omitted if there is no instance variables.</li>
</ul>
</li>

<li>Once instance <code>c1</code> was created, invocation of instance method <code>c1.get_area()</code> is translated to <code>Circle.getArea(c1)</code> where <code>self</code> is bound to <code>c1</code>. Within the method, <code>self.radius</code> is bound to <code>c1.radius</code>, which was created during the construction.</li>

<li>There is no need to declare instance variables. The variable assignment statements in the constructor create the instance variables.</li>

<li>You can dynamically add an attribute after an object is constructed via assignment, as in <code>c2.color='red'</code>. This is unlike other OOP languages like Java.</li>

<li>You can place doc-string for module, class, and method immediately after their declaration. Doc-strings are strongly recommended for proper documentation.</li>

<li>There is no private access control. All attributes are &quot;public&quot;.</li>

<li>[TODO] unit-test and doc-test</li>
<li>[TODO] more</li>
</ol>
    

<h5>Inspecting the Objects</h5>

<p>Run the script under the Python Interactive Shell or IDLE:</p>
<pre class="color-command">
$ <strong>cd /path/to/module-directory</strong>
$ <strong>python</strong>
&gt;&gt;&gt; <strong>exec(open('circle.py'))</strong>  <span class="color-comment"># or run under IDLE</span>
......

&gt;&gt;&gt; <strong>dir()</strong>        <span class="color-comment"># Return the list of names in the current local scope</span>
['Circle', '__builtins__', '__doc__', '__file__', '__loader__', '__name__',
 '__package__', '__spec__', 'c1', 'c2', 'pi']
&gt;&gt;&gt; <strong>__name__</strong>
'__main__'

<span class="color-comment"># Inspect instance object c1</span>
&gt;&gt;&gt; <strong>dir(c1)</strong>      <span class="color-comment"># List all attributes including built-ins</span>
['__class__', '__dict__', '__doc__', '__init__', '__str__', 'get_area', 'radius', ...]
&gt;&gt;&gt; <strong>vars(c1)</strong>     <span class="color-comment"># Return a dictionary of instance variables kept in __dict__</span>
{'radius': 2.1}
&gt;&gt;&gt; <strong>c1.__dict__</strong>  <span class="color-comment"># Same as vars()</span>
{'radius': 2.1}
&gt;&gt;&gt; <strong>c1.__class__</strong>
&lt;class '__main__.Circle'&gt;
&gt;&gt;&gt; <strong>type(c1)</strong>     <span class="color-comment"># Same as __class__</span>
&lt;class '__main__.Circle'&gt;
&gt;&gt;&gt; <strong>c1.__doc__</strong>
'A Circle instance models a circle with a radius'
&gt;&gt;&gt; <strong>c1.__module__</strong>
'__main__'
&gt;&gt;&gt; <strong>c1.__init__</strong>
&lt;bound method Circle.__init__ of &lt;__main__.Circle object at 0x7fb3204625f8&gt;&gt;
&gt;&gt;&gt; <strong>c1.__str__</strong>
&lt;bound method Circle.__str__ of &lt;__main__.Circle object at 0x7fb3204625f8&gt;&gt;
&gt;&gt;&gt; <strong>c1.radius</strong>
2.1
&gt;&gt;&gt; <strong>c1.get_area</strong>
&lt;bound method Circle.get_area of &lt;__main__.Circle object at 0x7fb3204625f8&gt;&gt;
&gt;&gt;&gt; <strong>c1.get_area()</strong>  <span class="color-comment"># Same as Circle.get_area(c1)</span>
13.854423602330987

<span class="color-comment"># Inspect instance object c2</span>
&gt;&gt;&gt; <strong>dir(c2)</strong>
['color', 'get_area', 'radius', ...]
&gt;&gt;&gt; <strong>type(c2)</strong>  <span class="color-comment"># or c2.__class__</span>
&lt;class '__main__.Circle'&gt;
&gt;&gt;&gt; <strong>vars(c2)</strong>  <span class="color-comment"># or c2.__dict__</span> 
{'radius': 1.0, 'color': 'red'}
&gt;&gt;&gt; <strong>c2.radius</strong>
1.0
&gt;&gt;&gt; <strong>c2.color</strong>
'red'

<span class="color-comment"># Inspect the class object Circle</span>
&gt;&gt;&gt; <strong>dir(Circle)</strong>  <span class="color-comment"># List all attributes for Circle object</span>
['__class__', '__dict__', '__doc__', '__init__', '__str__', 'get_area', ...]
&gt;&gt;&gt; <strong>Circle.__class__</strong>
&lt;class 'type'&gt;
&gt;&gt;&gt; <strong>Circle.__dict__</strong>
mappingproxy({'__init__': ..., 'get_area': ..., '__str__': ..., '__dict__': ...,
 '__doc__': 'A Circle instance models a circle with a radius', '__module__': 
 '__main__'})
&gt;&gt;&gt; <strong>Circle.__doc__</strong>
'A Circle instance models a circle with a radius'
&gt;&gt;&gt; <strong>Circle.__init__</strong>
&lt;function Circle.__init__ at 0x7fb325e0cbf8&gt;
&gt;&gt;&gt; <strong>Circle.__str__</strong>
&lt;function Circle.__str__ at 0x7fb31f3ee268&gt;
&gt;&gt;&gt; <strong>Circle.__str__(c1)</strong>  <span class="color-comment"># Same as c1.__str__()</span>
'Circle[radius=2.10]'
&gt;&gt;&gt; <strong>Circle.get_area</strong>
&lt;function Circle.get_area at 0x7fb31f3ee2f0&gt;
&gt;&gt;&gt; <strong>Circle.get_area(c1)</strong>  <span class="color-comment"># Same as c1.get_area()</span>
13.854423602330987</pre>

<h5>Class Objects vs Instance Objects</h5>

<p>As illustrated in the above example, there are two kinds of objects in Python's OOP models: class objects and instance objects, which is quite different from other OOP languages.</p>

<p>Class objects provide default behavior and serve as factories for generating instance objects. Instance objects are the real objects created by your application. An instance object has its own namespace. It copies all the names from the class object from which it was created.</p>

<p>The <code>class</code> statement creates a class object of the given class name. Within the class definition, you can create class variables via assignment statements, which are shared by all the instances.  You can also define methods, via the <code>def</code>s, to be shared by all the instances.</p>

<p>When an instance is created, a new namespace is created, which is initially empty. It clones the class object and attaches all the class attributes. The <code>__init__()</code> is then invoked to create instance variables, which are only available to this particular instance.</p>

<p>[TODO] more</p> 
  

<h5><span class="font-code">__str__()</span> vs. <span class="font-code">__repr__()</span></h5>

<p>The <code>print(obj)</code> and <code>str(obj)</code> invoke <code>obj.__str__()</code> implicitly.</p>

<p>The <code>repr(obj)</code> invokes <code>obj.__repr__()</code> if available; otherwise <code>obj.__str__()</code>.</p>

<p>When you inspect an object <code>obj</code> (e.g., <code>c1</code>) under the interactive prompt, Python invokes <code>obj.__repr__()</code>. The default (inherited) <code>__repr__()</code> returns the <code>obj</code>'s address.</p>

<p>The <code>__str__()</code> is used for printing an &quot;informal&quot; string representation of this object. The <code>__repr__()</code> is used to present an &quot;official&quot; string representation of an object, which should look like a valid Python expression that could be used to recreate the object. Both functions shall return a string object. In our example, <code>repr(c1)</code> returns <code>'Circle(radius=2.10)'</code>.  You can use &quot;<code>c1 = Circle(radius=2.10)</code>&quot; to re-create instance <code>c1</code>.</p>


<h5>Importing the <span class="font-code">circle</span> module</h5>

<p>When you use &quot;<code>import circle</code>&quot;, a namespace for <code>circle</code> is created under the current scope. You need to reference the <code>Circle</code> class as <code>circle.Circle</code>.</p>

<pre class="color-command">
$ <strong>cd /path/to/module-directory</strong>
$ <strong>python3</strong>
&gt;&gt;&gt; <strong>import circle</strong>  <span class="color-comment"># circle module</span>
&gt;&gt;&gt; <strong>dir()</strong>          <span class="color-comment"># Current local scope</span>
['__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__', <strong>'circle'</strong>]
&gt;&gt;&gt; <strong>dir(circle)</strong>    <span class="color-comment"># The circle module</span>
['Circle', '__builtins__', '__doc__', '__name__', 'pi', ...]
&gt;&gt;&gt; <strong>dir(circle.Circle)</strong>  <span class="color-comment"># Circle class</span>
['__class__', '__doc__', '__init__', '__str__', 'get_area', ...]
&gt;&gt;&gt; <strong>__name__</strong>
'__main__'
&gt;&gt;&gt; <strong>circle.__name__</strong>     <span class="color-comment"># of  circle module</span>
'circle'
&gt;&gt;&gt; <strong>c1 = circle.Circle(1.2)</strong>
&gt;&gt;&gt; <strong>dir(c1)</strong>
['__class__', '__doc__', '__str__', 'get_area', 'radius', ...]
&gt;&gt;&gt; <strong>vars(c1)</strong>
{'radius': 1.2}</pre>

<h5>Importing the <span class="font-code">Circle</span> class of the <span class="font-code">circle</span> module</h5>

<p>When you import the <code>Circle</code> class via &quot;<code>from circle import Circle</code>&quot;, the <code>Circle</code> class is added to the current scope, and you can reference the <code>Circle</code> class directly.</p>

<pre class="color-command">
&gt;&gt;&gt; <strong>from circle import Circle</strong>
&gt;&gt;&gt; <strong>dir()</strong>
['Circle', '__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__']
&gt;&gt;&gt; <strong>c1 = Circle(3.4)</strong>
&gt;&gt;&gt; <strong>vars(c1)</strong>
{'radius': 3.4}</pre>


<h4>Class Definition</h4>

<p>The syntax is:</p>

<pre class="color-syntax">
<strong>class</strong> <em>class_name</em><strong>(</strong><em>superclass1</em>, ...<strong>):</strong>
    <span class="color-comment">&quot;&quot;&quot;Class doc-string&quot;&quot;&quot;</span>
   
    <em>class_var1 = value1</em>  <span class="color-comment"># Class variables</span>
    ......
   
    <strong>def __init__(self,</strong> <em>arg1</em>, ...<strong>):</strong>
        <span class="color-comment">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <strong>self.</strong><em>instance_var1</em> = <em>arg1</em>  <span class="color-comment"># Attach instance variables by assignment</span>
        ......
      
    <strong>def __str__(self):</strong>
        <span class="color-comment">&quot;&quot;&quot;For printf() and str()&quot;&quot;&quot;</span>
        ......
      
    <strong>def __repr__(self):</strong>
        <span class="color-comment">&quot;&quot;&quot;For repr() and interactive prompt&quot;&quot;&quot;</span>
        ......
      
    <strong>def</strong> <em>method_name</em><strong>(self,</strong> *<em>args</em>, **<em>kwargs</em><strong>)</strong>:
        <span class="color-comment">&quot;&quot;&quot;Method doc-string&quot;&quot;&quot;</span>
        ......</pre>
      
<h4>Example 2: The <span class="font-code">Point</span> class and Operator Overloading</h4>

<p>In this example, we shall define a <code>Point</code> class, which models a 2D point with x and y coordinates. We shall also overload the operators <code>'+'</code> and <code>'*'</code> by overriding the so-called magic methods <code>__add__()</code> and <code>__mul__()</code>.</p>

<p>[TODO] Class diagram</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;point.py: The point module, which defines the Point class&quot;&quot;&quot;</span>

class Point:    <span class="color-comment"># Python 2: class Point(object):</span>
    <span class="color-comment">&quot;&quot;&quot;A Point instance models a 2D point with x and y coordinates&quot;&quot;&quot;</span>
    def __init__(self, x=0, y=0):
        <span class="color-comment">&quot;&quot;&quot;Constructor, which creates the instance variables x and y&quot;&quot;&quot;</span>
        self.x = x
        self.y = y

    def __str__(self):
        <span class="color-comment">&quot;&quot;&quot;Self Description&quot;&quot;&quot;</span>
        return '(' + str(self.x) + ',' + str(self.y) + ')'
        
    def __add__(self, another):
        <span class="color-comment">&quot;&quot;&quot;Override the + operator: create and return a new instance&quot;&quot;&quot;</span>
        p = Point(self.x + another.x, self.y + another.y)
        return p

    def __mul__(self, factor):
        <span class="color-comment">&quot;&quot;&quot;Override the * operator: modify and return this instance&quot;&quot;&quot;</span>
        self.x *= factor
        self.y *= factor
        return self

<span class="color-comment"># Test</span>
if __name__ == '__main__':
    p1 = Point()
    print(p1)      <span class="color-comment"># (0,0)</span>
    p1.x = 5
    p1.y = 6
    print(p1)      <span class="color-comment"># (5,6)</span>
    p2 = Point(3, 4)
    print(p2)      <span class="color-comment"># (3,4)</span>
    print(p1 + p2) <span class="color-comment"># (8,10) Same as p1.__add__(p2)</span>
    print(p1)      <span class="color-comment"># (5,6) No change</span>
    print(p2 * 3)  <span class="color-comment"># (9,12) Same as p1.__mul__(p2)</span>
    print(p2)      <span class="color-comment"># (9,12) Changed</span></pre>

<h5>How it Works</h5>

<ol>
<li>Python supports operator overloading (like C++ but unlike Java). You can overload <code>'+'</code>, <code>'-'</code>, <code>'*'</code>, <code>'/'</code>, <code>'//'</code> and <code>'%'</code> by overriding member methods <code>__add__()</code>, <code>__sub__()</code>, <code>__mul__()</code>, <code>__truediv__()</code>, <code>__floordiv__()</code> and <code>__mod__()</code>, respectively. You can overload other operators - to be discussed later.</li>

<li>In this example, the <code>__add__()</code> adds into this instance and returns this instance; whereas the <code>__mul__()</code> returns a new instance, for academic purpose.</li>

</ol>

<h4>The <span class="font-code">getattr()</span>, <span class="font-code">setattr()</span>, <span class="font-code">hasattr()</span> and <span class="font-code">delattr()</span> Built-in Functions</h4>

<p>You can access an object's attribute via the dot operator by hard-coding the attribute name, provided you know the attribute name in compile time. For example, you can read, write and delete an attribute via &quot;<code>obj_name.attr_name</code>&quot;, &quot;<code>obj_name.attr_name = value</code>&quot; and &quot;<code>del obj_name.attr_name</code>&quot;</p>

<p>Alternatively, you can use built-in functions like <code>getattr()</code> by using a variable to hold the attribute name, which will be bind during runtime.</p>
<ul>
<li><strong><code>getattr(obj_name, attr_name[, default]) -&gt; value</code></strong>: returns the value of the <code>attr_name</code> of the <code>obj_name</code>, equivalent to <code>obj_name.attr_name</code>. If the <code>attr_name</code> does not exist, it returns the <code>default</code> if present; otherwise, it raises <code>AttributeError</code>.</li>

<li><strong><code>setattr(obj_name, attr_name, attr_value)</code></strong>: sets the attribute, equivalent to <code>obj_name.attr_name = value</code>.</li>

<li><strong><code>hasattr(obj_name, attr_name) -&gt; bool</code></strong>: returns <code>True</code> if the <code>obj_name</code> contains the <code>atr_name</code>.</li>

<li><strong><code>delattr(obj_name, attr_name)</code></strong>: deletes the named attribute, equivalent to <code>del obj_name.attr_name</code>.</li>
</ul>

<p>For example:</p>

<pre class="color-command">
class MyClass:
    <span class="color-comment">&quot;&quot;&quot;This class contains an instance variable called var&quot;&quot;&quot;</span>
    def __init__(self, var):
        self.var = var

i = MyClass(8)
print(i.var)              <span class="color-comment"># 8</span>
print(getattr(i, 'var'))  <span class="color-comment"># 8</span>
print(getattr(i, 'no_var', 'default'))  <span class="color-comment"># default</span>
attr_name = 'var'
print(getattr(i, attr_name))  <span class="color-comment"># Using a variable</span>

setattr(i, 'var', 9)      <span class="color-comment"># Same as i.var = 9</span>
print(getattr(i, 'var'))  <span class="color-comment"># 9</span>

print(hasattr(i, 'var'))  <span class="color-comment"># True</span>
delattr(i, 'var')
print(hasattr(i, 'var'))  <span class="color-comment"># False</span></pre>


<h4>Class Variable vs. Instance Variables</h4>

<p>Class variables are shared by all instances, whereas instance variables are specific to that particular instance.</p>

<pre class="color-example">
class MyClass(object):
    count = 0  <span class="color-comment"># Total number of instances</span>
               <span class="color-comment"># Class variable shared by all instances</span>

    def __init__(self):
        self.__class__.count += 1   <span class="color-comment"># Increment count</span>
                                    <span class="color-comment"># or MyClass.count += 1</span>
        <span class="color-comment"># instance variable - id of the instance in running numbers</span>
        self.id = self.__class__.count

    def get_id(self):
        return self.id

    def get_count(self):
        return self.__class__.count

if __name__ == '__main__':
    print(MyClass.count)     <span class="color-comment"># 0</span>
    
    obj1 = MyClass()
    print(MyClass.count)     <span class="color-comment"># 1</span>
    print(obj1.get_id())     <span class="color-comment"># 1</span>
    print(obj1.get_count())  <span class="color-comment"># 1</span>
    
    obj2 = MyClass()
    print(MyClass.count)     <span class="color-comment"># 2</span>
    print(obj1.get_id())     <span class="color-comment"># 1</span>
    print(obj1.get_count())  <span class="color-comment"># 2</span>
    print(obj2.get_id())     <span class="color-comment"># 2</span>
    print(obj2.get_count())  <span class="color-comment"># 2</span></pre>


<p>[TODO]</p>

<h5>Private Variables?</h5>

<p>Python does not support access control. In other words, all attributes are public and are accessible by all. There is no private attributes.</p>

<p>However, by convention, names begin with an underscore (<code>_</code>) are meant for internal use, and are not recommended to be accessed directly.  Names begin with double underscores (<code>__</code>) (and not end with double underscores) are further hidden from direct access through name mangling.  Names begin and end with double underscores are special magic methods (to be discussed later).</p>

<p>For example,</p>

<pre class="color-example">
class MyClass(object):
    def __init__(self):
        self.var = 1       <span class="color-comment"># public</span>
        self._var = 2      <span class="color-comment"># meant for internal use (private) - don't access directly</span>
        self.__var = 3     <span class="color-comment"># name mangling</span>
        self.__var_ = 4    <span class="color-comment"># name mangling</span>
        self.__var__ = 5   <span class="color-comment"># magic attribute</span>

    def print(self):
        <span class="color-comment"># All variables can be used within the class definition</span>
        print(self.var)
        print(self._var)
        print(self.__var)
        print(self.__var_)
        print(self.__var__)

if __name__ == '__main__':
    obj1 = MyClass()
    print(obj1.var)
    print(obj1._var)
    <span class="color-comment"># Variables beginning with __ are not accessible outside the class
    # except those ending with __</span>
    #print(obj1.__var)    <span class="color-comment"># AttributeError</span>
    #print(obj1.__var_)   <span class="color-comment"># AttributeError</span>
    print(obj1.__var__)

    obj1.print()

    print(dir(obj1))
    <span class="color-comment"># ['_MyClass__var', '_MyClass__var_', '__var__', '_var', ...]
    # Variables beginning with __ are simply renamed?!</span></pre>


<h4>Example 3: Getter and Setter</h4>

<p>In this example, we shall rewrite the <code>Circle</code> class to access the instance variable via the getter and setter. We shall rename the instance variable to <code>_radius</code>, with getter <code>get_radius()</code> and setter <code>set_radius</code>, as follows:</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;circle.py: The circle module, which defines the Circle class&quot;&quot;&quot;</span>
from math import pi

class Circle(object):
    <span class="color-comment">&quot;&quot;&quot;A Circle instance models a circle with a radius&quot;&quot;&quot;</span>
    def __init__(self, _radius=1.0):
        <span class="color-comment">&quot;&quot;&quot;Constructor with default radius of 1.0&quot;&quot;&quot;</span>
        self.set_radius(_radius)   <span class="color-comment"># Call setter</span>

    def get_radius(self):
        <span class="color-comment">&quot;&quot;&quot;Getter for instance variable radius&quot;&quot;&quot;</span>
        return self._radius

    def set_radius(self, _radius):
        <span class="color-comment">&quot;&quot;&quot;Setter for instance variable radius with input validation&quot;&quot;&quot;</span>
        if _radius &lt; 0:
           raise ValueError("Radius shall be non-negative")
        self._radius = _radius

    def get_area(self):
        <span class="color-comment">&quot;&quot;&quot;Return the area of this Circle instance&quot;&quot;&quot;</span>
        return self.get_radius() * self.get_radius() * pi  <span class="color-comment"># Call getter</span>

    def __repr__(self):
        <span class="color-comment">&quot;&quot;&quot;Self description for this Circle instance, used by print() and str()&quot;&quot;&quot;</span>
        return 'Circle[radius=%.2f]' % self.get_radius()  <span class="color-comment"># Call getter</span>
        
if __name__ == '__main__':
    c1 = Circle(1.2)        <span class="color-comment"># Test constructor</span>
    print(c1)               <span class="color-comment"># Test __repr__(). Output: Circle[radius=1.20]</span>
    print(c1.__dict__)      <span class="color-comment"># Output: {'_radius': 1.2}</span>
    print(c1.get_area())    <span class="color-comment"># Output: 4.52389342117</span>
    print(c1.get_radius())  <span class="color-comment"># Test Getter. Output: 1.2</span>
    c1.set_radius(3.4)      <span class="color-comment"># Test Setter</span>
    print(c1)               <span class="color-comment"># Output: Circle[radius=3.40]</span>
    c1._radius = 5.6        <span class="color-comment"># Access instance variable directly</span>
    print(c1)               <span class="color-comment"># Output: Circle[radius=5.60]</span>
 
    c2 = Circle()    <span class="color-comment"># Default radius</span>
    print(c2)        <span class="color-comment"># Output: Circle[radius=1.00]</span>
 
    c3 = Circle(-5.6)  <span class="color-comment"># ValueError: Radius shall be non-negative</span></pre>
        
<p>How it Works</p>

<ol>
<li>While there is no concept of private variable in Python, we could still rewrite our <code>Circle</code> class with getter/setter, as in the above example. This is often done because the getter and setter need to carry out certain processing, such as data conversion in getter, or input validation in setter.</li>

<li>We renamed the instance variable <code>_radius</code>, with a leading underscore to denote it &quot;private&quot; (but it is still accessible to all). According to Python naming convention, names beginning with a underscore are to be treated as private, i.e., it shall not be used outside the class. We named our getter and setter <code>get_radius()</code> and <code>set_radius()</code>, respectively.</li>

<li>In the constructor, we invoke the setter to set the instance variable, instead of assign directly, as the setter performs input validation. Similarly, we use the getter in <code>get_area()</code> and <code>__repr__</code>.</li>
</ol>

<h4>Example 4: Creating a <span class="font-code">property</span> object via the <span class="font-code">property()</span> Built-in Function</h4>

<p>Add the following into the <code>Circle</code> class in the previous example:</p>

<pre class="color-example">
class Circle(object):
    ......
    <span class="color-comment"># Add a new property object called radius, given its getter and setter
    # Place this line after get_radius() and set_radius()</span>
    radius = property(get_radius, set_radius)</pre>

<p>This creates a new <code>property</code> object (instance variable) called <code>radius</code>, with the given getter/setter (which operates on the existing instance variable <code>_radius</code>). Recall that we have renamed our instance variable to <code>_radius</code>, so they do not crash.</p>

<p>You can now use this new property <code>radius</code>, just like an ordinary instance variable, e.g.,</p>

<pre class="color-example">
c1 = Circle(1.2)

<span class="color-comment"># Access (read/write) the new property radius directly</span>
print(c1.radius)    <span class="color-comment"># Run get_radius() to read _radius. Output: 1.2</span>
c1.radius = 3.4     <span class="color-comment"># Run set_radius(), which sets _radius</span>
print(c1.radius)    <span class="color-comment"># Run get_radius() to read _radius. Output: 3.4</span>
print(c1.__dict__)  <span class="color-comment"># Output: {'_radius': 3.4}</span>
print(dir(c1))      <span class="color-comment"># Output: ['_radius', 'get_radius', 'radius', 'set_radius', ...]</span>

<span class="color-comment"># The existing instance variable _radius, getter and setter are still available</span>
c1._radius = 5.6
print(c1._radius)       <span class="color-comment"># Output: 5.6</span>
c1.set_radius(7.8)
print(c1.get_radius())  <span class="color-comment"># Output: 7.8</span></pre>

<p>The built-in function <code>property()</code> has the following signature:</p>

<pre class="color-syntax">
property(fn_get=None, fn_set=None, fn_del=None, doc=None)</pre>

<p>You can specify a delete function, as well as a doc-string. For example,</p>

<pre class="color-example">
class Circle(object):
    ......
   
    def del_radius(self):
        del self._radius
      
    radius = property(get_radius, set_radius, del_radius, "This circle's radius")</pre>

<h4>Creating a property via the <span class="font-code">@property</span> Decorator</h4>

<p>In the above example, the statement:</p>

<pre class="color-example">
radius = property(get_radius, set_radius)</pre>

<p>is equivalent to:</p>

<pre class="color-example">
<span class="color-comment"># Create an empty property, getter and setter set to None</span>
radius = property()
<span class="color-comment"># Assign getter and setter functions</span>
radius = radius.getter(self.get_radius)
radius = radius.setter(self.set_radius)</pre>

<p>These can be implemented via Decorator <code>@property</code> and <code>@<em>varname</em>.setter</code>, respectively. For example,</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
&quot;&quot;&quot;circle.py: The circle module, which defines the Circle class&quot;&quot;&quot;</span>
from math import pi

class Circle(object):   <span class="color-comment"># @property does not work without subclassing object</span>
    <span class="color-comment">&quot;&quot;&quot;A Circle instance models a circle with a radius&quot;&quot;&quot;</span>
    def __init__(self, radius=1.0):
        <span class="color-comment">&quot;&quot;&quot;Constructor with default radius of 1.0&quot;&quot;&quot;</span>
        self.radius = radius   <span class="color-comment"># Call decorated setter</span>

    @property
    def radius(self):
        <span class="color-comment">&quot;&quot;&quot;Getter for instance variable radius&quot;&quot;&quot;</span>
        return self._radius  <span class="color-comment"># read the hidden instance variable _radius</span>
    <span class="color-comment"># Equivalent to:
    # def get_radius(self):
    #    return self._radius
    # radius = property(get_radius)</span>

    @radius.setter
    def radius(self, radius):
        <span class="color-comment">&quot;&quot;&quot;Setter for instance variable radius with input validation&quot;&quot;&quot;</span>
        if radius &lt; 0:
           raise ValueError("Radius shall be non-negative")
        self._radius = radius  <span class="color-comment"># set a hidden instance variable _radius</span>

    def get_area(self):
        <span class="color-comment">&quot;&quot;&quot;Return the area of this Circle instance&quot;&quot;&quot;</span>
        return self.radius * self.radius * pi  <span class="color-comment"># Call decorated getter</span>

    def __repr__(self):
        <span class="color-comment">&quot;&quot;&quot;Self description for this Circle instance, used by print() and str()&quot;&quot;&quot;</span>
        return 'Circle[radius=%.2f]' % self.radius  <span class="color-comment"># Call decorated getter</span>
 
if __name__ == '__main__':
    c1 = Circle(1.2)
    print(c1)
    print(c1.__dict__)    <span class="color-comment"># Output: {'_radius': 1.2}</span>
    print(dir(c1))        <span class="color-comment"># Output: ['_radius', 'radius', ...]]</span>
    c1.radius = 3.4       <span class="color-comment"># Setter</span>
    print(c1.radius)      <span class="color-comment"># Getter. Output: 3.4</span>
    print(c1._radius)     <span class="color-comment"># hidden instance variable. Output: 3.4</span>

    c2 = Circle()         <span class="color-comment"># Default radius</span>
    print(c2)
 
    c3 = Circle(-5.6)     <span class="color-comment"># ValueError: Radius shall be non-negative</span></pre>

<h5>How it Works</h5>

<ol>

<li>We use a hidden instance variable called <code>_radius</code> to store the radius, which is set in the setter, after input validation.</li>

<li>We renamed the getter from <code>get_radius()</code> to <code>radius</code>, and used the decorator <code>@property</code> to decorate the getter.</li>

<li>We also renamed the setter from <code>set_radius()</code> to <code>radius</code>, and use the decorator <code>@radius.setter</code> to decorate the setter.</li>

<li>[TODO] more</li>
</ol>

<h4>Inheritance</h4>

<h5>Example 1: The <span class="font-code">Cylinder</span> class as a subclass of <span class="font-code">Circle</span> class</h5>

<p>In this example, we shall define a <code>Cylinder</code> class, as a subclass of <code>Circle</code>. The <code>Cylinder</code> class shall inherit attributes <code>radius</code> and <code>get_area()</code> from the superclass <code>Circle</code>, and add its own attributes <code>height</code> and <code>get_volume()</code>.</p>

<p>[TODO] class diagram</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
"""cylinder.py: The cylinder module, which defines the Cylinder class"""</span>
from circle import Circle  <span class="color-comment"># Using the Circle class in the circle module</span>

class Cylinder(Circle):
    <span class="color-comment">"""The Cylinder class is a subclass of Circle"""</span>

    def __init__(self, radius = 1.0, height = 1.0):
        <span class="color-comment">"""Constructor"""</span>
        super().__init__(radius)  <span class="color-comment"># Invoke superclass' constructor (Python 3)</span>
            <span class="color-comment"># OR
            # super(Cylinder, self).__init__(radius)   (Python 2)
            # Circle.__init__(self, radius)            Explicit superclass class</span>
        self.height = height

    def __str__(self):
        <span class="color-comment">"""Self Description for print()"""</span>
        return 'Cylinder(radius=%.2f,height=%.2f)' % (self.radius, self.height)

    def get_volume(self):
        <span class="color-comment">"""Return the volume of the cylinder"""</span>
        return self.get_area() * self.height  <span class="color-comment"># Inherited get_area()</span>
 
<span class="color-comment"># For testing</span>
if __name__ == '__main__':
    cy1 = Cylinder(1.1, 2.2)
    print(cy1)
    print(cy1.get_area())   <span class="color-comment"># Use inherited superclass' method</span>
    print(cy1.get_volume()) <span class="color-comment"># Invoke its method</span>
 
    cy2 = Cylinder()        <span class="color-comment"># Default radius and height</span>
    print(cy2)
    print(cy2.get_area())
    print(cy2.get_volume())

    print(dir(cy1))
        <span class="color-comment"># ['get_area', 'get_volume', 'height', 'radius', ...]</span>
    print(Cylinder.get_area)
        <span class="color-comment"># &lt;function Circle.get_area at 0x7f490436b378&gt;
        # Inherited from the superclass</span>
    print(Circle.get_area)
        <span class="color-comment"># &lt;function Circle.get_area at 0x7f490436b378&gt;</span>
        
    print(issubclass(Cylinder, Circle))  <span class="color-comment"># True</span>
    print(issubclass(Circle, Cylinder))  <span class="color-comment"># False</span>
    print(isinstance(cy1, Cylinder))     <span class="color-comment"># True</span>
    print(isinstance(cy1, Circle))       <span class="color-comment"># True</span>
    print(Cylinder.__base__)             <span class="color-comment"># &lt;class 'circle.Circle'&gt;</span>
    print(Circle.__subclasses__())       <span class="color-comment"># [&lt;class '__main__.Cylinder'&gt;]</span></pre>
    
<h5>How it works?</h5>

<ol>
<li>When you construct a new instance of <code>Cylinder</code> via:
<pre class="color-example">
cy1 = Cylinder(1.1, 2.2)</pre>
Python first creates a plain <code>Cylinder</code> object and invokes the <code>Cylinder</code>'s <code>__init__()</code> with <code>self</code> binds to  the newly created <code>cy1</code>, as follows:
<pre class="color-example">
Cylinder.__init__(cy1, 1.1, 2.2)</pre>
Inside the <code>__init__()</code>, the <code>super().__init__(radius)</code> invokes the superclass' <code>__init__()</code>. (You can also explicitly call <code>Circle.__init__(self, radius)</code>.) This creates the instance variable <code>radius</code> for <code>cy1</code>. The next statement <code>self.height = height</code> creates the instance variable <code>height</code> for <code>cy1</code>.
<br />Take note that Python does not call the superclass' constructor automatically (unlike Java/C++).</li>
</ol>


<h5><span class="font-code">super()</span></h5>

<p>There are two ways to invoke a superclass method:</p>

<ol>
<li>via explicit classname: e.g.,
<pre class="color-example">
Circle.__init__(self)
Circle.get_area(self)
</pre>
</li>

<li>via <code>super()</code>: e.g.,
<pre class="color-example">
super().__init__(radius)                <span class="color-comment"># Python 3</span>
super(Cylinder, self).__init__(radius)  <span class="color-comment"># Python 2: super(this_class_name, self)</span>

super().get_area()                <span class="color-comment"># Python 3</span>
super(Cylinder, self).get_area()  <span class="color-comment"># Python 2</span></pre>

</li>
</ol>
<p>You can avoid hard-coding the superclass' name with <code>super()</code>. This is recommended, especially in multiple inheritance as it can resolve some conflicts (to be discussed later).</p>

<p>The <code>super()</code> method returns a proxy object that delegates method calls to a parent or sibling class. This is useful for accessing inherited methods that have been overridden in a class.</p>

    
<h5>Example 2: Method Overriding</h5>

<p>In this example, we shall override the <code>get_area()</code> method to return the surface area of the cylinder. We also rewrite the <code>__str__()</code> method, which also overrides the inherited method, to invoke the superclass version.  We need to rewrite the <code>get_volume()</code> to use the superclass' <code>get_area()</code>, instead of this class.</p>

<p>[TODO] Class diagram</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
"""cylinder.py: The cylinder module, which defines the Cylinder class"""</span>
from circle import Circle  <span class="color-comment"># Using the Circle class in the circle module</span>
from math import pi

class Cylinder(Circle):
    <span class="color-comment">"""The Cylinder class is a subclass of Circle"""</span>

    def __init__(self, radius = 1.0, height = 1.0):
        <span class="color-comment">"""Constructor"""</span>
        super().__init__(radius)  <span class="color-comment"># Invoke superclass' constructor</span>
        self.height = height

    def __str__(self):
        <span class="color-comment">"""Self Description for print()"""</span>
        return 'Cylinder(%s, height=%.2f)' % (super().__str__(), self.height)
                <span class="color-comment"># Use superclass' __str__()</span>

    <span class="color-comment"># Override</span>
    def get_area(self):   
        <span class="color-comment">"""Return the surface area the cylinder"""</span>
        return 2.0 * pi * self.radius * self.height

    def get_volume(self):
        <span class="color-comment">"""Return the volume of the cylinder"""</span>
        return super().get_area() * self.height  <span class="color-comment"># Use superclass' get_area()</span>
 
<span class="color-comment"># For testing</span>
if __name__ == '__main__':
    cy1 = Cylinder(1.1, 2.2)
    print(cy1)
    print(cy1.get_area())   <span class="color-comment"># Invoke overridden version</span>
    print(cy1.get_volume()) <span class="color-comment"># Invoke its method</span>
 
    cy2 = Cylinder()        <span class="color-comment"># Default radius and height</span>
    print(cy2)
    print(cy2.get_area())
    print(cy2.get_volume())

    print(dir(cy1))
        <span class="color-comment"># ['get_area', 'get_volume', 'height', 'radius', ...]</span>
    print(Cylinder.get_area)
        <span class="color-comment"># &lt;function Cylinder.get_area at 0x7f505f464488&gt;</span>
    print(Circle.get_area)
        <span class="color-comment"># &lt;function Circle.get_area at 0x7f490436b378&gt;</span></pre>

<ol>
<li>In Python, the overridden version replaces the inherited version, as shown in the above function references.</li>

<li>To access superclass' version of a method, use:
<ul>
<li>For Python 3: <code>super().method_name(*args)</code>, e.g., <code>super().get_area()</code></li>
<li>For Python 2: <code>super(this_class, self).method_name(*args)</code>, e.g., <code>super(Cylinder, self).get_area()</code></li>
<li>Explicitly via the class name: <code>superclass.method-name(self, *args)</code>, e.g., <code>Circle.get_area(self)</code></li>
</ul>
</li>
</ol>

<h5>Example 3: <span class="font-code">Shape</span> and its subclasses</h5>

<p>[TODO] Class diagram</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-
"""sh.py: The sh module. It contains superclass Shape and subclasses Circle, Rectangle and Square"""</span>
from math import pi

class Shape:    <span class="color-comment"># Python 2: class Shape(object):</span>
    <span class="color-comment">"""The superclass Shape with a variable color"""</span>
    def __init__(self, color = 'red'):  <span class="color-comment"># Constructor</span>
        self.color = color
    def __str__(self):  <span class="color-comment"># For print() and str()</span>
        return 'Shape(color=%s)' % self.color

class Circle(Shape):
    <span class="color-comment">"""The Circle class: a subclass of Shape with a radius"""</span>
    def __init__(self, radius = 1.0, color = 'red'):  <span class="color-comment"># Constructor</span>
        super().__init__(color)
        self.radius = radius
    def __str__(self):  <span class="color-comment"># For print() and str()</span>
        return 'Circle(%s, radius=%.2f)' % (super().__str__(), self.radius)
    def get_area(self):
        return self.radius * self.radius * pi

class Rectangle(Shape):
    <span class="color-comment">"""The Rectangle class: a subclass of Shape wit a length and width"""</span>
    def __init__(self, length = 1.0, width = 1.0, color = 'red'):  <span class="color-comment"># Constructor</span>
        super().__init__(color)
        self.length = length
        self.width = width
    def __str__(self):  <span class="color-comment"># For print() and str()</span>
        return 'Rectangle(%s, length=%.2f, width=%.2f)' % (super().__str__(), self.length, self.width)
    def get_area(self):
        return self.length * self.width

class Square(Rectangle):
    <span class="color-comment">"""The Square class: a subclass of Rectangle having the same length and width"""</span>
    def __init__(self, side = 1.0, color = 'red'):  <span class="color-comment"># Constructor</span>
        super().__init__(side, side, color)
    def __str__(self):  <span class="color-comment"># For print() and str()</span>
        return 'Square(%s)' % super().__str__()

<span class="color-comment"># For Testing</span>
if __name__ == '__main__':
    s1 = Shape('orange')
    print(s1)
    print(s1.color)
 
    c1 = Circle(1.2, 'orange')
    print(c1)
    print(c1.get_area())
 
    r1 = Rectangle(1.2, 3.4, 'orange')
    print(r1)
    print(r1.get_area())
 
    sq1 = Square(5.6, 'orange')
    print(sq1)
    print(sq1.get_area())</pre>

<h4>Multiple Inheritance</h4>

<p>Python supports multiple inheritance, which is defined in the form of &quot;<code>class class_name(base_class_1, base_class_2,...):...</code>&quot;.</p>


<h5>Mixin Pattern</h5>

<p>The simplest and most useful pattern of multiple inheritance is called mixin. A mixin is a superclass that is not meant to exist on its own, but meant to be inherited by some sub-classes to provide extra functionality.</p>

<p>[TODO]</p>

<h5>Diamond Problem</h5>

<p>Suppose that two classes <code>B</code> and <code>C</code> inherit from a superclass <code>A</code>, and <code>D</code> inherits from both <code>B</code> and <code>C</code>. If <code>A</code> has a method called <code>m()</code>, and <code>m()</code> is overridden by <code>B</code> and/or <code>C</code>, then which version of <code>m()</code> is inherited by <code>D</code>?</p>

<p>[TODO] class diagram</p>

<p>Let's look at Python's implementation.</p>

<p>Example 1</p>

<pre class="color-example">
class A:
    def m(self):
        print('in Class A')

class B(A):
    def m(self):
        print('in Class B')
    
class C(A):
    def m(self):
        print('in Class C')

<span class="color-comment"># Inherits from B, then C. It does not override m()</span>
class D1(B,C):  
    pass

<span class="color-comment"># Different order of subclass list</span>
class D2(C,B):
    pass

<span class="color-comment"># Override m()</span>
class D3(B,C):
    def m(self):
        print('in Class D3')</pre>


if __name__ == '__main__':
    x = D1()
    x.m()   <span class="color-comment"># 'in Class B' (first in subclass list)</span>

    x = D2()
    x.m()   <span class="color-comment"># 'in Class C' (first in subclass list)</span>
    
    x = D3()
    x.m()   <span class="color-comment"># 'in Class D3' (overridden version)</span>

<p>Example 2: Suppose the overridden <code>m()</code> in <code>B</code> and <code>C</code> invoke <code>A</code>'s <code>m()</code> explicitly.</p>

<pre class="color-example">
class A:
    def m(self):
        print('in Class A')

class B(A):
    def m(self):
        A.m(self)
        print('in Class B')
    
class C(A):
    def m(self):
        A.m(self)
        print('in Class C')

class D(B,C):
    def m(self):
        B.m(self)
        C.m(self)
        print('in Class D')


if __name__ == '__main__':
    x = D()
    x.m()</pre>

<p>The output is:</p>

<pre class="output">
in Class A
in Class B
in Class A
in Class C
in Class D</pre>

<p>Take note that <code>A</code>'s <code>m()</code> is run twice, which is typically not desired. For example, suppose that <code>m()</code> is the <code>__init__()</code>, then <code>A</code> will be initialized twice.</p>

<p>Example 3: Using <code>super()</code></p>

<pre class="color-example">
class A:
    def m(self):
        print('in Class A')

class B(A):
    def m(self):
        super().m()
        print('in Class B')
    
class C(A):
    def m(self):
        super().m()
        print('in Class C')

class D(B,C):
    def m(self):
        super().m()
        print('in Class D')

if __name__ == '__main__':
    x = D()
    x.m()</pre>

<pre class="output">
in Class A
in Class C
in Class B
in Class D</pre>

<p>With <code>super()</code>, <code>A</code>'s <code>m()</code> is only run once.  This is because <code>super()</code> uses the so-called Method Resolution Order (MRO) to <em>linearize</em> the superclass.  Hence, <code>super()</code> is strongly recommended for multiple inheritance, instead of explicit class call.</p>

<p>Example 4: Let's look at <code>__init__()</code>.</p>

<pre class="color-example">
class A:
    def __init__(self):
        print('init A')
    
class B(A):
    def __init__(self):
        super().__init__()
        print('init B')
    
class C(A):
    def __init__(self):
        super().__init__()
        print('init C')

class D(B,C):
    def __init__(self):
        super().__init__()
        print('init D')

if __name__ == '__main__':
    d = D()
    <span class="color-comment"># init A
    # init C
    # init B
    # init D</span>
    
    c = C()
    <span class="color-comment"># init A
    # init C</span>
    
    b = B()
    <span class="color-comment"># init A
    # init B</span></pre>
    
<p>Each superclass is initialized exactly once, as desired.</p>

<p>You can check the MRO via the <code>mro()</code> member method:</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>D.mro()</strong>
[&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]
&gt;&gt;&gt; <strong>C.mro()</strong>
[&lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]
&gt;&gt;&gt; <strong>B.mro()</strong>
[&lt;class '__main__.B'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;]</pre>

<h4>Abstract Methods</h4>

<p>An abstract method has no implementation, and therefore cannot be called. The subclasses shall overrides the abstract methods inherited and provides their own implementations.</p>

<p>In Python 3, you can use decorator <code>@abstractmethod</code> to mark an abstract method. For example,</p>

<pre class="color-example">
@abstractmethod
def method_name(self, ...):
    pass</pre>

<p>[TODO] more</p>

<h4>Polymorphism</h4>

<p>Polymorphism in Programming is the ability to present the same interface for differing underlying forms. For example, a polymorphic function can be applied to arguments of different types, and it behaves differently depending on the type of the arguments to which they are applied.</p>

<p>Python is implicitly polymorphic, as type are associated with objects instead of variable references.</p>

<h4>Magic Methods</h4>

<p>A <em>magic method</em> is an object's member methods that begins and ends with double underscore, e.g., <code>__init__()</code>, <code>__add__()</code>, <code>__len__()</code>.</p>

<p>As an example, we list the magic methods in the <code>int</code> class:</p>
<pre class="color-example">
&gt;&gt;&gt; <strong>dir(int)</strong>
['__abs__', '__add__', '__and__', '__bool__', '__ceil__', ...]</pre>

<p>In Python, built-in operators and functions invoke the corresponding magic methods. For example, operator <code>'+'</code> invokes <code>__add__()</code>, built-in function <code>len()</code> invokes <code>__len__()</code>. Even though the magic methods are invoked <em>implicitly</em> via built-in operators and functions, you can also call them explicitly, e.g., <code>'abc'.__len__()</code> is the same as <code>'abc'.len()</code>.</p>

<p>The following table summarizes the commonly-used magic methods and their invocation.</p>

<table class="table-zebra" style="width:90%">
  <thead>
  <tr>
    <th>Magic Method</th>
    <th>Invoked Via</th>
    <th>Invocation Syntax</th>
  </tr>
  </thead>
  
  <tbody class="font-code">
  <tr class="tr-alt">
    <td>__lt__(self, other)<br />__gt__(self, other)<br />__le__(self, other)<br />__ge__(self, other)<br />__eq__(self, other)<br />__ne__(self, other)</td>
    <td class="font-normal">Comparison Operators</td>
    <td>self &lt; other<br />self &gt; other<br />self &lt;= other<br />self &gt;= other<br />self == other<br />self != other<br /></td>
  </tr>
  
  <tr>
    <td>__add__(self, other)<br />__sub__(self, other)<br />__mul__(self, other)<br />__truediv__(self, other)<br />__floordiv__(self, other)<br />__mod__(self, other)<br />__pow__(self, other)</td>
    <td class="font-normal">Arithmetic Operators</td>
    <td>self + other<br />self - other<br />self * other<br />self / other<br />self // other<br />self % other<br />self ** other</td>
  </tr>

  <tr class="tr-alt">
    <td>__and__(self, other)<br />__or__(self, other)<br />__xor__(self, other)<br />__invert__(self)<br />__lshift__(self, n)<br />__rshift__(self, n)</td>
    <td class="font-normal">Bitwise Operators</td>
    <td>self &amp; other<br />self | other<br />self ^ other<br />~self<br />self &lt;&lt; n<br />self &gt;&gt; n</td>
  </tr>
  
  <tr>
    <td>__str__(self)<br />__repr__(self)<br />__sizeof__(self)</td>
    <td class="font-normal">Function call</td>
    <td>str(self), print(self)<br />repr(self)<br />sizeof(self)</td>
  </tr>
  
  <tr class="tr-alt">
    <td>__len__(self)<br />__contains__(self, item)<br />__iter__(self)<br />__next__(self)<br />__getitem__(self, key)<br />__setitem__(self, key, value)<br />__delitem__(self, key)</td>
    <td class="font-normal">Sequence Operators &amp; Functions</td>
    <td>len(self)<br />item in self<br />iter(self)<br />next(self)<br />self[key]<br />self[key] = value<br />del self[key]</td>
  </tr>

  <tr>
    <td>__int__(self)<br />__float__(self)<br />__bool__(self)<br />__oct__(self)<br />__hex__(self)</td>
    <td class="font-normal">Type Conversion Function call</td>
    <td>int(self)<br />float(self)<br />bool(self)<br />oct(self)<br />hex(self)</td>
  </tr>
  
  <tr class="tr-alt">
    <td>__init__(self, *args)<br />__new__(cls, *args)</td>
    <td class="font-normal">Constructor</td>
    <td>x = ClassName(*args)</td>
  </tr>

  <tr>
    <td>__del__(self)</td>
    <td class="font-normal">Operator <code>del</code></td>
    <td>del x</td>
  </tr>

  <tr>
    <td>__index__(self)</td>
    <td class="font-normal">Convert this object to an index</td>
    <td>x[self]</td>
  </tr>

  <tr>
    <td>__radd__(self, other)<br />__rsub__(self, other)<br />...</td>
    <td class="font-normal">RHS (Reflected) addition, subtraction, etc.</td>
    <td>other + self<br />other - self<br />...</td>
  </tr>

  <tr class="tr-alt">
    <td>__iadd__(self, other)<br />__isub__(self, other)<br />...</td>
    <td class="font-normal">In-place addition, subtraction, etc</td>
    <td>self += other<br />self -= other<br />...</td>
  </tr>

  <tr>
    <td>__pos__(self)<br />__neg__(self)</td>
    <td class="font-normal">Unary Positive and Negative operators</td>
    <td>+self<br />-self</td>
  </tr>

  <tr class="tr-alt">
    <td>__round__(self)<br />__floor__(self)<br />__ceil__(self)<br />__trunc__(self)</td>
    <td class="font-normal">Function Call</td>
    <td>round(self)<br />floor(self)<br />ceil(self)<br />trunc(self)</td>
  </tr>

  <tr>
    <td>__getattr__(self, name)<br />__setattr__(self, name, value)<br />__delattr__(self, name)</td>
    <td class="font-normal">Object's attributes</td>
    <td>self.name<br />self.name = value<br />del self.name</td>
  </tr>

  <tr class="tr-alt">
    <td>__call__(self, *args, **kwargs)</td>
    <td class="font-normal">Callable Object</td>
    <td>obj(*args, **kwargs);</td>
  </tr>

  <tr>
    <td>__enter__(self), __exit__(self)</td>
    <td>Context Manager <code>with</code>-statement</td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
</table>

<h4>Construction and Initialization</h4>

<p>When you use <code>x = ClassName(*args)</code> to construct an instance of <code>x</code>, Python first calls <code>__new__(cls, *args)</code> to create an instance, it then invokes <code>__init__(self, *args)</code> (the initializer) to initialize the instance.</p>

<h4>Operator Overloading</h4>

<p>Python supports <em>operators overloading</em> (like C++) via overriding the corresponding magic functions.</p>

<p>Example: Override the '==' operator for the <code>Circle</code> class</p>

<pre class="color-example">
class Circle(object):
    def __init__(self, radius):
        self.radius = radius

    def __eq__(self, other):
        &quot;&quot;&quot;Override operator '==' to compare the two radius&quot;&quot;&quot;
        if self.__class__.__name__ == other.__class__.__name__:
            return self.radius == other.radius
        raise TypeError(&quot;not a 'Circle' object&quot;)

if __name__ == '__main__':
    print(Circle(8) == Circle(8))   <span class="color-comment"># True</span>
    print(Circle(8) == Circle(88))  <span class="color-comment"># False</span>
    print(Circle(8) == 'abc')       <span class="color-comment"># TypeError</span></pre>

<p>[TODO] more examples</p>


<h4>Iterable and Iterator: <span class="font-code">iter()</span> and <span class="font-code">next()</span></h4>

<p>Python iterators are supported by two magic member methods: <code>__iter__(self)</code> and <code>__next__(self)</code>.</p>
<ul>
<li>The Iterable object (such as list) shall implement the <code>__iter__(self)</code> member method to return an iterator object. This method can be invoked explicitly via <code>iterable.__iter__()</code>, or implicitly via <code>iter(iterable)</code> or <code>for .. in iterable</code> loop.</li>

<li>The returned iterator object shall implement the <code>__next__(self)</code> method to return the next item, or raise <code>StopIeration</code> if there is no more item. This method can be invoked explicitly via <code>iterator.__next__()</code>, or implicitly via <code>next(iterator)</code> or within the <code>for .. in iterable</code> loop.</li>
</ul>

<h5>Example</h5>
<p>list is an iterable that supports iterator.</p>

<pre class="color-example">
<span class="color-comment"># Using iter() and next() built-in functions</span>
&gt;&gt;&gt; <strong>list_itr = iter([11, 22, 33])</strong>  <span class="color-comment"># Get an iterator from a list</span>
&gt;&gt;&gt; <strong>list_itr</strong>
&lt;list_iterator object at 0x7f945e438550&gt;
&gt;&gt;&gt; <strong>next(list_itr)</strong>
11
&gt;&gt;&gt; <strong>next(list_itr)</strong>
22
&gt;&gt;&gt; <strong>next(list_itr)</strong>
33
&gt;&gt;&gt; <strong>next(list_itr)</strong>  <span class="color-comment"># No more item, raise StopIteration</span>
...... 
StopIteration

<span class="color-comment"># Using __iter__() and __next__() member methods</span>
&gt;&gt;&gt; <strong>list_itr2 = [44, 55].__iter__()</strong>
&gt;&gt;&gt; <strong>list_itr2</strong>
&lt;list_iterator object at 0x7f945e4385f8&gt;
&gt;&gt;&gt; <strong>list_itr2.__next__()</strong>
44
&gt;&gt;&gt; <strong>list_itr2.__next__()</strong>
55
&gt;&gt;&gt; <strong>list_itr2.__next__()</strong>
StopIteration

<span class="color-comment"># The &quot;for .. in iterable&quot; loop uses iterator implicitly</span>
&gt;&gt;&gt; <strong>for item in [11, 22, 33]:
   print(item)</strong></pre>

<h5>Example 2</h5>

<p>Let's implement our own iterator.  The following <code>RangeDown(min, max)</code> is similar to <code>range(min, max + 1)</code>, but counting down. In this example, the iterable and iterator are in the same class.</p>

<pre class="color-example">
class RangeDown(object):
    &quot;&quot;&quot;Iterator from max down to min (both inclusive)&quot;&quot;&quot;

    def __init__(self, min, max):
        self.current = max + 1
        self.min = min

    def __iter__(self):
        return self

    def __next__(self):
        self.current -= 1
        if self.current &lt; self.min:
            raise StopIteration
        else:
            return self.current
          
if __name__ == '__main__':
    <span class="color-comment"># Use iter() and next()</span>
    itr = iter(RangeDown(6, 8))
    print(next(itr))   <span class="color-comment"># 8</span>
    print(next(itr))   <span class="color-comment"># 7</span>
    print(next(itr))   <span class="color-comment"># 6</span>
    #print(next(itr))  <span class="color-comment"># StopIteration</span>

    <span class="color-comment"># Iterate in for-in loop</span>
    for i in RangeDown(6, 8):
        print(i, end=" ")  <span class="color-comment"># 8 7 6</span>
    print()

    <span class="color-comment"># Use __iter__() and __next__()</span>
    itr2 = RangeDown(9, 10).__iter__()
    print(itr2.__next__())  <span class="color-comment"># 10</span>
    print(itr2.__next__())  <span class="color-comment"># 9</span>
    print(itr2.__next__())  <span class="color-comment"># StopIteration</span></pre>


<h5>Example</h5>

<p>Let's separate the tterable and iterator in two classes.</p>

<pre class="color-example">
class RangeDown(object):
    """Iterator from max down to min (both inclusive)"""

    def __init__(self, min, max):
        self.min = min
        self.max = max

    def __iter__(self):
        return RangeDownIterator(self.min, self.max)

class RangeDownIterator(object):

    def __init__(self, min, max):
        self.min = min
        self.current = max + 1

    def __next__(self):
        self.current -= 1
        if self.current &lt; self.min:
            raise StopIteration
        else:
            return self.current
    
if __name__ == '__main__':
    itr = iter(RangeDown(6, 8))
    print(next(itr))   <span class="color-comment"># 8</span>
    print(next(itr))   <span class="color-comment"># 7</span>
    print(next(itr))   <span class="color-comment"># 6</span>
    #print(next(itr))  <span class="color-comment"># StopIteration</span></pre>


<h4>Generator and <span class="font-code">yield</span></h4>

<p>A generator function is a function that can produce a sequence of results instead of a single value.  A generator function returns a generator iterator object, which is a special type of iterator where you can obtain the next elements via <code>next()</code>.</p>

<p>A generator function is like an ordinary function, but instead of using <code>return</code> to return a value and exit, it uses <code>yield</code> to produce a new result. A function which contains <code>yield</code> is automatically a generator function.</p>

<p>Generators are useful to create iterators.</p>

<h5>Example: A Simple Generator</h5>

<pre class="color-example">
&gt;&gt;&gt; <strong>def my_simple_generator():
   yield(11)
   yield(22)
   yield(33)</strong>
   
&gt;&gt;&gt; <strong>g1 = my_simple_generator()</strong>
&gt;&gt;&gt; <strong>g1</strong>
&lt;generator object my_simple_generator at 0x7f945e441990&gt;
&gt;&gt;&gt; <strong>next(g1)</strong>
11
&gt;&gt;&gt; <strong>next(g1)</strong>
22
&gt;&gt;&gt; <strong>next(g1)</strong>
33
&gt;&gt;&gt; <strong>next(g1)</strong>
......
StopIteration
&gt;&gt;&gt; <strong>for item in my_simple_generator(): print(item, end=' ')</strong>
11 22 33</pre>

<h5>Example 2</h5>

<p>The following generator function <code>range_down(min, max)</code> implements the count-down version of <code>range(min, max+1)</code>.</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>def range_down(min, max):
   &quot;&quot;&quot;A generator function contains yield statement and creates a generator iterator object&quot;&quot;&quot;
   current = max
   while current >= min:
       yield current</strong>  <span class="color-comment"># Produce a result each time it is run</span>
       <strong>current -= 1</strong>   <span class="color-comment"># Count down</span>

&gt;&gt;&gt; <strong>range_down(5, 8)</strong>
&lt;generator object range_down at 0x7f5e34fafc18&gt;  <span class="color-comment"># A generator function returns a generator object</span>

<span class="color-comment"># Using the generator in the for-in loop</span>
&gt;&gt;&gt; <strong>for i in range_down(5, 8):
   print(i, end=" ")</strong>  <span class="color-comment"># 8 7 6 5</span>

<span class="color-comment"># Using iter() and next()</span>
&gt;&gt;&gt; <strong>itr = range_down(2, 4)</strong>  <span class="color-comment"># or iter(range_down(2, 4))</span>
&gt;&gt;&gt; <strong>itr</strong>
&lt;generator object range_down at 0x7f230d53a168&gt;
&gt;&gt;&gt; <strong>next(itr)</strong>
4
&gt;&gt;&gt; <strong>next(itr)</strong>
3
&gt;&gt;&gt; <strong>next(itr)</strong>
2
&gt;&gt;&gt; <strong>next(itr)</strong>
StopIteration

<span class="color-comment"># Using __iter__() and __next__()</span>
&gt;&gt;&gt; <strong>itr2 = range_down(5, 6).__iter__()</strong>
&gt;&gt;&gt; <strong>itr2</strong>
&lt;generator object range_down at 0x7f230d53a120&gt;
&gt;&gt;&gt; <strong>itr2.__next__()</strong>
6
&gt;&gt;&gt; <strong>itr2.__next__()</strong>
5
&gt;&gt;&gt; <strong>itr2.__next__()</strong>
StopIteration</pre>

<p>Each time the <code>yield</code> statement is run, it produce a new value, and updates the state of the generator iterator object.</p>

<h5>Example 3</h5>

<p>We can have generators which produces infinite value.</p>


<pre class="color-example">
from math import sqrt, ceil

def gen_primes(number):
    <span class="color-comment">"""A generator function to generate prime numbers, starting from number"""</span>
    while True:   <span class="color-comment"># No upperbound!</span>
        if is_prime(number):
            yield number
        number += 1


def is_prime(number:int) -&gt; int:
    if number &lt;= 1:
        return False

    factor = 2
    while (factor &lt;= ceil(sqrt(number))):
        if number % factor == 0: return False
        factor += 1

    return True


if __name__ == '__main__':
    g = gen_primes(8)     <span class="color-comment"># From 8</span>
    for i in range(100):  <span class="color-comment"># Generate 100 prime numbers</span>
        print(next(g))</pre>

<h5>Generator Expression</h5>

<p>A generator expression has a similar syntax as a list/dictionary comprehension (for generating a list/dictionary), but surrounded by braces and produce a generator iterator object. (Note: braces are used by tuples, but they are immutable and thus cannot be comprehended.) For example,</p>

<pre class="color-example">
&gt;&gt;&gt; <strong>a = (x*x for x in range(1,5))</strong>
&gt;&gt;&gt; <strong>a</strong>
&lt;generator object &lt;genexpr&gt; at 0x7f230d53a2d0&gt;
&gt;&gt;&gt; <strong>for item in a: print(item, end=' ')</strong>
1 4 9 16 
&gt;&gt;&gt; <strong>sum(a)</strong>  <span class="color-comment"># Applicable to functions that consume iterable</span>
30
&gt;&gt;&gt; <strong>b = (x*x for x in range(1, 10) if x*x % 2 == 0)</strong>
&gt;&gt;&gt; <strong>for item in b: print(item, end=' ')</strong>
4 16 36 64 

<span class="color-comment"># Compare with list/dictionary comprehension for generating list/dictionary</span>
&gt;&gt;&gt; <strong>lst = [x*x for x in range(1, 10)]</strong>
&gt;&gt;&gt; <strong>lst</strong>
[1, 4, 9, 16, 25, 36, 49, 64, 81]
&gt;&gt;&gt; <strong>dct = {x:x*x for x in range(1, 10)}</strong>
&gt;&gt;&gt; <strong>dct</strong>
{1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}</pre>

<h4>Callable</h4>

<p>In Python, you can call an object to execute some codes, just like calling a function. This is done by providing a <code>__call__()</code> member method.  For example,</p>

<pre class="color-example">
class MyCallable(object):

    def __init__(self, value):
        self.value = value

    def __call__(self):
        return 'The value is %s' % self.value

if __name__ == '__main__':
    <span class="color-comment"># Construct an instance</span>
    obj = MyCallable(88)
    <span class="color-comment"># Call the instance, invoke __call__()</span>
    print(obj())  <span class="color-comment"># Output: The value is 88</span></pre>
    
<h4>Context Manager: <span class="font-code">__enter__()</span> and <span class="font-code">__exit__()</span></h4>

<p>[TODO]</p>




<h3 id="unitest">Unit Testing</h3>

<p>Testing is CRTICALLY IMPORTANT in software development. You should write your test before or along side your development.</p>

<p>In python, you can carry out unit testing via built-in modules <code>unittest</code> and <code>doctest</code>.</p>


<h4><span class="font-code">unittest</span></h4>

<p>The <code>unittest</code> module supports all features needed to run unit tests:</p>
<ul>
<li>Test Case: consists of a sets of test methods, supported by <code>testunit.TestCase</code> class.</li>
<li>Test Suite: a collection of test cases, or test suites, or both; supported by <code>testunit.TestSuite</code> class.</li>
<li>Test Fixture: Items and preparations needed to run a test; supported via the <code>setup()</code> and <code>tearDown()</code> method in <code>unittest.TestCase</code> class.</li>
<li>Test Runner: run the tests and report the results; supported via <code>unittest.TestRunner</code>, <code>unittest.TestResult</code>, etc.</li>
</ul>


<h5>Example 1: Writing Test Case</h5>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-</span>
import unittest

<span class="color-comment"># Define a function to be unit-tested</span>
def my_sum(a, b):
    &quot;&quot;&quot;Return a + b&quot;&quot;&quot;
    return a + b

<span class="color-comment"># Define a test case, which consists of a set of test methods.</span>   
class TestMySum(unittest.TestCase):  <span class="color-comment"># subclass of TestCase</span>
    def test_positive_input(self):
        result = my_sum(8, 80)
        self.assertEqual(result, 88)

    def test_negative_inputs(self):
        result = my_sum(-9, -90)
        self.assertEqual(result, -99)

    def test_mixed_inputs(self):
        result = my_sum(8, -9)
        self.assertEqual(result, -1)

    def test_zero_inputs(self):
        result = my_sum(0, 0)
        self.assertEqual(result, 0)

if __name__ == '__main__':
    unittest.main()  <span class="color-comment"># Run all tests</span></pre>
   
<p>The expected outputs are:</p>
<pre class="output">
....
----------------------------------------------------------------------
Ran 4 tests in 0.001s
OK</pre>

<h5>How it Works</h5>

<ol>
<li>You can create a test case by sub-classing <code>test.TestCase</code>.</li>
<li>Write you test methods, which shall begin with <code>test</code>.</li>

<li>You can use the generic <code>assert</code> statement.</li>

<li>You can also use the <code>assertXxx()</code> methods provided by <code>test.TestCase</code> class. These method takes an optional argument <code>msg</code> that holds a message to be display if assertion fails. For examples,

<ul>
<li><code>assertEqual(a, b, [msg])</code>, <code>assertNotEqual(a, b, [msg])</code></li>
<li><code>assertTrue(a, [msg])</code>, <code>assertFalse(a, [msg])</code></li>
<li><code>assertIsNone(expr, [msg])</code>, <code>assertIsNotNone(expr, [msg])</code></li>
<li><code>assertIn(a, b, [msg])</code>, <code>assertNotIn(a, b, [msg])</code></li>
<li><code>assertIs(obj1, obj2, [msg])</code>, <code>assertIsNot(obj1, obj2, [msg])</code></li>
<li><code>assertIsInstance(obj, class, [msg])</code>, <code>assertIsNotInstance(obj, class, [msg])</code></li>
<li><code>assertRaises(exception)</code></li>
<li><code>assertGreater(a, b, [msg])</code>, <code>assertLess(a, b, [msg])</code></li>
<li><code>assertGreaterEqual(a, b, [msg])</code>, <code>assertLessEqual(a, b, [msg])</code></li>
<li><code>assertAlmostEqual(a, b, [msg])</code>, <code>assertNotAlmostEqual(a, b, [msg])</code></li>
<li><code>assertDictEqual(a, b, [msg])</code>, <code>assertListEqual(a, b, [msg])</code>, <code>assertTupleEqual(a, b, [msg])</code>, <code>assertSetEqual(a, b, [msg])</code>, <code>assertSequenceEqual(a, b, [msg])</code></li>
<li><code>assertItemsEqual(a, b, [msg])</code></li>
<li><code>assertDictContainsSubset(a, b, [msg])</code></li>

<li>Many more, see the <code>unittest</code> API documentation.</li>
</ul>
</li>

<li>Test cases and test methods run in alphanumeric order.</li> 

</ol>

<h5>Setting up Test Fixture</h5>

<p>You can setup your test fixtures, which are available to all the text methods, via <code>setup()</code> and tearDown() methods.</p>

<p>[TODO] Example</p>

<h5>Using Test Suite</h5>

<p>You can organize your test cases into test suites. For example,</p>

<pre class="color-example">
<span class="color-comment"># Define a test suite</span>
def my_suite1():
    suite = unittest.TestSuite()
    suite.addTest(MyTestCase('test_method1'))  <span class="color-comment"># add a test method</span>
    suite.addTest(MyTestCase('test_method2'))
    return suite
   
<span class="color-comment"># Or, generate test suite for all testXxx() methods of a test case</span>
my_suite2 = unittest.TestLoader().loadTestsFromTestCase(MyTestCase)

<span class="color-comment"># Run test suite</span>
if __name__ == "__main__":
    runner = unittest.TextTestRunner()  <span class="color-comment"># Use a text-based TestRunner</span>
    runner.run(my_suite1())
    runner.run(my_suite2)</pre>

<h5>Skipping Tests</h5>

<p>Use <code>unittest.skip([msg])</code> decorator to skip one test, e.g.,</p>

<pre class="color-example">
@unittest.skip('msg')  <span class="color-comment"># decorator to skip this test</span>
def test_x():
    ......</pre>

<p>Invoke instance method <code>skipTest([msg])</code> inside the test method to skip the test, e.g.,</p>

<pre class="color-example">
def test_x():
    self.skipTest()  <span class="color-comment"># skip this test</span>
    ......</pre>

<p>You can use decorator <code>unittest.skipIf(condition, [msg])</code>, <code>@unittest.skipUnless(condition, [msg])</code>, for conditional skip.</p>

<h5>Fail Test</h5>

<p>To fail a test, use instance method <code>fail([msg])</code>.</p>

<h4><span class="font-code">doctest</span></h4>

<p>Embed the test input/output pairs in the doc-string, and invoke <code>doctest.testmod()</code>. For example,</p>

<pre class="color-example">
<span class="color-comment">#!/usr/bin/python
# -*- coding: UTF-8 -*-</span>
import doctest

<span class="color-comment"># Define a function to be unit-tested</span>
def my_sum(a, b):
    &quot;&quot;&quot;(number, number) -&gt; number
    Return a + b

    For use by doctest:
    <strong>&gt;&gt;&gt; my_sum(8, 80)
    88
    &gt;&gt;&gt; my_sum(-9, -90)
    -99
    &gt;&gt;&gt; my_sum(8, -9)
    -1
    &gt;&gt;&gt; my_sum(0, 0)
    0</strong>
    &quot;&quot;&quot;
    return a + b

if __name__ == '__main__':
    doctest.testmod(verbose=1)</pre>
   
<p>Study the outputs:</p>
<pre class="output">
Trying:
    my_sum(8, 80)
Expecting:
    88
ok
......</pre>

<p>The &quot;<code>(number, number) -&gt; number</code>&quot; is known as type contract, which spells out the expected types of the parameters and return value.</p>



<h3>Performance Measurement</h3>
<p>You can use modules <code>timeit</code>, <code>profile</code> and <code>pstats</code> for profiling Python program and performance measurements.</p>

<p>[TODO] examples</p>


<!-- @@ start change in v1 -->
<p class="references">REFERENCES &amp; RESOURCES</p>

<ol>
<li>The Python's mother site @ <a href="http://www.python.org">www.python.org</a>; &quot;The Python Documentation&quot; @ <a href="https://www.python.org/doc/">https://www.python.org/doc/</a>; &quot;The Python Tutorial&quot; @ <a href="https://docs.python.org/tutorial/">https://docs.python.org/tutorial/</a>; &quot;The Python Language Reference&quot; @ <a href="https://docs.python.org/reference/">https://docs.python.org/reference/</a>.</li>
<li>Vernon L. Ceder, &quot;The Quick Python Book&quot;, 2nd ed, 2010, Manning (Good starting guide for experience programmers who wish to learning Python).</li>
<li>Mark Lutz, &quot;Learning Python&quot;, 5th ed, 2013; &quot;Programming Python&quot;, 4th ed, 2011; &quot;Python Pocket Reference&quot;, 5th ed, 2014, O'reilly.</li>
</ol>

</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Latest version tested: Python (Ubuntu) 2.7 and 3.4<br />
Last modified: June, 2016</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="header-footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->
<!-- @@ end change in v1 -->
</body>
</html>
