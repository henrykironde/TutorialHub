<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"> 
<title>JavaScript and jQuery by Examples</title>
<link rel="stylesheet" href="../css/programming_notes_v1.css">
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
<script src="../scripts/programming_notes_v1.js"></script>
</head>

<body>

<div id="wrap-outer">

<!-- header filled by JavaScript -->
<div id="header" class="header-footer"><p>&nbsp;</p></div>

<div id="wrap-inner">

<div id="wrap-toc">
<h5>TABLE OF CONTENTS <a id="show-toc" href="#show-toc">(HIDE)</a></h5>
<div id="toc"></div>  <!-- for showing the "Table of Content" -->
</div>

<div id="content-header">
<h1>JavaScript/jQuery Examples</h1>
</div>

<div id="content-main">

<p>Read &quot;<a href="JavaScript_Introduction.html#JavaScript_Debug">Writing and Debugging JavaScripts</a>&quot;, before trying out these examples. At a minimum, you should have the &quot;Firebug&quot; (or Web Developer Tools). It is very difficult to debug JavaScript codes due to its loose syntax. One misspell character in variable or function name, may waste a lot of your time, as JavaScript treat it as a new item or abort the function.</p>

<p>It is a good practice to separate the HTML <em>contents</em>, CSS <em>presentation</em> styles and JavaScript <em>behavior</em> programming codes in three different files, &quot;<code>.html</code>&quot;, &quot;<code>.css</code>&quot; and &quot;<code>.js</code>&quot;, for ease of maintenance and good software engineering practice. The now-preferred approach is not to embed styles and JavaScript codes inside HTML document, but keep them in separate files.</p>

<p>[TODO] More examples on jQuery + HTML5/CSS3</p>

<h3 id="JSEx_FormInputValidation">HTML Form Input Validation</h3>

<p><strong>NOTE</strong>: HTML5 supports form input validation. You should use HTML5 for input validation, which is much simpler and stable (Read &quot;<a href="HTML_CSS_Intermediate.html#HTML_Examples">HTML Form By Examples</a>&quot;). On the other hand, there are also tons of advanced Form Input Validator libraries, such as Parsley JS.</p>

<h4>Using HTML5</h4>
<h5>HTML &quot;<span class="font-code">H5FormValidation.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- H5FormValidation.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;HTML Form Input Validation Using HTML5&lt;/title&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;HTML Form Input Validation Using HTML5&lt;/h2&gt;
 
  &lt;form id=&quot;formTest&quot; method=&quot;get&quot; action=&quot;processData&quot;&gt;
    &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtName&quot;&gt;Name&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtName&quot; name=&quot;name&quot; required autofocus&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtAddress&quot;&gt;Address&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtAddress&quot; name=&quot;address&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtZipcode&quot;&gt;Zip Code&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtZipcode&quot; name=&quot;zipcode&quot;
            placeholder=&quot;enter a 5-digit code&quot;
            required pattern=&quot;^\d{5}$&quot;
            oninvalid=&quot;this.setCustomValidity('Enter a 5-digit zipcode')&quot;
            oninput=&quot;setCustomValidity('')&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Country&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;select id=&quot;selCountry&quot; name=&quot;country&quot; required&gt;
            &lt;option value=&quot;&quot; selected&gt;Please select...&lt;/option&gt;
            &lt;option value=&quot;AA&quot;&gt;AA&lt;/option&gt;
            &lt;option value=&quot;BB&quot;&gt;BB&lt;/option&gt;
            &lt;option value=&quot;CC&quot;&gt;CC&lt;/option&gt;
          &lt;/select&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Gender&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;m&quot; required&gt;Male&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;f&quot;&gt;Female&lt;/label&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Preferences&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;r&quot;&gt;Red&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;g&quot; checked&gt;Green&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;b&quot;&gt;Blue&lt;/label&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPhone&quot;&gt;Phone&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;tel&quot; id=&quot;txtPhone&quot; name=&quot;phone&quot; required&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtEmail&quot;&gt;Email&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;email&quot; id=&quot;txtEmail&quot; name=&quot;email&quot; required&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPassword&quot;&gt;Password&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;password&quot; id=&quot;txtPassword&quot; name=&quot;password&quot;
          required pattern=&quot;^\w{6,8}$&quot;
          placeholder=&quot;6-8 characters&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPWVerified&quot;&gt;Verify Password&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;password&quot; id=&quot;txtPWVerified&quot; name=&quot;pwVerified&quot; required&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;dateBirthday&quot;&gt;Birthday&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;date&quot; id=&quot;dateBirthday&quot; name=&quot;birthday&quot; required&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;timeAppt&quot;&gt;Appointment&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;time&quot; id=&quot;timeAppt&quot; name=&quot;appointment&quot; required&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;SEND&quot; id=&quot;btnSubmit&quot;&gt;&amp;nbsp;
          &lt;input type=&quot;reset&quot; value=&quot;CLEAR&quot; id=&quot;btnReset&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>

<ol>
<li><span class="line-heading-code-new">&lt;input type=&quot;text&quot; id=&quot;txtName&quot; name=&quot;name&quot; required autofocus&gt;</span><br>
The attribute <code>required</code> specifies that input cannot be empty. The attribute <code>autofocus</code> sets the focus to this element.</li>

<li><span class="line-heading-code-new">&lt;input type=&quot;text&quot; id=&quot;txtZipcode&quot; name=&quot;zipcode&quot; <br>
&nbsp;&nbsp;&nbsp;placeholder=&quot;enter a 5-digit code&quot;<br>
&nbsp;&nbsp;&nbsp;required pattern=&quot;^\d{5}$&quot;<br>
&nbsp;&nbsp;&nbsp;oninvalid=&quot;this.setCustomValidity('Enter a 5-digit zipcode')&quot;<br>
&nbsp;&nbsp;&nbsp;oninput=&quot;setCustomValidity('')&quot;&gt;</span><br>
The attribute <code>placeholder=&quot;text&quot;</code> is used to show hints on the text field as watermark. The attribute <code>pattern=&quot;regex&quot;</code> specifies an regular expression (regex) pattern to be validated for this field. The <code>oninvalid</code> and <code>oninput</code> event handlers are used to customize the error message.</li>

<li><span class="line-heading-code-new">&lt;select id=&quot;selCountry&quot; name=&quot;country&quot; required&gt;</span><br>
Similarly, we can use <code>required</code> on <code>&lt;select&gt;</code> to specify input value cannot be an empty string.</li>

<li><span class="line-heading-code-new">&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;m&quot; required&gt;Male&lt;/label&gt;<br>
&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;f&quot;&gt;Female&lt;/label&gt;</span><br>
For radio buttons, it is sufficient to place an <code>required</code> on one of the buttons. [How to specify <code>required</code> for checkboxes?]</li>

<li><span class="line-heading-code-new">&lt;input type=&quot;tel&quot; id=&quot;txtPhone&quot; name=&quot;phone&quot; required pattern=&quot;^\d+$&quot; placeholder=&quot;digits only&quot;&gt;</span><br>
HTML5 adds <code>type=&quot;tel&quot;</code> to <code>&lt;input&gt;</code>, but it is not widely supported.</li>

<li><span class="line-heading-code-new">&lt;input type=&quot;email&quot; id=&quot;txtEmail&quot; name=&quot;email&quot; required&gt;</span><br>
HTML5 adds <code>type=&quot;email&quot;</code> to <code>&lt;input&gt;</code> for email input, which can be validated (via <code>required</code>).</li>

<li><span class="line-heading-code-new">&lt;input type=&quot;date&quot; id=&quot;dateBirthday&quot; name=&quot;birthday&quot; required&gt;<br>
&lt;input type=&quot;time&quot; id=&quot;timeAppt&quot; name=&quot;appointment&quot; required&gt;</span><br>
HTML5 adds <code>type=&quot;date&quot;</code> and <code>type=&quot;time&quot;</code> to <code>&lt;input&gt;</code>. Some browsers (e.g., Chrome) could show a data-picker and time-picker.</li>

</ol>

<h4>Using JavaScript</h4>

<p>You can use JavaScript to valid an HTML form's input field before submitting the form data to the server. The JavaScript can verify that:</p>

<ol>
<li>An input field is required and cannot be left empty.</li>
<li>An input field has he required number of character (e.g., password).</li>
<li>A valid email address (user@hostname.com)</li>
<li>A valid numeric string (e.g., phone number, zip code, credit card number), or all-letter string.</li>
<li>A valid date.</li>
</ol>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>

<a href="jsdemo/JSFormValidation.html" target="_blank"><img class="image-center image-border" src="images/JS_FormValidation.png" alt="image"/></a>

<h5>HTML: &quot;<span class="font-code">JSFormValidation.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSFormValidation.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;HTML Form Input Validation Using JavaScript&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;JSFormValidation.css&quot;&gt;
  &lt;script src=&quot;JSFormValidation.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;HTML Form Input Validation Using JavaScript&lt;/h2&gt;
 
  &lt;form id=&quot;formTest&quot; method=&quot;get&quot; action=&quot;processData&quot;&gt;
    &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtName&quot;&gt;Name&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtName&quot; name=&quot;name&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmNameError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtAddress&quot;&gt;Address&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtAddress&quot; name=&quot;address&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmAddressError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtZipcode&quot;&gt;Zip Code&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtZipcode&quot; name=&quot;zipcode&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmZipcodeError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Country&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;select id=&quot;selCountry&quot; name=&quot;country&quot;&gt;
            &lt;option value=&quot;&quot; selected&gt;Please select...&lt;/option&gt;
            &lt;option value=&quot;AA&quot;&gt;AA&lt;/option&gt;
            &lt;option value=&quot;BB&quot;&gt;BB&lt;/option&gt;
            &lt;option value=&quot;CC&quot;&gt;CC&lt;/option&gt;
          &lt;/select&gt;&lt;/td&gt;
      &lt;td id=&quot;elmCountryError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Gender&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;m&quot;&gt;Male&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;f&quot;&gt;Female&lt;/label&gt;&lt;/td&gt;
      &lt;td id=&quot;elmGenderError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Preferences&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/td&gt;
      &lt;td&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;r&quot;&gt;Red&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;g&quot;&gt;Green&lt;/label&gt;
          &lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;color&quot; value=&quot;b&quot;&gt;Blue&lt;/label&gt;&lt;/td&gt;
      &lt;td id=&quot;elmColorError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPhone&quot;&gt;Phone&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtPhone&quot; name=&quot;phone&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmPhoneError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtEmail&quot;&gt;Email&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtEmail&quot; name=&quot;email&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmEmailError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPassword&quot;&gt;Password (6-8 characters)&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;password&quot; id=&quot;txtPassword&quot; name=&quot;password&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmPasswordError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;label for=&quot;txtPWVerified&quot;&gt;Verify Password&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;password&quot; id=&quot;txtPWVerified&quot; name=&quot;pwVerified&quot;&gt;&lt;/td&gt;
      &lt;td id=&quot;elmPWVerifiedError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;SEND&quot; id=&quot;btnSubmit&quot;&gt;&amp;nbsp;
          &lt;input type=&quot;reset&quot; value=&quot;CLEAR&quot; id=&quot;btnReset&quot;&gt;&lt;/td&gt;
      &lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS: &quot;<span class="font-code">JSFormValidation.css</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre>
</td>
<td>
<pre>
<span class="color-comment">/* JSFormValidation.css */</span>
.required {  <span class="color-comment">/* Marker for required fields */</span>
   color: red;
}
 
.errorMsg {  <span class="color-comment">/* for error messages */</span>
   color: red;
}
 
.errorBox {  <span class="color-comment">/* for the error input text fields */</span>
   border: 2px solid red;
}
 
table {
   border: 0;
}
 
td {
   margin: 0;
   padding: 3px 10px;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>JavaScript: &quot;<span class="font-code">JSFormValidation.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSFormValidation.js
/*
 * Run init() after the page is loaded
 */</span>
window.onload = init;
 
<span class="color-comment">/*
 * Initialization
 */</span>
function init() {
  <span class="color-comment"> // Bind &quot;onsubmit&quot; event handler to the &quot;submit&quot; button</span>
   document.getElementById(&quot;formTest&quot;).onsubmit = validateForm;
  <span class="color-comment"> // Bind &quot;onclick&quot; event handler to &quot;reset&quot; button</span>
   document.getElementById(&quot;btnReset&quot;).onclick = clearForm;
  <span class="color-comment"> // Set initial focus</span>
   document.getElementById(&quot;txtName&quot;).focus();
}
 
<span class="color-comment">/*
 * The &quot;onsubmit&quot; event handler to validate the input fields.
 *
 * Most of the input validation functions take 3 arguments:
 *   inputElm: Input element to be validated.
 *   errMsg: the error message to be displayed if validation fails.
 *   errElm: to place the error message
 *
 * @param theForm: the form to be validated
 */</span>
function validateForm(theForm) {
   with(theForm) {
     <span class="color-comment"> // return false would prevent default submission</span>
      return (isNotEmpty(txtName, &quot;Please enter your name!&quot;, elmNameError)
           &amp;&amp; isNumeric(txtZipcode, &quot;Please enter a 5-digit zip code!&quot;, elmZipcodeError)
           &amp;&amp; isLengthMinMax(txtZipcode, 5, 5, &quot;Please enter a 5-digit zip code!&quot;, elmZipcodeError)
           &amp;&amp; isSelected(selCountry, &quot;Please make a selection!&quot;, elmCountryError)
           &amp;&amp; isChecked(&quot;gender&quot;, &quot;Please check a gender!&quot;, elmGenderError)
           &amp;&amp; isChecked(&quot;color&quot;, &quot;Please check a color!&quot;, elmColorError)
           &amp;&amp; isNumeric(txtPhone, &quot;Please enter a valid phone number!&quot;, elmPhoneError)
           &amp;&amp; isValidEmail(txtEmail, &quot;Enter a valid email!&quot;, elmEmailError)
           &amp;&amp; isValidPassword(txtPassword, &quot;Password shall be 6-8 characters!&quot;, elmPasswordError)
           &amp;&amp; verifyPassword(txtPassword, txtPWVerified, &quot;Different from new password!&quot;,
                 elmPWVerifiedError)
      );
   }
}
 
<span class="color-comment">/*
 * Helper function, to be called after validation, to show or clear
 *   existing error message, and to set focus to the input element
 *   for correcting error.
 * If isValid is false, show the errMsg on errElm, and place the
 *   focus on the inputElm for correcting the error.
 * Else, clear previous errMsg on errElm, if any.
 *
 * @param isValid (boolean): flag indicating the result of validation
 * @param errMsg (string)(optional): error message
 * @param errElm (object)(optional): if isValid is false, show errMsg; else, clear.
 * @param inputElm (object)(optional): set focus to this element,
 *        if isValid is false
 */</span>
function postValidate(isValid, errMsg, errElm, inputElm) {
   if (!isValid) {
     <span class="color-comment"> // Show errMsg on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null
            &amp;&amp; errMsg !== undefined &amp;&amp; errMsg !== null) {
         errElm.innerHTML = errMsg;
      }
     <span class="color-comment"> // Set focus on Input Element for correcting error, if provided.</span>
      if (inputElm !== undefined &amp;&amp; inputElm !== null) {
         inputElm.classList.add(&quot;errorBox&quot;); <span class="color-comment"> // Add class for styling</span>
         inputElm.focus();
      }
   } else {
     <span class="color-comment"> // Clear previous error message on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null) {
         errElm.innerHTML = &quot;&quot;;
      }
      if (inputElm !== undefined &amp;&amp; inputElm !== null) {
         inputElm.classList.remove(&quot;errorBox&quot;);
      }
   }
}
 
<span class="color-comment">/*
 * Validate that input value is not empty.
 *
 * @param inputElm (object): input element
 * @param errMsg (string): error message
 * @param errElm (object): element to place error message
 */</span>
function isNotEmpty(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim() !== &quot;&quot;);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains one or more digits */</span>
function isNumeric(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim().match(/^\d+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains only one or more letters */</span>
function isAlphabetic(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim().match(/^[a-zA-Z]+$/) !== null) ;
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains one or more digits or letters */</span>
function isAlphanumeric(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim().match(/^[0-9a-zA-Z]+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value length is between minLength and maxLength */</span>
function isLengthMinMax(inputElm, minLength, maxLength, errMsg, errElm) {
   var inputValue = inputElm.value.trim();
   var isValid = (inputValue.length &gt;= minLength) &amp;&amp; (inputValue.length &lt;= maxLength);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">// Validate that input value is a valid email address</span>
function isValidEmail(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim().match(
         /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/*
 * Validate that a selection is made (not default of &quot;&quot;) in &lt;select&gt; input
 *
 * @param selectElm (object): the &lt;select&gt; element
 */</span>
function isSelected(selectElm, errMsg, errElm) {
  <span class="color-comment"> // You need to set the default value of &lt;select&gt;'s &lt;option&gt; to &quot;&quot;.</span>
   var isValid = (selectElm.value !== &quot;&quot;);  <span class="color-comment"> // value in selected &lt;option&gt;</span>
   postValidate(isValid, errMsg, errElm, selectElm);
   return isValid;
}
 
<span class="color-comment">/*
 * Validate that one of the checkboxes or radio buttons is checked.
 * Checkbox and radio are based on name attribute, not id.
 *
 * @param inputName (string): name attribute of the checkbox or radio
 */</span>
function isChecked(inputName, errMsg, errElm) {
   var elms = document.getElementsByName(inputName);
   var isChecked = false;
   for (var i = 0; i &lt; elms.length; ++i) {
      if (elms[i].checked) {
         isChecked = true;
         break;
      }
   }
   postValidate(isChecked, errMsg, errElm, null); <span class="color-comment"> // no focus element</span>
   return isChecked;
}
 
<span class="color-comment">// Validate password, 6-8 characters of [a-zA-Z0-9_]</span>
function isValidPassword(inputElm, errMsg, errElm) {
   var isValid = (inputElm.value.trim().match(/^\w{6,8}$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">// Verify password.</span>
function verifyPassword(pwElm, pwVerifiedElm, errMsg, errElm) {
   var isTheSame = (pwElm.value === pwVerifiedElm.value);
   postValidate(isTheSame, errMsg, errElm, pwVerifiedElm);
   return isTheSame;
}
 
<span class="color-comment">/*
 * The &quot;onclick&quot; handler for the &quot;reset&quot; button to clear the display,
 * including the previous error messages and error box.
 */</span>
function clearForm() {
  <span class="color-comment"> // Remove class &quot;errorBox&quot; from input elements</span>
   var elms = document.querySelectorAll('.errorBox'); <span class="color-comment"> // class</span>
   for (var i = 0; i &lt; elms.length; i++) {
      elms[i].classList.remove(&quot;errorBox&quot;);
   }
 
  <span class="color-comment"> // Remove previous error messages</span>
   elms = document.querySelectorAll('[id$=&quot;Error&quot;]'); <span class="color-comment"> // id ends with Error</span>
   for (var i = 0; i &lt; elms.length; i++) {
      elms[i].innerHTML = &quot;&quot;;
   }
 
  <span class="color-comment"> // Set initial focus</span>
   document.getElementById(&quot;txtName&quot;).focus();
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>
<ol>
<li>We separate the HTML contents, CSS presentation styles, and JavaScript programming codes in three files.</li>

<li>Let's begin with the HTML:

<ol>
<li><span class="line-heading-code-new">&lt;form id=&quot;formTest&quot; method=&quot;get&quot; action=&quot;processData&quot;&gt;</span><br>
  We define an HTML form with unique <code>id=&quot;theForm&quot;</code>.</li>

<li><span class="line-heading-code-new">&lt;table&gt;...&lt;/table&gt;</span><br>
  We set up a table with three columns, which displays the labels, input elements and error messages (if any), respectively. See the screenshot.</li>

<li><span class="line-heading-code-new">&lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;txtName&quot; name=&quot;name&quot;/&gt;&lt;/td&gt;<br>
&lt;td id=&quot;elmNameError&quot; class=&quot;errorMsg&quot;&gt;&amp;nbsp;&lt;/td&gt;</span><br>
Each <code>&lt;input&gt;</code> element is assigned an unique <code>id</code>, so that it can be selected in JavaScript via the <code>document.getElementById()</code> function. It also contain a <code>name</code> attribute, identifying the <code>name=value</code><code></code> request parameter. The <code>&lt;td&gt;</code> element in the 3rd column for displaying the error message has an <code>id</code> ending with &quot;Error&quot;.</li>

<li><span class="line-heading-code-new">&lt;select ...&gt;&lt;option value=&quot;&quot; selected&gt;Please select...&lt;/option&gt;</span><br>
For the <code>&lt;select&gt;</code> element, we define a default no-selection <code>&lt;option&gt;</code>, with value of &quot;&quot; (empty string) and label of &quot;Please select...&quot;. This is necessary so that we can detect whether the user has made a selection.</li>

<li>For checkboxes and radio buttons, we cannot use <code>id</code>, as there are more than one elements and <code>id</code> must be unique. Instead, we set a common <code>name</code>. The JavaScript would use <code>document.getElementsByName()</code> to select all the elements with the same <code>name</code>.</li>

</ol>
</li>

<li>The CSS is simple:
<ol>

<li><span class="line-heading-code-new">.errorMsg { color: red; }</span><br>
  A class-selector for displaying the error messages in red.</li>
  
<li><span class="line-heading-code-new">errorBox { border: 2px solid red; }</span><br>
A class-selector for displaying the erroneous input element with a red border. It can be used for <code>&lt;input type=&quot;text|password&quot;&gt;</code> and <code>&lt;select&gt;</code>, but not for <code>&lt;input type=&quot;checkbox|radio&quot;&gt;</code>.</li>

</ol>
</li>

<li>We move on to the JavaScript:

<ol>
<li><span class="line-heading-code-new">window.onload = init;</span><br>
  We attach the <code>init()</code> function as the onload event handler. That is <code>init()</code> runs <em>after</em> the page is fully loaded.</li>

<li><span class="line-heading-code-new">function init() {<br>
&nbsp;&nbsp;&nbsp;document.getElementById(&quot;formTest&quot;).onsubmit = validateForm;<br>
&nbsp;&nbsp;&nbsp;document.getElementById(&quot;btnReset&quot;).onclick = clearForm;<br>
&nbsp;&nbsp;&nbsp;document.getElementById(&quot;txtName&quot;).focus();<br>
}</span><br>
In the <code>init()</code> function, we attach <code>validateForm</code> function as the <code>onsubmit</code> handler; <code>clearForm</code> function as the <code>onclick</code> handler; and set the initial <em>focus</em> to the <em>first</em> input element having the <code>id</code> of <code>txtName</code>.</li>
<li><span class="line-heading-code-new">function validateForm() {
return (isNotEmpty(...) &amp;&amp; isNumeric(...) &amp;&amp; ...); }</span><br>
The <code>validateForm()</code> function calls the various input validation functions to validate the input fields. It returns <code>true</code> if <em>all</em> the input validation functions return <code>true</code>, resulted in the form data to be submitted to the <code>action</code>'s url. Otherwise, it returns <code>false</code>, the form data will not be submitted and the current page remains.</li>

<li><span class="line-heading-code-new">function isNotEmpty(inputElm, errMsg, errElm) {<br>
&nbsp;&nbsp;&nbsp;var isValid = (inputElm.value.trim() !== &quot;&quot;);<br>
&nbsp;&nbsp;&nbsp;postValidate(isValid, errMsg, errElm, inputElm);<br>
&nbsp;&nbsp;&nbsp;return isValid;<br>
}<br>
</span>
Let's look into an input validation function <code>isNotEmpty()</code> in details. It takes 3 arguments, an input element, an error message, and an error message element. 
It gets the <code>value</code> from the input element, <code>trim()</code> to remove the leading and trailing whitespaces. It then checks for empty string, and assigned the result to a boolean variable <code>isValid</code>. It invokes the <code>postValidate()</code> and return the boolean flag.</li>
  
<li><span class="line-heading-code-new">function postValidate(isValid, errMsg, errElm, inputElm) { ... }</span><br> 
  The <code>postValidate()</code> accepts 4 arguments. If the input is invalid (<code>isValid</code> is <code>false</code>), it set the <code>innerHMTL</code> of <code>errElm</code> to the <code>errMsg</code>, and add a <code>class</code> &quot;<code>errorBox</code>&quot; to <code>inputElm</code>. The CSS class-selector <code>.errorBox</code> will display the input element with a red boundary. Otherwise, it clears the <code>innerHTML</code> of the <code>errElm</code> and remove <code>class</code> &quot;<code>errorBox</code>&quot; from <code>inputElm</code>.</li>
  
<li><span class="line-heading-code-new">function isNumeric(inputElm, errMsg, errElm) {<br>
  &nbsp;&nbsp;&nbsp;var isValid = (inputElm.value.trim().match(/^\d+$/) !== null);</span><br>
For input validation functions such as <code>isNumeric()</code>, we use regular expression (regex) to perform pattern matching, e.g., regex <code>/^\d+$/</code> matches 1 or more digits; regex  <code>/^[a-zA-Z]+$/</code> matches one or more letters; <code>/^[0-9]{5,8}$/</code> matches string of 5 to 8 digits. The <code>string.match(regex)</code> return <code>null</code> if no match is found. Regular expression is extremely powerful for text processing. Read &quot;<a href="../howto/Regexe.html">Regular Expression</a>&quot; for more details.</li>
<li>In <code>isValidEmail()</code> function, we check for the email pattern of &quot;<code>a@b.cc</code>&quot; via regex <code>/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/</code>.</li>
<li>In <code>isSelected()</code> used by <code>&lt;select&gt;</code>, the  <code>selectedElm.value</code> returns the value of the selected <code>&lt;option&gt;</code>.</li>
<li>In <code>isChecked()</code> used by input <code>&lt;type=&quot;checkbox|radio&quot;&gt;</code>, we used the <code>document.getElementsByName()</code> to select all elements with the common <code>name</code> attribute. We loop through all elements to look for <code>.checked</code> property.</li>
<li>In <code>isValidPassword()</code>, we use regex <code>/^\w{6,8}$/</code>, which accepts 6 to 8 word characters.</li>
<li>In <code>clearForm()</code>, we use <code>document.querySelectorAll('.errorBox')</code> to select all elements with class &quot;<code>errorBox</code>&quot;, and remove this <code>class</code> value from the <code>classList</code>. We then use <code>document.querySelectorAll('[id$=&quot;Error&quot;]')</code> to select all elements with <code>id</code> <em>ending</em> with &quot;<code>Error</code>&quot; and remove its contents (possibly previous error message).</li>
</ol>
</li>

<li>Some notes in form input validation:
<ol>
<li>What is a valid name, address and zipcode? The name and address vary from country to country and they may contain non-ASCII characters. Zipcode may not be numeric and may contain space.</li>

<li>A password may contain letter, digit and special characters such as <code>@</code>. it probably does not contain space.</li></ol>
[TODO more]
</li>
</ol>

<h4>Using jQuery</h4>

<p>jQuery (a JavaScript Framework) provides elegant selectors and event handling syntax, which greatly simplifies the coding. jQuery is preferred nowadays, over raw JavaScript.</p>

<h5>HTML &quot;<span class="font-code">JQFormValidation.html</span>&quot;</h5>
<p>Same as &quot;<code>JSFormValidation.html</code>&quot;, except the references to CSS and JavaScipt, and the inclusion of jQuery library, and may be the title.</p>

<pre class="color-example">
&lt;head&gt;
  ......
  &lt;link rel=&quot;stylesheet&quot; href=&quot;<span class="color-new">JQFormValidation.css</span>&quot;&gt;
  <span class="color-new">&lt;script src=&quot;js/jquery-1.11.2.min.js&quot;&gt;&lt;/script&gt;</span>
  &lt;script src=&quot;<span class="color-new">JQFormValidation.js</span>&quot;&gt;&lt;/script&gt;
&lt;/head&gt;</pre>

<h5>CSS &quot;<span class="font-code">JQFormValidation.css</span>&quot;</h5>
<p>Exactly the same as &quot;<code>JSFormValidation.css</code>&quot;.</p>


<h5>JavaScript &quot;<span class="font-code">JQFormValidation.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
</td>
<td>
<pre>
<span class="color-comment">// JQFormValidation.js</span>
<span class="color-comment">/*
 * Shorthand for $(document).ready( function() {...} )
 * Run once the DOM tree is contructed.
 */</span>
$( function() {
  <span class="color-comment"> // Set initial focus</span>
   $('#txtName').focus();
 
  <span class="color-comment"> // Bind &quot;submit&quot; event handler to form</span>
   $('#formTest').on('submit', function() {
      var $form = $(this);
     <span class="color-comment"> // return false would prevent default submission</span>
      return isNotEmpty($form.find('#txtName'), &quot;Please enter your name!&quot;,
               $form.find('#elmNameError'))
            &amp;&amp; isNumeric($form.find('#txtZipcode'), &quot;Please enter a 5-digit zip code!&quot;,
               $form.find('#elmZipcodeError'))
            &amp;&amp; isLengthMinMax($form.find('#txtZipcode'), 5, 5, &quot;Please enter a 5-digit zip code!&quot;,
               $form.find('#elmZipcodeError'))
            &amp;&amp; isSelected($form.find('#selCountry'), &quot;Please make a selection!&quot;,
               $form.find('#elmCountryError'))
            &amp;&amp; isChecked($form.find('[name=&quot;gender&quot;]:checked'), &quot;Please check a gender!&quot;,
               $form.find('#elmGenderError'))
            &amp;&amp; isChecked($form.find('[name=&quot;color&quot;]:checked'), &quot;Please check a color!&quot;,
               $form.find('#elmColorError'))
            &amp;&amp; isNumeric($form.find('#txtPhone'), &quot;Please enter a valid phone number!&quot;,
               $form.find('#elmPhoneError'))
            &amp;&amp; isValidEmail($form.find('#txtEmail'), &quot;Enter a valid email!&quot;,
               $form.find('#elmEmailError'))
            &amp;&amp; isValidPassword($form.find('#txtPassword'), &quot;Password shall be 6-8 characters!&quot;,
               $form.find('#elmPasswordError'))
            &amp;&amp; verifyPassword($form.find('#txtPassword'), $form.find('#txtPWVerified'),
               &quot;Different from new password!&quot;, $form.find('#elmPWVerifiedError'))
            ;
   });
 
  <span class="color-comment"> // Bind &quot;click&quot; event handler to &quot;reset&quot; button</span>
   $('#btnReset').on('click', function() {
      $('.errorBox').removeClass('errorBox'); <span class="color-comment"> // remove the error styling</span>
      $('td[id$=&quot;Error&quot;]').html(''); <span class="color-comment"> // id ends with &quot;Error&quot;, remove contents</span>
      $('txtName').focus(); <span class="color-comment"> // Set focus element</span>
   });
});
 
<span class="color-comment">/*
 * Helper function, to be called after validation, to show or clear
 *   existing error message, and to set focus to the input element
 *   for correcting error.
 * If isValid is false, show the errMsg on errElm, and place the
 *   focus on the inputElm for correcting the error.
 * Else, clear previous errMsg on errElm, if any.
 *
 * @param isValid (boolean): flag indicating the result of validation
 * @param errMsg (string)(optional): error message
 * @param errElm (jQuery object)(optional): if isValid is false, show errMsg;
          else, clear.
 * @param inputElm (jQuery object)(optional): set focus to this element,
 *        if isValid is false
 */</span>
function postValidate(isValid, errMsg, errElm, inputElm) {
   if (!isValid) {
     <span class="color-comment"> // Show errMsg on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null
            &amp;&amp; errMsg !== undefined &amp;&amp; errMsg !== null) {
         errElm.html(errMsg);
      }
     <span class="color-comment"> // Set focus on Input Element for correcting error, if provided.</span>
      if (inputElm !== undefined &amp;&amp; inputElm !== null) {
         inputElm.addClass(&quot;errorBox&quot;); <span class="color-comment"> // Add class for styling</span>
         inputElm.focus();
      }
   } else {
     <span class="color-comment"> // Clear previous error message on errElm, if provided.</span>
      if (errElm !== undefined &amp;&amp; errElm !== null) {
         errElm.html('');
      }
      if (inputElm !== undefined &amp;&amp; inputElm !== null) {
         inputElm.removeClass(&quot;errorBox&quot;);
      }
   }
}
 
<span class="color-comment">/*
 * Validate that input value is not empty.
 *
 * @param inputElm (jQuery object): input element
 * @param errMsg (string): error message
 * @param errElm (jQuery object): element to place error message
 */</span>
function isNotEmpty(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim() !== &quot;&quot;);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains one or more digits */</span>
function isNumeric(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim().match(/^\d+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains only one or more letters */</span>
function isAlphabetic(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim().match(/^[a-zA-Z]+$/) !== null) ;
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value contains one or more digits or letters */</span>
function isAlphanumeric(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim().match(/^[0-9a-zA-Z]+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/* Validate that input value length is between minLength and maxLength */</span>
function isLengthMinMax(inputElm, minLength, maxLength, errMsg, errElm) {
   var inputValue = inputElm.val().trim();
   var isValid = (inputValue.length &gt;= minLength) &amp;&amp; (inputValue.length &lt;= maxLength);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">// Validate that input value is a valid email address</span>
function isValidEmail(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim().match(
         /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">/*
 * Validate that a selection is made (not default of &quot;&quot;) in &lt;select&gt; input
 *
 * @param selectElm (jQuery object): the &lt;select&gt; element
 */</span>
function isSelected(selectElm, errMsg, errElm) {
  <span class="color-comment"> // You need to set the default value of &lt;select&gt;'s &lt;option&gt; to &quot;&quot;.</span>
   var isValid = (selectElm.val() !== &quot;&quot;);  <span class="color-comment"> // value in selected &lt;option&gt;</span>
   postValidate(isValid, errMsg, errElm, selectElm);
   return isValid;
}
 
<span class="color-comment">/*
 * Validate that one of the checkboxes or radio buttons is checked.
 * Checkbox and radio are based on name attribute, not id.
 *
 * @param inputElms (jQuery object): &quot;checked&quot; checkboxes or radio
 */</span>
function isChecked(inputElms, errMsg, errElm) {
   var isChecked = inputElms.length &gt; 0;
   postValidate(isChecked, errMsg, errElm, null); <span class="color-comment"> // no focus element</span>
   return isChecked;
}
 
<span class="color-comment">// Validate password, 6-8 characters of [a-zA-Z0-9_]</span>
function isValidPassword(inputElm, errMsg, errElm) {
   var isValid = (inputElm.val().trim().match(/^\w{6,8}$/) !== null);
   postValidate(isValid, errMsg, errElm, inputElm);
   return isValid;
}
 
<span class="color-comment">// Verify password.</span>
function verifyPassword(pwElm, pwVerifiedElm, errMsg, errElm) {
   var isTheSame = (pwElm.val() === pwVerifiedElm.val());
   postValidate(isTheSame, errMsg, errElm, pwVerifiedElm);
   return isTheSame;
}</pre>
</td>
</tr>
</tbody>
</table>


<h5>How it Works</h5>

<ol>
<li><span class="line-heading-code-new">$( function() { ... }</span><br>
We place all the initialization operations under <code>$( function() {...} )</code>, which is a shorthand for <code>$(document).ready(function() {...} )</code>. These operations run once the ROM tree is construction, but before the external resources (such as images) are fully loaded. &quot;<code>ready</code>&quot; is a jQuery extension, which is better than <code>onload</code> in JavaScript.</li>

<li><span class="line-heading-code-new">$('#txtName').focus();</span><br> 
The jQuery ID-selector <code>$('#txtName')</code> selects element with specific <code>id</code>, and set it as initial focus element.</li>

<li><span class="line-heading-code-new">$('#formTest').on('submit', function() { ... }</span><br>
This selects the <code>&lt;form&gt;</code> element and bind an handler to event <code>submit</code>. You can also use <code>.submit(handler)</code> as the shorthand for <code>.on(event, handler)</code>.</li>

<li><span class="line-heading-code-new">var $form = $(this);</span><br>
<code>$(this)</code> holds the jQuery object under operation, i.e., the <code>&lt;form&gt;</code>. We assign it a variable <code>$form</code>. By convention, we prefix variable of jQuery object with <code>'$'</code> for ease of identification.</li>

<li><span class="line-heading-code-new">$form.find('#txtName')</span><br>
Find the element nested under <code>$form</code>, i.e., descendants of <code>$form</code>.</li>

<li><span class="line-heading-code-new">$('#btnReset').on('click', function() { ... }</span><br>
Similarly, we bind an hander to the click event for the reset button. We can use <code>.addClass(classValue)</code> and <code>.removeClass(classValue)</code> to add or remove a value from <code>class</code> attribute of the selected elements. We can use <code>.html(value)</code> to set the innerHTML of the selected elements; and <code>.val()</code> to retrieve the value.</li>

<li>To check if the selector returns no matches, you can compare the <code>.length</code> property with zero.</li>
</ol>


<h3>Tic-Tac-Toe</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>
<a href="jsdemo/JSTicTacToe.html" target="_blank"><img class="image-center image-border" src="images/JS_TicTacToe.png"  alt="image"/></a>

<h5>HTML &quot;<span class="font-code">JSTicTacToe.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSTicTacToe.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;Tic-Tac-Toe&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;JSTicTacToe.css&quot;&gt;
  &lt;script src=&quot;JSTicTacToe.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h1&gt;Tic-Tac-Toe&lt;/h1&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td id=&quot;cell0&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell1&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell2&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td id=&quot;cell3&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell4&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell5&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td id=&quot;cell6&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell7&quot;&gt;&amp;nbsp;&lt;/td&gt;
      &lt;td id=&quot;cell8&quot;&gt;&amp;nbsp;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;&lt;br&gt;
  &lt;input type=&quot;button&quot; id=&quot;btnNewGame&quot; value=&quot;New Game&quot;&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS &quot;<span class="font-code">JSTicTacToe.css</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre>
</td>
<td>
<pre>
<span class="color-comment">/* JSTicTacToe.css */</span>
body {
  background-color: white;
  color: black;
  font-family: Arial, Helvetica, sans-serif;
}
 
h1 {
  font-size: 28px;
}
 
table {
  border-collapse: collapse;
}
 
td {
  padding: 10px;
  border: 3px #888 solid;
  text-align: center;
  font-size: 28px;
  width: 20%;
  font-family: Consolas, monospace
}
 
<span class="color-comment">/* Set the border (top, right, bottom, left) of the cells */</span>
#cell0 { border-style: none  solid solid none;  }
#cell1 { border-style: none  solid solid solid; }
#cell2 { border-style: none  none  solid solid; }
#cell3 { border-style: solid solid solid none;  }
#cell4 { border-style: solid solid solid solid; }
#cell5 { border-style: solid none  solid solid; }
#cell6 { border-style: solid solid none  none;  }
#cell7 { border-style: solid solid none  solid; }
#cell8 { border-style: solid none  none  solid; }
 
<span class="color-comment">/* winning cells style */</span>
.winningCell {
  background-color: #f88;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>JavaScript &quot;JS<span class="font-code">TicTacToe.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSTicTacToe.js</span>
<span class="color-comment">/*
 * The cells are numbered from 0 to 8 from top-left to bottom-right.
 */</span>
window.onload = init; <span class="color-comment"> // run init() after the page is loaded</span>
 
const NUM_CELLS = 9;
 
<span class="color-comment">// A pattern is a 9-bit number where bit x represents cell x.</span>
const WINNING_PATTERNS
    = new Array(0007, 0070, 0700, 0444, 0222, 0111, 0421, 0124);<span class="color-comment"> // Octal</span>
var crossPattern, noughtPattern; <span class="color-comment"> // keep the plays so far</span>
 
<span class="color-comment">// &quot;cross&quot; is currently playing (boolean of true or false)</span>
var crossPlaying;
 
<span class="color-comment">// Initialize the game</span>
function init() {
   resetGame();
   document.getElementById(&quot;btnNewGame&quot;).onclick = resetGame;
}
 
<span class="color-comment">// Reset game by clearing all the cells and player's pattern</span>
function resetGame() {
   crossPattern = 0;
   noughtPattern = 0;
   crossPlaying = true;
   for (var cellNum = 0; cellNum &lt; NUM_CELLS; cellNum++) {
      var elm = document.getElementById(&quot;cell&quot; + cellNum);
      elm.innerHTML = &quot;&amp;nbsp;&quot;; <span class="color-comment"> // Clear content</span>
      elm.className = &quot;&quot;;       <span class="color-comment"> // Reset the class, used by CSS</span>
      elm.onmousedown = play;   <span class="color-comment"> // Attach mouse click handler</span>
   }
}
 
<span class="color-comment">// Mouse-click handler</span>
function play(evt) {
   var thisCell;
   if (evt) { <span class="color-comment"> // non-IE</span>
     thisCell = evt.target;
   } else {   <span class="color-comment"> // IE</span>
     thisCell = window.event.srcElement;
   }
 
  <span class="color-comment"> // Place the seed on the cell clicked and update the player's pattern</span>
   if (thisCell.innerHTML === &quot;&amp;nbsp;&quot;) {
      if (crossPlaying) {
         thisCell.innerHTML = &quot;x&quot;;
         crossPattern |=  Math.pow(2, thisCell.id.charAt(4));
      } else {
         thisCell.innerHTML = &quot;o&quot;;
         noughtPattern |=  Math.pow(2, thisCell.id.charAt(4));
      }
   }
   if (!checkWin()) {
     <span class="color-comment"> // Continue playing</span>
     <span class="color-comment"> // Disable mouse click for this cell. This cell is no longer active</span>
      thisCell.onmousedown = null;
     <span class="color-comment"> // toggling the current player</span>
      crossPlaying = !crossPlaying;
   }
}
 
<span class="color-comment">// Check if the current player wins the game</span>
function checkWin() {
   var theWinningPattern = -1;
   var playerPattern;
   if (crossPlaying) {
      playerPattern = crossPattern;
   } else {
      playerPattern = noughtPattern;
   }
 
  <span class="color-comment"> // Check if playerPattern is one of the winning patterns</span>
   for (var i = 0; i &lt; WINNING_PATTERNS.length; i++) {
      if ((WINNING_PATTERNS[i] &amp; playerPattern) === WINNING_PATTERNS[i]) {
         theWinningPattern = WINNING_PATTERNS[i];
         break;
      }
   }
 
  <span class="color-comment"> // Change the class name of the cells of the winning pattern</span>
  <span class="color-comment"> // CSS class-selector displays them differently</span>
   if (theWinningPattern &gt; -1) {
      for (var cellNum = 0; cellNum &lt; NUM_CELLS; cellNum++) {
         var elm = document.getElementById(&quot;cell&quot; + cellNum);
         if (theWinningPattern &amp; Math.pow(2, cellNum)) {
            elm.className = &quot;winningCell&quot;;
         }
         elm.onmousedown = null; <span class="color-comment"> // disable mouse click for all cells</span>
      }
      return true;
   } else {
      return false;
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>

<ol>
<li>There are three files: an HTML, a CSS and a JavaScript, which cleanly separate their respective functions. Take note that the HTML file deals only with the content and there is no script nor style embedded.</li>

<li>The HTML page puts up a 3x3 table of 9 cells, each with a unique <code>id</code>. It also include a button for creating a new game.</li>
<li>The CSS define the presentation style for the HTML elements. A special class-selector called &quot;<code>.winningCell</code>&quot; is defined to change the background color of the 3 winning cells.</li>

<li>The <code>init()</code> function, which is the <code>onload</code> handler, resets the game variables and cell contents via <code>resetGame()</code>, and attaches the function <code>resetGame()</code> as the button's <code>onclick</code> handler. Take note that clicking the &quot;New Game&quot; button does not involve refreshing of the page (which requires a costly access to the server), but simply reseting all the game variables and cell contents.</li>

<li>We use <code>window.onload=init</code> to ensure that <code>init()</code> is run <em>after</em> the page is fully loaded, so as to access the elements defined in the page.</li>

<li>We define a global array <code>WINNING_PATTERNS</code>, to keep the eight 3-in-a-row winning patterns. Each pattern is a 9-bit number, with bit-x represents cell-x. For example, the binary number <code>000000111</code> indicates that cells 0, 1, and 2 are occupied. The numbers are expressed in octal with a leading zero. (JavaScript does not seen to support binary number with a leading <code>0b</code>, like C/C++/Java.) Similarly, we define two global variables, <code>crossPattern</code> and <code>noughtPattern</code> to keep track of the crosses and noughts placed on the game board so far.</li>

<li>A boolean flag <code>crossPlaying</code> is used to keep track of the current player.</li>

<li>The <code>resetGame()</code> function resets the game variables (empty the <code>crossPattern</code> and <code>noughtPattern</code> and  set the current player to &quot;cross&quot;). It also clears the contents of the cells, and attaches <code>play()</code> function as the <code>onmousedown</code> event handler, so that the user can click on the cell to play the game.</li>

<li>Whenever the user clicks on a cell, the <code>play()</code> event handler triggers with the <code>mousedown</code> event object as the argument. It first identifies the cell-clicked (with different methods for IE and non-IE browsers). It  places the current player's symbol on the game board, and updates the player's pattern. It then calls the <code>checkWin()</code> to check if the current player wins the game. If not, it disables this cell by removing the <code>onmousedown</code> handler, and toggles the current player.</li>

<li>The <code>chcekWin()</code> function checks the current player's pattern against the eight winning patterns. If the current player wins, it highlights the three winning cells by changing the cells' <code>class</code> attribute. The CSS class-selector will automatically display the cell with a different background color. It also disables all the cells. User has to click the &quot;New Game&quot; button to start a new game.</li>
</ol>


<h3>A Date Picker</h3>

<h5>Screenshot</h5>
<p>Click the image to run the demo.</p>
<a href="jsdemo/JSDatePicker.html" target="_blank"><img class="image-center image-border" src="images/JS_DateChooser.png"  alt="image"/></a>

<h5>JavaScript Utilities &quot;<span class="font-code">dateUtil.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre>
</td>
<td>
<pre>
<span class="color-comment">// DateUtil.js</span>
<span class="color-comment">// Return true if the given year is a leap year</span>
function isLeapYear(year) {
   return ((year % 4) === 0 &amp;&amp; ((year % 100) !== 0 || (year % 400) === 0));
}
 
<span class="color-comment">// Return the number of days in the given month (1-12) of the year (xxxx)</span>
function getDaysInMonth(year, month) {
   if (month === 2) {
      if (isLeapYear(year)) {
         return 29;
      } else {
         return 28;
      }
   } else if ((month === 1) || (month === 3) || (month === 5) || (month === 7)
       || (month === 8) || (month === 10) || (month === 12)) {
      return 31;
   } else {
      return 30;
   }
}
 
<span class="color-comment">// Get the day of the week given year, month (1-12) and day (1-31)</span>
function getDayInWeek(year, month, day) {
  var weekdays = [&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;,
                  &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;];
  var theDate = new Date(year, month-1, day);
  return weekdays[theDate.getDay()];
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>

<ol>
<li>The function <code>isLeapYear(<em>year</em>)</code> returns true if <em><code>year</code></em> is a leap year.</li>

<li>The function <code>getDaysInMonth(<em>year</em>, <em>month</em>)</code> returns the number of days in the given <code>month</code> (1-12) of the year (4-digit). Take note that JavaScript represents a month in the range of 0-11 (for Jan to Dec), instead of 1-12.</li>

<li>The function <code>getDayInWeek(<em>year</em>, <em>month</em>, <em>day</em>)</code> returns the day of the week (Sunday to Saturday). It constructs a built-in object <code>Date</code> with the given <em><code>year</code></em>, <em><code>month</code></em> and <em><code>day</code></em>, and use the <code>getDay()</code> function of the <code>Date</code> object to obtain the day of the week in the range of 0-6.</li>
</ol>

<h5>HTML &quot;<span class="font-code">JSDatePicker.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSDatePicker.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;A Date Chooser&lt;/title&gt;
  &lt;script src=&quot;JSDateUtil.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;JSDatePicker.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h2&gt;A Date Chooser&lt;/h2&gt;
  &lt;form id=&quot;theForm&quot;&gt;
    Year: &lt;input type=&quot;text&quot; name=&quot;year&quot; id=&quot;year&quot; size=&quot;4&quot; maxLength=&quot;4&quot;&gt;
    Month: &lt;select name=&quot;month&quot; id=&quot;month&quot;&gt;
      &lt;option id=&quot;month1&quot; value=&quot;1&quot;&gt;Jan&lt;/option&gt;
      &lt;option id=&quot;month2&quot; value=&quot;2&quot;&gt;Feb&lt;/option&gt;
      &lt;option id=&quot;month3&quot; value=&quot;3&quot;&gt;Mar&lt;/option&gt;
      &lt;option id=&quot;month4&quot; value=&quot;4&quot;&gt;Apr&lt;/option&gt;
      &lt;option id=&quot;month5&quot; value=&quot;5&quot;&gt;May&lt;/option&gt;
      &lt;option id=&quot;month6&quot; value=&quot;6&quot;&gt;Jun&lt;/option&gt;
      &lt;option id=&quot;month7&quot; value=&quot;7&quot;&gt;Jul&lt;/option&gt;
      &lt;option id=&quot;month8&quot; value=&quot;8&quot;&gt;Aug&lt;/option&gt;
      &lt;option id=&quot;month9&quot; value=&quot;9&quot;&gt;Sep&lt;/option&gt;
      &lt;option id=&quot;month10&quot; value=&quot;10&quot;&gt;Oct&lt;/option&gt;
      &lt;option id=&quot;month11&quot; value=&quot;11&quot;&gt;Nov&lt;/option&gt;
      &lt;option id=&quot;month12&quot; value=&quot;12&quot;&gt;Dec&lt;/option&gt;
    &lt;/select&gt;
    Day: &lt;select name=&quot;day&quot; id=&quot;day&quot;&gt;&lt;/select&gt;&amp;nbsp;
    &lt;input type=&quot;text&quot; name=&quot;dayInWeek&quot; id=&quot;dayInWeek&quot; readonly&gt;&amp;nbsp;
    &lt;input type=&quot;button&quot; id=&quot;btnNow&quot; value=&quot;Now&quot;&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>JavaScript &quot;<span class="font-code">JSDatePicker.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSDatePicker.js</span>
window.onload = init;
 
<span class="color-comment">// Global variables for the currently selected year, month and day</span>
var selectedYear;  <span class="color-comment"> // 4-digit year</span>
var selectedMonth; <span class="color-comment"> // 1 to 12 for Jan to Dec</span>
var selectedDay;   <span class="color-comment"> // 1 to 31</span>
 
<span class="color-comment">// The &quot;onload&quot; handler, runs after the page is fully loaded.</span>
function init() {
   setToday();     <span class="color-comment"> // Set global variables</span>
   updateDisplay();
 
   document.getElementById(&quot;year&quot;).onchange = function() {
      selectedYear=this.value;
     <span class="color-comment"> // In case the current day is no longer valid for non-leap year,</span>
     <span class="color-comment"> // e.g., 29 Feb 2001. Set to the last year of the month</span>
      updateDayDisplay();
      updateDayInWeekDisplay();
   }
 
   document.getElementById(&quot;month&quot;).onchange = function() {
      selectedMonth=this.value;
     <span class="color-comment"> // In case the current day is no longer valid, e.g., 31 in Feb.</span>
     <span class="color-comment"> // Set to the last year of the month</span>
      updateDayDisplay();
      updateDayInWeekDisplay()
   }
 
   document.getElementById(&quot;day&quot;).onchange = function() {
      selectedDay=this.value;
      updateDayInWeekDisplay();
   }
 
   document.getElementById(&quot;btnNow&quot;).onclick = function() {
      setToday();
      updateDisplay();
   }
}
 
<span class="color-comment">// Set global variable selectedYear, selectedMonth and selectedDay</span>
<span class="color-comment">// to today.</span>
function setToday() {
   var now = new Date();
   selectedYear = now.getFullYear();  <span class="color-comment"> // 4-digit year</span>
   selectedMonth = now.getMonth() + 1;<span class="color-comment"> // 1 to 12 for Jan to Dec</span>
   selectedDay = now.getDate();       <span class="color-comment"> // 1 to 31</span>
}
 
<span class="color-comment">// Update the year, month, day and day-in-week display according</span>
<span class="color-comment">// to the selected values.</span>
function updateDisplay() {
  <span class="color-comment"> // Set the value of text fields and select the correct options</span>
   document.getElementById(&quot;year&quot;).value = selectedYear;
   updateMonthDisplay();
   updateDayDisplay();
   updateDayInWeekDisplay();
}
 
function updateMonthDisplay() {
   document.getElementById(&quot;month&quot; + selectedMonth).selected = true;
}
 
function updateDayDisplay() {
   var elm = document.getElementById(&quot;day&quot;);
   elm.innerHTML = &quot;&quot;;
   var daysInMonth = getDaysInMonth(selectedYear, selectedMonth);
  <span class="color-comment"> // The selectedDay is no longer valid. Set to the last day of month</span>
   if (selectedDay &gt; daysInMonth) {
      selectedDay = daysInMonth;
   }
   var options = &quot;&quot;;
   for (var day = 1; day &lt;= daysInMonth; day++) {
      options += &quot;&lt;option value='&quot; + day + &quot;'&quot;;
      if (day === selectedDay) {
         options += &quot; selected&quot;;
      }
      options += &quot;&gt;&quot; + day + &quot;&lt;/option&gt;&quot;;
   }
   elm.innerHTML = options;
}
 
function updateDayInWeekDisplay() {
   document.getElementById(&quot;dayInWeek&quot;).value
      = getDayInWeek(selectedYear, selectedMonth, selectedDay);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>

<ol>
<li>The form consists of 5 input elements: a text field for the year, pull-down menus for month and day, a read-only text field for the day of the week, and a button to set the display to today. When the page is first loaded, the current date is display. If you change the year, month or day, the day of the week changes. If you change the year or month, the options in day adjust automatically, e.g., there are 28/29 days in Feb for non-leap and leap years.</li>

<li>[TODO]</li>
</ol>

<h3>Calendars</h3>

<p>Click the image to run the demo.</p>
<a href="jsdemo/JSCalendarSimple.html" target="_blank"><img class="image-center" src="images/JS_SimpleCalendar.png"  alt="image"/></a>

<h5>HTML &quot;<span class="font-code">JSCalendarSimple.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</pre>
</td>
<td>
<pre>
&lt;!DOCtype html&gt;
<span class="color-comment">&lt;!-- JSCalendarSimple.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;JavaScript Calendar&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;JSCalendarSimple.css&quot;&gt;
  &lt;script src=&quot;JSDateUtil.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;JSCalendarSimple.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;Calendar&lt;/h2&gt;
 
  &lt;form id=&quot;frmCalendar&quot;&gt;
    &lt;select id=&quot;selMonth&quot;&gt;
      &lt;option&gt;January&lt;/option&gt;
      &lt;option&gt;February&lt;/option&gt;
      &lt;option&gt;March&lt;/option&gt;
      &lt;option&gt;April&lt;/option&gt;
      &lt;option&gt;May&lt;/option&gt;
      &lt;option&gt;June&lt;/option&gt;
      &lt;option&gt;July&lt;/option&gt;
      &lt;option&gt;August&lt;/option&gt;
      &lt;option&gt;September&lt;/option&gt;
      &lt;option&gt;October&lt;/option&gt;
      &lt;option&gt;November&lt;/option&gt;
      &lt;option&gt;December&lt;/option&gt;
    &lt;/select&gt;
    &lt;input type=&quot;text&quot; id=&quot;tfYear&quot; size=&quot;4&quot; maxlength=&quot;4&quot;&gt;&lt;br&gt;&lt;br&gt;
 
    &lt;input type=&quot;button&quot; id=&quot;btnPrevYear&quot;  value=&quot; &lt;&lt;  &quot;&gt;
    &lt;input type=&quot;button&quot; id=&quot;btnPrevMonth&quot; value=&quot;  &lt;  &quot;&gt;
    &lt;input type=&quot;button&quot; id=&quot;btnToday&quot;     value=&quot;Today&quot;&gt;
    &lt;input type=&quot;button&quot; id=&quot;btnNextMonth&quot; value=&quot;  &gt;  &quot;&gt;
    &lt;input type=&quot;button&quot; id=&quot;btnNextYear&quot;  value=&quot;  &gt;&gt; &quot;&gt;&lt;br&gt;&lt;br&gt;
 
    &lt;table id=&quot;tableCalendar&quot;&gt;&lt;/table&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS &quot;<span class="font-code">JSCalendarSimple.css</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
</td>
<td>
<pre>
<span class="color-comment">/* JSCalendarSimple.css */</span>
.today {
  background: gray;
  color: white;
  font-weight: bold
}
 
.sunday {
  color: red
}
 
input, select {
  font-family: Consolas, monospace;
  font-weight: bold;
  color: blue
}
 
table {
  font-family: Consolas, monospace;
  text-align: right;
  border-collapse:collapse;
  border: 1px solid black
}
 
td, th {
  padding: 3px 5px;
  border: 1px solid black
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>JavaScript &quot;<span class="font-code">CalendarSimple.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSCalendarSimple.js</span>
window.onload = init;
 
<span class="color-comment">// Global variables</span>
<span class="color-comment">// Today's year, month(0-11) and day(1-31)</span>
var thisYear, thisMonth, thisDay;
 
<span class="color-comment">// The &quot;onload&quot; handler, run after the page is fully loaded.</span>
function init() {
   setToday();
 
   document.getElementById(&quot;selMonth&quot;).onchange = setMonth;
   document.getElementById(&quot;tfYear&quot;).onchange   = setYear;
 
   document.getElementById(&quot;btnPrevYear&quot;).onclick  = setPreviousYear;
   document.getElementById(&quot;btnPrevMonth&quot;).onclick = setPreviousMonth;
   document.getElementById(&quot;btnNextMonth&quot;).onclick = setNextMonth;
   document.getElementById(&quot;btnNextYear&quot;).onclick  = setNextYear;
   document.getElementById(&quot;btnToday&quot;).onclick     = setToday;
 
   document.getElementById(&quot;frmCalendar&quot;).onsubmit = function() {
      return false;<span class="color-comment"> // Stay in current page, do not refresh.</span>
   }
}
 
<span class="color-comment">// Set thisYear, thisMonth, thisDay to Today</span>
<span class="color-comment">// So that we can highlight today on the calendar</span>
function setToday() {
   var now   = new Date();        <span class="color-comment"> // today</span>
   thisDay   = now.getDate();     <span class="color-comment"> // 1-31</span>
   thisMonth = now.getMonth();    <span class="color-comment"> // 0-11</span>
   thisYear  = now.getFullYear(); <span class="color-comment"> // 4-digit year</span>
 
   document.getElementById(&quot;selMonth&quot;).selectedIndex = thisMonth;
   document.getElementById(&quot;tfYear&quot;).value = thisYear;
   printCalendar(thisYear, thisMonth);
}
 
<span class="color-comment">// Print the month-calendar for the given 4-digit year and month (0-11)</span>
function printCalendar(year, month) {
   var daysInMonth = getDaysInMonth(year, month + 1); <span class="color-comment"> // number of days</span>
   var firstDayOfMonth = (new Date(year, month, 1)).getDay(); <span class="color-comment"> // 0-6 for Sun to Sat</span>
 
   var tableInnerHTML = &quot;&lt;tr&gt;&lt;th class='sunday'&gt;Sun&lt;/th&gt;&lt;th&gt;Mon&lt;/th&gt;&lt;th&gt;Tue&lt;/th&gt;&quot;
        + &quot;&lt;th&gt;Wed&lt;/th&gt;&lt;th&gt;Thu&lt;/th&gt;&lt;th&gt;Fri&lt;/th&gt;&lt;th&gt;Sat&lt;/th&gt;&lt;/tr&gt;&quot;;
 
   var tdCellCount = 0; <span class="color-comment"> // count of table's &lt;td&gt; cells</span>
   if (firstDayOfMonth !== 0) { <span class="color-comment"> // Leave these cells blank</span>
      tableInnerHTML += &quot;&lt;tr&gt;&lt;td colspan='&quot; + firstDayOfMonth + &quot;'&gt;&lt;/td&gt;&quot;;
      tdCellCount = firstDayOfMonth;
   }
   for (var day = 1; day &lt;= daysInMonth; day++) {
      if (tdCellCount % 7 === 0) { <span class="color-comment"> // new table row</span>
         tableInnerHTML += &quot;&lt;tr&gt;&quot;;
      }
 
     <span class="color-comment"> // Use different style classes for today, sunday and other days</span>
      if ((day === thisDay) &amp;&amp; (month === thisMonth) &amp;&amp; (year === thisYear)) {
         tableInnerHTML += &quot;&lt;td class='today'&gt;&quot; + day + &quot;&lt;/td&gt;&quot;;
      } else if (tdCellCount % 7 === 0) {
         tableInnerHTML += &quot;&lt;td class='sunday'&gt;&quot; + day + &quot;&lt;/td&gt;&quot;;
      } else {
         tableInnerHTML += &quot;&lt;td&gt;&quot; + day + &quot;&lt;/td&gt;&quot;;
      }
 
      tdCellCount++;
      if (tdCellCount % 7 === 0) {
         tableInnerHTML += &quot;&lt;/tr&gt;&quot;;
      }
   }
  <span class="color-comment"> // print the remaining cells and close the row</span>
   var remainingCells = 7 - tdCellCount % 7;
   if (remainingCells &lt; 7) {
      tableInnerHTML += &quot;&lt;td colspan='&quot; + remainingCells + &quot;'&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;
   }
 
   document.getElementById(&quot;tableCalendar&quot;).innerHTML = tableInnerHTML;
}
 
<span class="color-comment">// The onchange handler for the month selection</span>
function setMonth() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   printCalendar(year, month);
}
 
<span class="color-comment">// The onchange handler for the year textfield</span>
function setYear() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   if (isValidYear(year)) {
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// Validate the year</span>
function isValidYear(year) {
   if (year &lt; 1 || year &gt; 9999) {
      alert (&quot;Sorry, the year must be between 1 and 9999.&quot;);
      document.getElementById(&quot;tfYear&quot;).focus();
      return false;
   } else {
      return true;
   }
}
 
<span class="color-comment">// The onclick handler for the previous-year button</span>
function setPreviousYear() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   year--;
   if (isValidYear(year)) {
      document.getElementById(&quot;tfYear&quot;).value = year;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the next-year button</span>
function setNextYear() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   year++;
   if (isValidYear(year)) {
      document.getElementById(&quot;tfYear&quot;).value = year;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the previous-month button</span>
function setPreviousMonth() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   if (month === 0) {
      month = 11;
      year--;
   } else {
      month--;
   }
   if (isValidYear(year)) {
      document.getElementById(&quot;tfYear&quot;).value = year;
      document.getElementById(&quot;selMonth&quot;).selectedIndex = month;
      printCalendar(year, month);
   }
}
 
<span class="color-comment">// The onclick handler for the next-year button</span>
function setNextMonth() {
   var year  = document.getElementById(&quot;tfYear&quot;).value;
   var month = document.getElementById(&quot;selMonth&quot;).selectedIndex;
   if (month === 11) {
      month = 0;
      year++;
   } else {
      month++;
   }
   if (isValidYear(year)) {
      document.getElementById(&quot;tfYear&quot;).value = year;
      document.getElementById(&quot;selMonth&quot;).selectedIndex = month;
      printCalendar(year, month);
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>
<ol>
<li>TODO</li>
</ol>

<h3>JavaScript Animation - A Digital Clock</h3>

<h5>Screenshot</h5>
<p>Click the image to run the demo.</p>

<a href="jsdemo/JSClockDigital.html" target="_blank"><img class="image-center image-border" src="images/JS_ClockDigital.png"  alt="image"/></a>

<h5>JavaScript &quot;JS<span class="font-code">ClockDigital.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSClockDigital.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;A JavaScript Clock&lt;/title&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
window.onload = initClock;
 
function initClock() {
  var now = new Date();
  var hr  = now.getHours();
  var min = now.getMinutes();
  var sec = now.getSeconds();
  if (min &lt; 10) min = &quot;0&quot; + min; <span class="color-comment"> // insert a leading zero</span>
  if (sec &lt; 10) sec = &quot;0&quot; + sec;
  document.getElementById('clockDisplay').innerHTML
        = &quot;Time is &quot; + hr + &quot;:&quot; + min + &quot;:&quot; + sec;
  setTimeout('initClock()', 500);
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 id=&quot;clockDisplay&quot;&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it works?</h5>

<ol>
<li>We use the <code>new Date()</code> to create a <code>Date</code> object with the current time and assign to the variable <code>now</code>.</li>

<li>We then use the <code>getHours()</code>, <code>getMinutes()</code>, <code>getSeconds()</code> function of <code>now</code> object to retrieve the hours, minutes and seconds.</li>

<li>We display the clock by setting the <code>innerHTML</code> property of the <code>&lt;h1&gt;</code> tag. We use the <code>getElementById()</code> function to retrieve the <code>&lt;h1&gt;</code> tag.</li>

<li>The function <code>initClock()</code> is invoked when the browser loads this page, by attaching it to the <code>onload</code> event handler.</li>

<li>In <code>initClock()</code>, the <code>setTimeout('initClock()', 500)</code> function is used to recursively invoke the <code>initClock()</code> function every 500 msec, to refresh the display.</li>
</ol>

<h3>JavaScript Animation - Bouncing Balls</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>

<a href="jsdemo/JSBouncingBallSimple.html" target="_blank"><img class="image-center image-border" src="images/JS_BouncingBall.png"  alt="image"></a>

<h5>HTML &quot;<span class="font-code">JSBouncingBallSimple.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSBouncingBallSimple.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;JavaScript Bouncing balls&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;JSBouncingBallSimple.css&quot;&gt;
  &lt;script src=&quot;JSBouncingBallSimple.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;JavaScript Bouncing Ball&lt;/h2&gt;
  <span class="color-comment">&lt;!-- holder for container box --&gt;</span>
  &lt;div id=&quot;box&quot;&gt;&lt;/div&gt;
  <span class="color-comment">&lt;!-- Use name and class to handle more than one balls --&gt;</span>
  &lt;img class=&quot;ball&quot; id=&quot;ball&quot; src=&quot;images/ball_red.gif&quot; alt=&quot;ball&quot;&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS &quot;<span class="font-code">JSBouncingBallSimple.css</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13</pre>
</td>
<td>
<pre>
<span class="color-comment">/* JSBouncingBallSimple.css */</span>
#box {  <span class="color-comment">/* The container box */</span>
  position: absolute;
  border: thick solid;
  border-color: red;
}
 
<span class="color-comment">/* The ball image.
 * Use class selector to handle more than one balls
*/</span>
img.ball {
  position: absolute;
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>JavaScript &quot;<span class="font-code">JSBouncingBallSimple.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSBouncingBallSimple.js</span>
window.onload = init;
 
<span class="color-comment">// Constants to define the box dimensions</span>
const MIN_X = 20;
const MIN_Y = 80;
const WIDTH = 400;
const HEIGHT = 400;
const MAX_X = MIN_X + WIDTH - 1;
const MAX_Y = MIN_Y + HEIGHT - 1;
 
<span class="color-comment">// The ball</span>
var ballRadius = 30;
var ballSize = ballRadius*2 + 1;
<span class="color-comment">// Randomly place the initial ball within the box, slightly off from border</span>
var ballCenterX = (WIDTH - 2*ballSize)*Math.random() + (MIN_X + ballSize);
var ballCenterY = (HEIGHT - 2*ballSize)*Math.random() + (MIN_Y + ballSize);
<span class="color-comment">// Initial speed</span>
var ballSpeedX = 8;
var ballSpeedY = 6;
 
function init() {
   var box = document.getElementById(&quot;box&quot;);
  <span class="color-comment"> // Position the box absolutely via CSS style</span>
   box.style.left = (MIN_X - 5) + &quot;px&quot;; <span class="color-comment"> // unit in px (pixels)</span>
   box.style.top = (MIN_Y - 5) + &quot;px&quot;;
   box.style.width = WIDTH + &quot;px&quot;;
   box.style.height = HEIGHT + &quot;px&quot;;
 
   var balls = document.getElementsByClassName(&quot;ball&quot;);
  <span class="color-comment"> // Position the ball image absolutely via CSS style</span>
   balls[0].style.left = (ballCenterX - ballRadius) + &quot;px&quot;;
   balls[0].style.top  = (ballCenterY - ballRadius) + &quot;px&quot;;
   balls[0].style.width = ballSize + &quot;px&quot;;
   balls[0].style.height = ballSize + &quot;px&quot;;
 
   moveOneStep();
}
 
function moveOneStep() {
  <span class="color-comment"> // Calculate the ball's new position</span>
   ballCenterX += ballSpeedX;
   ballCenterY += ballSpeedY;
  <span class="color-comment"> // Check if the ball moves over the bounds</span>
  <span class="color-comment"> // If so, adjust the position and speed.</span>
   if (ballCenterX - ballRadius &lt; MIN_X) {
      ballSpeedX = -ballSpeedX;<span class="color-comment"> // Reflect along normal</span>
      ballCenterX = MIN_X + ballRadius;<span class="color-comment"> // Re-position the ball at the edge</span>
   } else if (ballCenterX + ballRadius &gt; MAX_X) {
      ballSpeedX = -ballSpeedX;
      ballCenterX = MAX_X - ballRadius;
   }
  <span class="color-comment"> // May cross both x and y bounds</span>
   if (ballCenterY - ballRadius &lt; MIN_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MIN_Y + ballRadius;
   } else if (ballCenterY + ballRadius &gt; MAX_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MAX_Y - ballRadius;
   }
 
   var balls = document.getElementsByClassName(&quot;ball&quot;);
   balls[0].style.left = (ballCenterX - ballRadius) + &quot;px&quot;;
   balls[0].style.top  = (ballCenterY - ballRadius) + &quot;px&quot;;
 
  <span class="color-comment"> // Recursively call move after the specified msec</span>
   setTimeout(&quot;moveOneStep()&quot;, 60);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Ball Images</h5>
<img src="jsdemo/images/ball_red.gif"  alt="image"/>
<img src="jsdemo/images/ball_yellow.gif"  alt="image"/>
<img src="jsdemo/images/football.gif" width="31" height="31"  alt="image"/>
<img src="jsdemo/images/ball_blue.gif"  alt="image"/>

<h5>How it Works?</h5>

<ol>
<li>To perform animation in JavaScript, we use CSS's absolute positioning to position the image and then move the image. We define two CSS styles:

<ol>
<li>An id-selector <code>box</code> to absolutely position the container box. We use a <code>&lt;div id=&quot;box&quot;&gt;</code> tag for the container box by enabling its <code>border</code> property. In the <code>init()</code> function, we retrieve the <code>&lt;div id=&quot;box&quot;&gt;</code> element via <code>box=document.getElementById(&quot;box&quot;)</code>. We then absolutely position the <code>&lt;div&gt;</code> element via <code>box.style.left|top|width|height</code>.</li>

<li>An class-selector <code>img.ball</code> to absolutely position the ball. We use the class-selector for the ball in order to handle more than one balls. This is because <code>id</code> needs to be unique, but many elements can use the same <code>class</code>. The ball is represented by an <code>&lt;img class=&quot;ball&quot; src=&quot;images/ball_red.gif&quot; /&gt;</code> tag. We use <code>balls=document.getElementsByClassName(&quot;ball&quot;)</code> to retrieve an array of the <code>&lt;img&gt;</code> elements. We then use <code>balls[0].style.left|top|width|height</code> to position the ball.</li></ol></li>

<li>The <code>onload</code> event handler invokes the <code>init()</code>, which positions the container box, and the initial position of the ball.</li>

<li>The <code>moveOneStep()</code> function invokes <code>setTimeout(&quot;moveOneStep()&quot;, 60)</code>, which recursively runs the move() at the specified time (msec) interval.</li>

<li>Read &quot;<a href="../java/J8a_GameIntro-BouncingBalls.html">The world of Bouncing Ball</a>&quot; on the bouncing ball algorithm. There are many limitations on doing complex animation on JavaScript. Applet is a much better platform.</li>
</ol>

<h5>Creating a one-pixel image</h5>

<p>JavaScript's animation is often carry out by absolutely position (and re-position) an image via CSS <code>position:absolute</code> and <code><em>imgElm</em>.style.left|top|width|height</code> attributes. The image's width and height is controlled via the <code>style.width</code> and <code>style.height</code> properties. An one-pixel image (which is smallest in size) can be stretched to fill the specified <code>style.width</code> and <code>style.height</code>.</p>

<p>To create a one-pixel image:</p>

<ul>
<li>Launch &quot;Paint&quot; &rArr; Select the desired color &rArr; Fill &rArr; Select &quot;Resize&quot;, and set the width and height to 1x1 pixel &rArr; Save as &quot;png&quot; or &quot;gif&quot;.</li>
</ul>

<p>The one-pixel image can be stretched to a rectangle of any size, which can be used in application such as drawing 2D bar chart. It cannot be used as a round ball though.</p>
<p>You can also create a one-pixel animated image, which alternates a few colors.</p>

<h3>JavaScript Animation - Falling Snow, Falling Leave</h3>

<p>Click <a href="jsdemo/JSSnow.html" target="_blank">HERE</a> to run the demo.</p>

<h5>JavaScript &quot;<span class="font-code">JSSnow.js</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
</td>
<td>
<pre>
<span class="color-comment">// Place &lt;script type=&quot;text/javascript&quot; src=&quot;JSSnow.js&quot;&gt;&lt;/script&gt; in &lt;head&gt;</span>
window.onload = init;
 
const NUMBER = 12;  <span class="color-comment">// Number of items</span>
const IMAGE_PATH = &quot;images/&quot;
<span class="color-comment">//var SOURCE_IMAGES = [</span>
<span class="color-comment">//   &quot;snow1.gif&quot;, &quot;snow2.gif&quot;, &quot;snow3.gif&quot;, &quot;snow4.gif&quot;];</span>
const SOURCE_IMAGES = [
   &quot;leaf_green.gif&quot;, &quot;leaf_orange_green.gif&quot;, &quot;leaf_red.gif&quot;,
   &quot;leaf_yellow_green.gif&quot;, &quot;leaf_rotten.gif&quot;];
 
<span class="color-comment">// Each image has it own property, kept in an array</span>
var xPos       = new Array();  <span class="color-comment">// x position for the images</span>
var yPos       = new Array();  <span class="color-comment">// y position for the images</span>
var size       = new Array();  <span class="color-comment">// size (square) of the images</span>
var xStep      = new Array();  <span class="color-comment">// x displacement per time step</span>
var yStep      = new Array();  <span class="color-comment">// y displacement per time step</span>
var xSineMag   = new Array();  <span class="color-comment">// Magnitude of x sine variations</span>
var xStepAccum = new Array();  <span class="color-comment">// Accumulated sum of x displacement</span>
 
<span class="color-comment">// Screen width and height (browser dependent!)</span>
var xMin = document.documentElement.scrollLeft + 20;
var xMax = document.documentElement.scrollLeft
       + document.documentElement.clientWidth - 20;
var yMin = document.documentElement.scrollTop + 30
var yMax = document.documentElement.scrollTop
       + document.documentElement.clientHeight - 30;
 
<span class="color-comment">// Initialize the images and arrays</span>
function init() {
   for (var i = 0; i &lt; NUMBER; i++) {
      initItem(i);
 
      <span class="color-comment">// Absolutely position the images using CSS style</span>
      <span class="color-comment">// &lt;div&gt; tags shall be under the &lt;body&gt;</span>
      var imgElm = document.createElement(&quot;img&quot;);
      document.body.appendChild(imgElm);
      imgElm.clasName = &quot;images&quot;;
      imgElm.name = &quot;images&quot;;
      imgElm.src = IMAGE_PATH + SOURCE_IMAGES[i % SOURCE_IMAGES.length];
      imgElm.style.position = &quot;absolute&quot;;
      imgElm.style.width = size[i] + &quot;px&quot;;
      imgElm.style.height = size[i] + &quot;px&quot;;
   }
   moveOneStep();
}
 
<span class="color-comment">// Initialize the falling item given the itemIndex of the array</span>
function initItem(itemIndex) {
   xStepAccum[itemIndex] = 0;
   xSineMag[itemIndex] = 20 + Math.random() * 40;  <span class="color-comment">// 20 to 60</span>
   <span class="color-comment">// Slight variations in size and speed</span>
   size[itemIndex]  = 25 + Math.random() * 5;    <span class="color-comment">// 5 to 30</span>
   xStep[itemIndex] = (Math.random() - 0.5) / 5; <span class="color-comment">// -0.1 to 0.1</span>
   yStep[itemIndex] = 1 + Math.random();         <span class="color-comment">// 1 to 2</span>
   <span class="color-comment">// Initially place the images randomly within the screen</span>
   xPos[itemIndex] = Math.random() * (xMax - xMin - size[itemIndex]*4)
                     + size[itemIndex] + xMin;
   yPos[itemIndex] = Math.random() * (yMax - yMin - size[itemIndex]*4)
                     + size[itemIndex] + yMin;
}
 
function moveOneStep() {
   xMin = document.documentElement.scrollLeft + 20;
   xMax = document.documentElement.scrollLeft
       + document.documentElement.clientWidth - 20;
   yMin = document.documentElement.scrollTop + 30
   yMax = document.documentElement.scrollTop
       + document.documentElement.clientHeight - 30;
   var images = document.getElementsByName(&quot;images&quot;);
   for (var i = 0; i &lt; NUMBER; ++ i) {  <span class="color-comment">// Go thru each image</span>
      <span class="color-comment">// update y position</span>
      yPos[i] += yStep[i];
      <span class="color-comment">// Check if the image falls outside the screen</span>
      if (yPos[i] &gt; yMax) {
         <span class="color-comment">// Reposition the image and change its speed</span>
         initItem(i);
         yPos[i] = 0;
      }
 
      <span class="color-comment">// update x position - in sine curve, with some randomness.</span>
      xStepAccum[i] += xStep[i];
      var xNew = xPos[i] + Math.random()*0.3 + xSineMag[i]*Math.sin(xStepAccum[i]);
      if (xNew &gt; xMax) {
         xNew = xMax;
      }
 
      <span class="color-comment">// Set the absolute position of the image</span>
      images[i].style.top  = yPos[i] + &quot;px&quot;;
      images[i].style.left = xNew + &quot;px&quot;;
   }
   setTimeout(&quot;moveOneStep()&quot;, 100);
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Images</h5>
<p>I collected these images from the web and converted into transparent GIF:</p>
<img src="jsdemo/images/snow1.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/snow2.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/snow3.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/snow4.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/snow5.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/leaf_green.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/leaf_orange_green.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/leaf_red.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/leaf_rotten.gif" width="30" height="30"  alt="image"/>
<img src="jsdemo/images/leaf_yellow_green.gif" width="30" height="30"  alt="image"/>

<h5>HTML</h5>
<p>To use this script, place the following line in your HTML file, and also check the image file name and path in the script.</p>
<pre class="color-example">&lt;script src=&quot;JSSnow.js&quot;&gt;&lt;/script&gt;
</pre>

<h5>How it Works</h5>

<ol>
<li>The width and height of the displayed image is controlled by the CSS style.</li>
<li>To convert a GIF image to transparent using PhotoShop: From &quot;Image&quot; menu &rArr; Mode  &rArr; Color Table &rArr; Select the &quot;Dropper&quot; &rArr; Click on the background. This turns the background to check-box pattern (i.e., no color) &rArr; Save.</li>
<li>To convert a JPEG image to transparent GIF using PhotoShop: From &quot;Image&quot; menu &rArr; Mode  &rArr; Index mode &rArr; Color: 256 &rArr; Check &quot;Transparency&quot;. Then, do previous step and save as GIF format.</li>
</ol>

<p>[TODO] Convert to object-oriented.</p>

<h3>JavaScript Animation - X-Y Plotting</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>
<a href="jsdemo/JSXYPlot.html" target="_blank"><img class="image-center image-border" src="images/JS_XYPlot.png" alt="image"></a>

<h5>HTML &quot;<span class="font-code">JSXYPlot.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSXYPlot.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;JavaScript XY-Plotting&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;JSXYPlot.css&quot;&gt;
  &lt;script src=&quot;JSXYPlot.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
  &lt;h2&gt;JavaScript Plotting&lt;/h2&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;td&gt;
        &lt;fieldset&gt;
          &lt;legend&gt;New&lt;/legend&gt;
          &lt;label&gt;X: &lt;input type=&quot;text&quot; size=&quot;3&quot; id=&quot;newX&quot;&gt;&lt;/label&gt;
          &lt;label&gt;Y: &lt;input type=&quot;text&quot; size=&quot;3&quot; id=&quot;newY&quot;&gt;&lt;/label&gt;
          &lt;input id=&quot;btnCreate&quot; type=&quot;button&quot; value=&quot;CREATE&quot;&gt;
        &lt;/fieldset&gt;
      &lt;/td&gt;
      &lt;td&gt;
        &lt;fieldset&gt;
          &lt;legend&gt;Update&lt;/legend&gt;
          No: &lt;select name=&quot;updateNo&quot; id=&quot;updateNo&quot; &gt;&lt;/select&gt;
          &lt;label&gt;X: &lt;input type=&quot;text&quot; size=&quot;3&quot; id=&quot;updateX&quot;&gt;&lt;/label&gt;
          &lt;label&gt;Y: &lt;input type=&quot;text&quot; size=&quot;3&quot; id=&quot;updateY&quot;&gt;&lt;/label&gt;
          &lt;input id=&quot;btnUpdate&quot; type=&quot;button&quot; value=&quot;UPDATE&quot;&gt;
        &lt;/fieldset&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
 
  <span class="color-comment">&lt;!-- the container --&gt;</span>
  &lt;div id=&quot;box&quot; &gt;&lt;/div&gt;
  <span class="color-comment">&lt;!-- contains all the items and item description --&gt;</span>
  &lt;div id=&quot;allItems&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>CSS &quot;<span class="font-code">JSXYPlot.css</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11</pre>
</td>
<td>
<pre>
<span class="color-comment">/* JSXYPlot.css */</span>
<span class="color-comment">/* id-selector for the container */</span>
#box {
   position: absolute;
   border: thick solid red;
}
 
<span class="color-comment">/* class-selector for the items and item descriptions */</span>
.item, .itemDesc {
   position: absolute;
}</pre>
</td>
</tr>
</tbody>
</table>


<h5>JavaScript &quot;JS<span class="font-code">XYPlot.js</span>&quot;</h5>


<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre>
</td>
<td>
<pre>
<span class="color-comment">// JSXYPlot.js</span>
window.onload = init;
 
const SOURCE_IMAGE = &quot;images/car_green.gif&quot;;
const SIZE = 50; <span class="color-comment"> // width and height for the image</span>
const MARGIN_LEFT = 15; <span class="color-comment"> // left-margin for the container</span>
const MARGIN_TOP  = 180;<span class="color-comment"> // top-margin for the container</span>
<span class="color-comment">// x, y coordinates of the items</span>
const X_MIN = 0;
const Y_MIN = 0;
const X_MAX = 600;
const Y_MAX = 300;
const WIDTH = X_MAX - X_MIN + 1;
const HEIGHT = Y_MAX - Y_MIN + 1;
 
var numItems = 0; <span class="color-comment"> // number of items created so far</span>
 
<span class="color-comment">// The onload handler. Initialize the bounds</span>
function init() {
   var box = document.getElementById(&quot;box&quot;);
   box.style.top = MARGIN_TOP + &quot;px&quot;;
   box.style.left = MARGIN_LEFT + &quot;px&quot;;
   box.style.width = WIDTH + &quot;px&quot;;
   box.style.height = HEIGHT + &quot;px&quot;;
 
   document.getElementById(&quot;btnCreate&quot;).onclick = newItem;
   document.getElementById(&quot;btnUpdate&quot;).onclick = updateItem;
}
 
<span class="color-comment">// Create a new item at x, y</span>
function newItem() {
  <span class="color-comment"> // Need to parseInt as it will be added.</span>
   var x = parseInt(document.getElementById(&quot;newX&quot;).value);
   var y = parseInt(document.getElementById(&quot;newY&quot;).value);
   var displayX = x + MARGIN_LEFT;
   var displayY = y + MARGIN_TOP;
   if ((x &gt;= X_MIN) &amp;&amp; (x &lt;= X_MAX) &amp;&amp; (y &gt;= Y_MIN) &amp;&amp; (y &lt;= Y_MAX)) {
      numItems++;
     <span class="color-comment"> // Put up an &lt;img&gt; to represent the item</span>
      var itemImg = &quot;&lt;img class='item' name='item' src='&quot;
            + SOURCE_IMAGE + &quot;' style='width:&quot; + SIZE
            + &quot;px; height:&quot; + SIZE + &quot;px; top:&quot; + displayY
            + &quot;px; left:&quot; + displayX + &quot;px' /&gt;&quot;;
 
     <span class="color-comment"> // Put up a &lt;p&gt; for the item description</span>
      var itemDesc = &quot;&lt;p class='itemDesc' name='itemDesc' style='top:&quot;
            + displayY + &quot;px; left:&quot; + displayX
            + &quot;px'&gt;&quot; + numItems + &quot;&lt;/p&gt;&quot;;
 
      document.getElementById('allItems').innerHTML += itemImg + itemDesc;
     <span class="color-comment"> // add a form's select option</span>
      document.getElementById('updateNo').innerHTML
            += &quot;&lt;option&gt;&quot; + numItems + &quot;&lt;/option&gt;&quot;;
   }
}
 
<span class="color-comment">// Update the position of itemNo to x, y</span>
function updateItem() {
   var x = parseInt(document.getElementById(&quot;updateX&quot;).value);
   var y = parseInt(document.getElementById(&quot;updateY&quot;).value);
   var itemNo = document.getElementById(&quot;updateNo&quot;).value - 1;
 
   var items = document.getElementsByName(&quot;item&quot;);
   var itemDescs = document.getElementsByName(&quot;itemDesc&quot;);
   if (itemNo &lt; items.length
       &amp;&amp; (x &gt;= X_MIN) &amp;&amp; (x &lt;= X_MAX) &amp;&amp; (y &gt;= Y_MIN) &amp;&amp; (y &lt;= Y_MAX)) {
      items[itemNo].style.left = x + MARGIN_LEFT + &quot;px&quot;;
      items[itemNo].style.top  = y + MARGIN_TOP + &quot;px&quot;;
      itemDescs[itemNo].style.left = x + MARGIN_LEFT + &quot;px&quot;;
      itemDescs[itemNo].style.top  = y + MARGIN_TOP + &quot;px&quot;;
   }
}</pre>
</td>
</tr>
</tbody>
</table>

<h5>Images</h5>
<img src="jsdemo/images/car_green.gif" alt="image">

<h5>Dissecting the Program</h5>
<p>[TODO]</p>

<h3>JavaScript - Bar Chart</h3>
<p>[TODO]</p>


<h3>JavaScript Animation - Bouncing Ball on HTML 5</h3>

<p>This example runs on browser that support HTML 5, such as Firefox and Chrome, exclude IE.</p>

<p>HTML 5 provides a 2D canvas, which you can draw primitive shapes such as a circle. No ball image is needed in this example.</p>

<p>Click <a href="jsdemo/H5BouncingBall.html">HERE</a> to run the demo.</p>

<h5>HTML &quot;H5<span class="font-code">BouncingBall.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- H5BouncingBall.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Bouncing Ball (HTML 5)&lt;/title&gt;
 
&lt;script&gt;
var MIN_X = 0;
var MIN_Y = 0;
var WIDTH = 520;
var HEIGHT = 410;
var MAX_X = MIN_X + WIDTH - 1;
var MAX_Y = MIN_Y + HEIGHT - 1;
 
var ballRadius = 30;
var ballSize = ballRadius*2 + 1;
<span class="color-comment">// Randomly place the initial ball within the box, slightly off from border</span>
var ballCenterX = (WIDTH - 2*ballSize)*Math.random() + (MIN_X + ballSize);
var ballCenterY = (HEIGHT - 2*ballSize)*Math.random() + (MIN_Y + ballSize);
<span class="color-comment">// Initial speed</span>
var ballSpeedX = 5;
var ballSpeedY = 3;
 
var context;
 
function init() {
  var canvas = document.getElementById('box');
  canvas.width = WIDTH;
  canvas.height = HEIGHT;
  canvas.style.border = &quot;1px solid&quot;;
 
  context = canvas.getContext('2d');
  setInterval(draw, 30);
}
 
<span class="color-comment">// Draw the ball</span>
function draw() {
   <span class="color-comment">// Calculate the ball's new position</span>
   ballCenterX += ballSpeedX;
   ballCenterY += ballSpeedY;
   <span class="color-comment">// Check if the ball moves over the bounds</span>
   <span class="color-comment">// If so, adjust the position and speed.</span>
   if (ballCenterX - ballRadius &lt; MIN_X) {
      ballSpeedX = -ballSpeedX; <span class="color-comment">// Reflect along normal</span>
      ballCenterX = MIN_X + ballRadius; <span class="color-comment">// Re-position the ball at the edge</span>
   } else if (ballCenterX + ballRadius &gt; MAX_X) {
      ballSpeedX = -ballSpeedX;
      ballCenterX = MAX_X - ballRadius;
   }
   <span class="color-comment">// May cross both x and y bounds</span>
   if (ballCenterY - ballRadius &lt; MIN_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MIN_Y + ballRadius;
   } else if (ballCenterY + ballRadius &gt; MAX_Y) {
      ballSpeedY = -ballSpeedY;
      ballCenterY = MAX_Y - ballRadius;
   }
 
   context.clearRect(MIN_X, MIN_Y, MAX_X, MAX_Y);
   context.fillStyle=&quot;#FF0000&quot;;
   context.beginPath();
   context.arc(ballCenterX, ballCenterY, ballRadius, 0, Math.PI*2, true);
   context.closePath();
   context.fill();
}
 
window.addEventListener(&quot;load&quot;, init, true);
&lt;/script&gt;
 
&lt;/head&gt;
&lt;body&gt;
  &lt;section&gt;
    &lt;h2&gt;Bouncing Ball (on HTML 5 Canvas)&lt;/h2&gt;
    <strong>&lt;canvas id=&quot;box&quot;&gt;Canvas not supported&lt;/canvas&gt;</strong>
  &lt;/section&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Dissecting the Program</h5>

<ol>
<li>HTML 5 provides a new &quot;Canvas API&quot; to support 2D drawing. To use the canvas:

<ol>
<li>Create a canvas element via the new <code>&lt;canvas&gt;&lt;/canvas&gt;</code> tag.</li>

<li>In the script, select the canvas element (via <code>document.getElementById()</code>) and get the canvas' context (via <code>canvas.getContext('2d')</code>). Currently, only <code>'2d'</code> context is supported.</li>

<li>You can then use the context for drawing. For example, <code>clearRect()</code> to clear the container box; <code>beginPath()</code> and <code>closePath()</code> to enclose a path; <code>arc()</code>, <code>moveTo()</code>, <code>lineTo()</code> to define a path.</li></ol></li>

<li>We use <code>window.addEventListener(&quot;load&quot;, init, true)</code> to register an event handler (<code>init</code> function) to the <code>load</code> event.</li>

<li>We use <code>setInterval(draw, 30)</code> to schedule function <code>draw()</code> every 30 msec.</li>

<li>The ball bouncing algorithm is the same as the previous example.</li>
</ol>

<h3>JavaScript  Calculators</h3>

<h5>Screenshot</h5>

<p>Click the image to run the demo.</p>

<a href="jsdemo/JSCalculatorSimple.html" target="_blank"><img class="image-center" src="images/JS_CalculatorSimple.png" alt="image"></a>

<h5>HTML &quot;<span class="font-code">JSCalculatorSimple.html</span>&quot;</h5>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
<span class="color-comment">&lt;!-- JSCalculatorSimple.html --&gt;</span>
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;title&gt;Simple JavaScript Calculator&lt;/title&gt;
  &lt;style&gt;
     input {
       font-family: consola, monospace;
       color: blue;
     }
     td {
       margin-left: auto;
       margin-right: auto;
       text-align: center;
     }
     table {
       border: thick solid;
     }
  &lt;/style&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;h2&gt;Simple JavaScript Calculator&lt;/h2&gt;
 
&lt;form name=&quot;calcForm&quot;&gt;
&lt;table&gt;
&lt;tr&gt;
  &lt;td colspan=&quot;4&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;display&quot;
                         style=&quot;text-align:right&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn1&quot; value=&quot;1&quot;
             onclick=&quot;calcForm.display.value += '1'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn2&quot; value=&quot;2&quot;
             onclick=&quot;calcForm.display.value += '2'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn3&quot; value=&quot;3&quot;
             onclick=&quot;calcForm.display.value += '3'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnAdd&quot; value=&quot;+&quot;
             onclick=&quot;calcForm.display.value += ' + '&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn4&quot; value=&quot;4&quot;
             onclick=&quot;calcForm.display.value += '4'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn5&quot; value=&quot;5&quot;
             onclick=&quot;calcForm.display.value += '5'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn6&quot; value=&quot;6&quot;
             onclick=&quot;calcForm.display.value += '6'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnSub&quot; value=&quot;-&quot;
             onclick=&quot;calcForm.display.value += ' - '&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn7&quot; value=&quot;7&quot;
             onclick=&quot;calcForm.display.value += '7'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn8&quot; value=&quot;8&quot;
             onclick=&quot;calcForm.display.value += '8'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn9&quot; value=&quot;9&quot;
             onclick=&quot;calcForm.display.value += '9'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnMul&quot; value=&quot;x&quot;
             onclick=&quot;calcForm.display.value += ' * '&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnClear&quot;
             value=&quot;C&quot; onclick=&quot;calcForm.display.value = ''&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btn0&quot; value=&quot;0&quot;
             onclick=&quot;calcForm.display.value += '0'&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnEqual&quot; value=&quot;=&quot;
             onclick=&quot;calcForm.display.value = eval(calcForm.display.value)&quot;&gt;&lt;/td&gt;
  &lt;td&gt;&lt;input type=&quot;button&quot; name=&quot;btnDiv&quot; value=&quot;/&quot;
             onclick=&quot;calcForm.display.value += ' / '&quot;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>How it Works?</h5>

<ol>
<li>A CSS style is defined for the <code>&lt;input&gt;</code> tag to set the font face; another for the <code>&lt;td&gt;</code> tag to centralize the buttons within the cell.</li>

<li>A form (called &quot;<code>calcForm</code>&quot;) is defined with a text field (called &quot;<code>display</code>&quot;), and 16 buttons.</li>

<li>The inputs are appended to <code>display.value</code>. The result is evaluated via the <code>eval()</code> function in the <code>onclick</code> handler for the <code>'='</code> button.</li>
</ol>

<h3>Sending an HTTP <span class="font-code">GET|POST</span> Request via JavaScript</h3>

<p>Sending an HTTP GET request is easier, as the parameters can be included in the hyperlink. Sending a POST request is much harder, which is typically accomplished via a HTML form with method='POST'.</p>

<p>Other than using a HTML form, you can also trigger a HTTP POST via JavaScript, by creating and submitting an <em>virtual</em> form.</p>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
&lt;script&gt;
<span class="color-comment">/*
 * Send a POST request to /test
 * with parameter todo=update&amp;username=peter
 */</span>
function sendHttpPostRequest() {
   var form = document.createElement(&quot;form&quot;);
   form.setAttribute(&quot;method&quot;, &quot;post&quot;);
   form.setAttribute(&quot;action&quot;, &quot;/test.php&quot;);
 
   var hiddenField = document.createElement(&quot;input&quot;);
   hiddenField.setAttribute(&quot;type&quot;, &quot;hidden&quot;);
   hiddenField.setAttribute(&quot;name&quot;, &quot;todo&quot;);
   hiddenField.setAttribute(&quot;value&quot;, &quot;update&quot;);
   form.appendChild(hiddenField);
 
   hiddenField = document.createElement(&quot;input&quot;);
   hiddenField.setAttribute(&quot;type&quot;, &quot;hidden&quot;);
   hiddenField.setAttribute(&quot;name&quot;, &quot;username&quot;);
   hiddenField.setAttribute(&quot;value&quot;, &quot;peter&quot;);
   form.appendChild(hiddenField);
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href=&quot;http://www.nowhere.com&quot; onclick=&quot;sendHttpPostRequest(); return false;&quot;&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Function for Sending an HTTP <span class="font-code">GET|POST</span> Request</h5>
<p>You can use the following JavaScript function for send an HTTP <code>GET|POST</code> request:</p>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
&lt;script&gt;
<span class="color-comment">/*
 * Send an HTTP GET|POST request to path with params.
 * To call: sendHttpRequest('path', {'k1':'v1', 'k2':'v2'})
 */</span>
function sendHttpRequest(path, params, method) {
  <span class="color-comment"> // Set request method to POST if it is not specified.</span>
  <span class="color-comment"> // JavaScript's way of default function argument for trailing arguments</span>
   method = method || &quot;post&quot;;
 
   var form = document.createElement(&quot;form&quot;);
   form.setAttribute(&quot;method&quot;, method);
   form.setAttribute(&quot;action&quot;, path);
 
   for (var key in params) {
       if (params.hasOwnProperty(key)) {
           var hiddenField = document.createElement(&quot;input&quot;);
           hiddenField.setAttribute(&quot;type&quot;, &quot;hidden&quot;);
           hiddenField.setAttribute(&quot;name&quot;, key);
           hiddenField.setAttribute(&quot;value&quot;, params[key]);
 
           form.appendChild(hiddenField);
        }
   }
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href=&quot;http://www.nowhere.com&quot;
     onclick=&quot;sendHttpRequest('test.php', {'todo':'update', 'user':'peter'}); return false;&quot;&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>Duplicate Names</h5>

<p>The previous function cannot handle duplicate names, e.g., <code>user[]=aaa&amp;user[]=bbb</code>, as an object cannot have duplicate property. To support duplicate names, use two separate arrays for names and values instead, as follows:</p>

<table class="table-program">
<col class="col-line-number">
<col class="col-program">
<tbody>
<tr>
<td>
<pre class="text-right">
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre>
</td>
<td>
<pre>
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;JavaScript Example: Sending HTTP POST Request&lt;/title&gt;
&lt;script&gt;
<span class="color-comment">/*
 * Send an HTTP GET|POST request to path with name-value pairs
 *  in nameArray and valueArray. Allow duplicate names.
 * To call: sendHttpRequestDuplicateNames('path', ['k1', 'k2'], ['v1', 'v2'])
 */</span>
function sendHttpRequestDuplicateNames(path, nameArray, valueArray, method) {
   if (nameArray.length === 0 || nameArray.length !== valueArray.length) return false;
 
  <span class="color-comment"> // Set request method to POST if it is not specified.</span>
  <span class="color-comment"> // JavaScript's way of default function argument for trailing arguments</span>
   method = method || &quot;post&quot;;
 
   var form = document.createElement(&quot;form&quot;);
   form.setAttribute(&quot;method&quot;, method);
   form.setAttribute(&quot;action&quot;, path);
 
   for (var i = 0; i &lt; nameArray.length; i++) {
      var hiddenField = document.createElement(&quot;input&quot;);
      hiddenField.setAttribute(&quot;type&quot;, &quot;hidden&quot;);
      hiddenField.setAttribute(&quot;name&quot;, nameArray[i]);
      hiddenField.setAttribute(&quot;value&quot;, valueArray[i]);
 
      form.appendChild(hiddenField);
   }
 
   document.body.appendChild(form);
   form.submit();
}
&lt;/script&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;p&gt;
  &lt;a href=&quot;http://www.nowhere.com&quot;
     onclick=&quot;sendHttpRequestDuplicateNames('test.php', ['user[]', 'user[]'], ['peter', 'paul'], 'get'); return false;&quot;&gt;
  Click to send an HTTP POST Request&lt;/a&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</td>
</tr>
</tbody>
</table>

<h5>AJAX POST Request</h5>
<p>You can also use JavaScript to send an AJAX POST request. Read &quot;AJAX Basics&quot;.</p>

<h3>CURD (Create-Update-Read-Delete) Database Table</h3>
<p>[TODO]</p>

<p>&nbsp;</p>
<a class="references" href="../howto/References.html#javascript">Link To JavaScript/jQuery References &amp; Resources</a>



</div> <!-- End the content-main division -->

<div id="content-footer">
<p>Latest version tested: ???<br>
Last modified: May, 2015</p>
</div>

</div>  <!-- End the wrap-inner division -->

<!-- footer filled by JavaScript -->
<div id="footer" class="header-footer"><p>&nbsp;</p></div>

</div>  <!-- End the wrap-outer division -->

</body>
</html>
